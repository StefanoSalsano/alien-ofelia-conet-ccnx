<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Content-Centric Networking in Java: org.ccnx.ccn.profiles.security.access.group.PrincipalKeyDirectory Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><b>org</b>.<b>ccnx</b>.<b>ccn</b>.<b>profiles</b>.<b>security</b>.<b>access</b>.<b>group</b>.<a class="el" href="classorg_1_1ccnx_1_1ccn_1_1profiles_1_1security_1_1access_1_1group_1_1_principal_key_directory.html">PrincipalKeyDirectory</a>
  </div>
</div>
<div class="contents">
<h1>org.ccnx.ccn.profiles.security.access.group.PrincipalKeyDirectory Class Reference</h1><!-- doxytag: class="org::ccnx::ccn::profiles::security::access::group::PrincipalKeyDirectory" --><!-- doxytag: inherits="org::ccnx::ccn::io::content::KeyDirectory" -->
<p>This structure is used for representing both node keys and group (private) keys.  
<a href="#_details">More...</a></p>

<p><a href="classorg_1_1ccnx_1_1ccn_1_1profiles_1_1security_1_1access_1_1group_1_1_principal_key_directory-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1profiles_1_1security_1_1access_1_1group_1_1_principal_key_directory.html#a09e1f7cad7c14aa40b653934ff6a319a">PrincipalKeyDirectory</a> (<a class="el" href="classorg_1_1ccnx_1_1ccn_1_1profiles_1_1security_1_1access_1_1group_1_1_group_access_control_manager.html">GroupAccessControlManager</a> manager, <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_content_name.html">ContentName</a> directoryName, <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1_c_c_n_handle.html">CCNHandle</a> handle)  throws IOException </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Directory name should be versioned, else we pull the latest version; start enumeration.  <a href="#a09e1f7cad7c14aa40b653934ff6a319a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1profiles_1_1security_1_1access_1_1group_1_1_principal_key_directory.html#ae7a8688a2214130b6d75cbacecba3998">PrincipalKeyDirectory</a> (<a class="el" href="classorg_1_1ccnx_1_1ccn_1_1profiles_1_1security_1_1access_1_1group_1_1_group_access_control_manager.html">GroupAccessControlManager</a> manager, <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_content_name.html">ContentName</a> directoryName, boolean enumerate, <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1_c_c_n_handle.html">CCNHandle</a> handle)  throws IOException </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Directory name should be versioned, else we pull the latest version.  <a href="#ae7a8688a2214130b6d75cbacecba3998"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">HashMap&lt; String, <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1profiles_1_1security_1_1access_1_1group_1_1_group_access_control_profile_1_1_principal_info.html">PrincipalInfo</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1profiles_1_1security_1_1access_1_1group_1_1_principal_key_directory.html#a8a940807b0f4ae6470f0ed441844b425">getCopyOfPrincipals</a> ()  throws ContentNotReadyException </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return a copy to avoid synchronization problems.  <a href="#a8a940807b0f4ae6470f0ed441844b425"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1io_1_1content_1_1_wrapped_key_1_1_wrapped_key_object.html">WrappedKeyObject</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1profiles_1_1security_1_1access_1_1group_1_1_principal_key_directory.html#af2ff6d464ba2cf98c8c7d6c564dadff7">addWrappedKeyBlock</a> (Key secretKeyToWrap, <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_content_name.html">ContentName</a> publicKeyName, PublicKey publicKey)  throws ContentEncodingException, IOException, InvalidKeyException, 			VersionMissingException </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Store an additional link object pointing to the wrapped key object in the KeyDirectory.  <a href="#af2ff6d464ba2cf98c8c7d6c564dadff7"></a><br/></td></tr>
<tr><td colspan="2"><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1profiles_1_1security_1_1access_1_1group_1_1_principal_key_directory.html#a532c3e6bcbbbbb74604380aab0ec12b2">initialize</a> (boolean startEnumerating)  throws IOException </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Defer initialization until the end of our constructor since this class's variables are not set up yet, so we're not ready for callbacks.  <a href="#a532c3e6bcbbbbb74604380aab0ec12b2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aaded101e98fd50e833f16ffc6f778a5c"></a><!-- doxytag: member="org::ccnx::ccn::profiles::security::access::group::PrincipalKeyDirectory::processNewChild" ref="aaded101e98fd50e833f16ffc6f778a5c" args="(byte[] wkChildName)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1profiles_1_1security_1_1access_1_1group_1_1_principal_key_directory.html#aaded101e98fd50e833f16ffc6f778a5c">processNewChild</a> (byte[] wkChildName)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Called each time new data comes in, gets to parse it and load processed arrays. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1profiles_1_1security_1_1access_1_1group_1_1_principal_key_directory.html#a54804db305ac8395e60be58dab254e7f">addPrincipal</a> (byte[] wkChildName)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Adds a principal name.  <a href="#a54804db305ac8395e60be58dab254e7f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3df375b4bb29fe7cc732bfc53f2b3536"></a><!-- doxytag: member="org::ccnx::ccn::profiles::security::access::group::PrincipalKeyDirectory::factory" ref="a3df375b4bb29fe7cc732bfc53f2b3536" args="(ContentName name)" -->
<a class="el" href="classorg_1_1ccnx_1_1ccn_1_1io_1_1content_1_1_key_directory.html">KeyDirectory</a>&nbsp;</td><td class="memItemRight" valign="bottom"><b>factory</b> (<a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_content_name.html">ContentName</a> name)  throws IOException </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1io_1_1content_1_1_wrapped_key_1_1_wrapped_key_object.html">WrappedKeyObject</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1profiles_1_1security_1_1access_1_1group_1_1_principal_key_directory.html#a6f7bba8b8315063ab790195b00682525">getWrappedKeyForPrincipal</a> (String principalName)  throws ContentNotReadyException, ContentDecodingException, IOException </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the wrapped key object corresponding to a specified principal.  <a href="#a6f7bba8b8315063ab790195b00682525"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_content_name.html">ContentName</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1profiles_1_1security_1_1access_1_1group_1_1_principal_key_directory.html#a36acaa35080e218a59ee3e49b7f34bc8">getWrappedKeyNameForPrincipal</a> (<a class="el" href="classorg_1_1ccnx_1_1ccn_1_1profiles_1_1security_1_1access_1_1group_1_1_group_access_control_profile_1_1_principal_info.html">PrincipalInfo</a> pi)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the wrapped key name for a specified principal.  <a href="#a36acaa35080e218a59ee3e49b7f34bc8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_content_name.html">ContentName</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1profiles_1_1security_1_1access_1_1group_1_1_principal_key_directory.html#a99d14b47646977a4a1172c79d26cf1c3">getWrappedKeyNameForPrincipal</a> (<a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_content_name.html">ContentName</a> principalPublicKeyName)  throws VersionMissingException, ContentEncodingException </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the wrapped key name for a principal specified by the name of its public key.  <a href="#a99d14b47646977a4a1172c79d26cf1c3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a631656bfa258c384a0ccfa94b3549229"></a><!-- doxytag: member="org::ccnx::ccn::profiles::security::access::group::PrincipalKeyDirectory::findUnwrappedKey" ref="a631656bfa258c384a0ccfa94b3549229" args="(byte[] expectedKeyID)" -->
Key&nbsp;</td><td class="memItemRight" valign="bottom"><b>findUnwrappedKey</b> (byte[] expectedKeyID)  throws IOException, 			ContentNotReadyException, InvalidKeyException, 			ContentDecodingException, NoSuchAlgorithmException </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1501e2686868c06fd27b524a5766daa6"></a><!-- doxytag: member="org::ccnx::ccn::profiles::security::access::group::PrincipalKeyDirectory::unwrapKeyViaKnownGroupMembership" ref="a1501e2686868c06fd27b524a5766daa6" args="()" -->
Key&nbsp;</td><td class="memItemRight" valign="bottom"><b>unwrapKeyViaKnownGroupMembership</b> ()  throws InvalidKeyException, ContentDecodingException, IOException, NoSuchAlgorithmException </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a07744408eb1f3730e8a7254a66b3fe7a"></a><!-- doxytag: member="org::ccnx::ccn::profiles::security::access::group::PrincipalKeyDirectory::unwrapKeyViaNotKnownGroupMembership" ref="a07744408eb1f3730e8a7254a66b3fe7a" args="()" -->
Key&nbsp;</td><td class="memItemRight" valign="bottom"><b>unwrapKeyViaNotKnownGroupMembership</b> ()  throws InvalidKeyException, ContentDecodingException, IOException, NoSuchAlgorithmException </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">Key&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1profiles_1_1security_1_1access_1_1group_1_1_principal_key_directory.html#aaa4006b6bbdca96e9741fdda1e13e572">unwrapKeyForPrincipal</a> (String principal, Key unwrappingKey)  throws InvalidKeyException, ContentNotReadyException,  	ContentDecodingException, ContentGoneException, IOException, NoSuchAlgorithmException </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Unwrap the key wrapped under a specified principal, with a specified unwrapping key.  <a href="#aaa4006b6bbdca96e9741fdda1e13e572"></a><br/></td></tr>
<tr><td colspan="2"><h2>Package Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6017b97b973d60ddb33027c0deb62694"></a><!-- doxytag: member="org::ccnx::ccn::profiles::security::access::group::PrincipalKeyDirectory::_manager" ref="a6017b97b973d60ddb33027c0deb62694" args="" -->
<a class="el" href="classorg_1_1ccnx_1_1ccn_1_1profiles_1_1security_1_1access_1_1group_1_1_group_access_control_manager.html">GroupAccessControlManager</a>&nbsp;</td><td class="memItemRight" valign="bottom"><b>_manager</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="abea348779ecce72f99b20e176658cf10"></a><!-- doxytag: member="org::ccnx::ccn::profiles::security::access::group::PrincipalKeyDirectory::_principals" ref="abea348779ecce72f99b20e176658cf10" args="" -->
HashMap&lt; String, <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1profiles_1_1security_1_1access_1_1group_1_1_group_access_control_profile_1_1_principal_info.html">PrincipalInfo</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1profiles_1_1security_1_1access_1_1group_1_1_principal_key_directory.html#abea348779ecce72f99b20e176658cf10">_principals</a> = new HashMap&lt;String, <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1profiles_1_1security_1_1access_1_1group_1_1_group_access_control_profile_1_1_principal_info.html">PrincipalInfo</a>&gt;()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Maps the friendly names of principals (typically groups) to their information. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac15e33cc4207ede32e8044f30e07630c"></a><!-- doxytag: member="org::ccnx::ccn::profiles::security::access::group::PrincipalKeyDirectory::_principalsLock" ref="ac15e33cc4207ede32e8044f30e07630c" args="" -->
final ReadWriteLock&nbsp;</td><td class="memItemRight" valign="bottom"><b>_principalsLock</b> = new ReentrantReadWriteLock()</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>This structure is used for representing both node keys and group (private) keys. </p>
<p>We encapsulate functionality to walk such a directory and find our target key here.</p>
<p>We store links providing additional information about how to retrieve this key -- e.g. a link from a given group or principal name to a key ID-named block, in case a group member does not know an earlier version of their group public key. Or links to keys this key supercedes or precedes. </p>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a09e1f7cad7c14aa40b653934ff6a319a"></a><!-- doxytag: member="org::ccnx::ccn::profiles::security::access::group::PrincipalKeyDirectory::PrincipalKeyDirectory" ref="a09e1f7cad7c14aa40b653934ff6a319a" args="(GroupAccessControlManager manager, ContentName directoryName, CCNHandle handle)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">org.ccnx.ccn.profiles.security.access.group.PrincipalKeyDirectory.PrincipalKeyDirectory </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1profiles_1_1security_1_1access_1_1group_1_1_group_access_control_manager.html">GroupAccessControlManager</a>&nbsp;</td>
          <td class="paramname"> <em>manager</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_content_name.html">ContentName</a>&nbsp;</td>
          <td class="paramname"> <em>directoryName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1_c_c_n_handle.html">CCNHandle</a>&nbsp;</td>
          <td class="paramname"> <em>handle</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td>  throws IOException </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Directory name should be versioned, else we pull the latest version; start enumeration. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>manager</em>&nbsp;</td><td>the access control manager. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>directoryName</em>&nbsp;</td><td>the root of the KeyDirectory. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>handle</em>&nbsp;</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>IOException</em>&nbsp;</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ae7a8688a2214130b6d75cbacecba3998"></a><!-- doxytag: member="org::ccnx::ccn::profiles::security::access::group::PrincipalKeyDirectory::PrincipalKeyDirectory" ref="ae7a8688a2214130b6d75cbacecba3998" args="(GroupAccessControlManager manager, ContentName directoryName, boolean enumerate, CCNHandle handle)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">org.ccnx.ccn.profiles.security.access.group.PrincipalKeyDirectory.PrincipalKeyDirectory </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1profiles_1_1security_1_1access_1_1group_1_1_group_access_control_manager.html">GroupAccessControlManager</a>&nbsp;</td>
          <td class="paramname"> <em>manager</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_content_name.html">ContentName</a>&nbsp;</td>
          <td class="paramname"> <em>directoryName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">boolean&nbsp;</td>
          <td class="paramname"> <em>enumerate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1_c_c_n_handle.html">CCNHandle</a>&nbsp;</td>
          <td class="paramname"> <em>handle</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td>  throws IOException </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Directory name should be versioned, else we pull the latest version. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>manager</em>&nbsp;</td><td>the access control manager - must not be null </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>directoryName</em>&nbsp;</td><td>the root of the KeyDirectory. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>handle</em>&nbsp;</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>IOException</em>&nbsp;</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a54804db305ac8395e60be58dab254e7f"></a><!-- doxytag: member="org::ccnx::ccn::profiles::security::access::group::PrincipalKeyDirectory::addPrincipal" ref="a54804db305ac8395e60be58dab254e7f" args="(byte[] wkChildName)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void org.ccnx.ccn.profiles.security.access.group.PrincipalKeyDirectory.addPrincipal </td>
          <td>(</td>
          <td class="paramtype">byte[]&nbsp;</td>
          <td class="paramname"> <em>wkChildName</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Adds a principal name. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>wkChildName</em>&nbsp;</td><td>the principal name </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="af2ff6d464ba2cf98c8c7d6c564dadff7"></a><!-- doxytag: member="org::ccnx::ccn::profiles::security::access::group::PrincipalKeyDirectory::addWrappedKeyBlock" ref="af2ff6d464ba2cf98c8c7d6c564dadff7" args="(Key secretKeyToWrap, ContentName publicKeyName, PublicKey publicKey)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1io_1_1content_1_1_wrapped_key_1_1_wrapped_key_object.html">WrappedKeyObject</a> org.ccnx.ccn.profiles.security.access.group.PrincipalKeyDirectory.addWrappedKeyBlock </td>
          <td>(</td>
          <td class="paramtype">Key&nbsp;</td>
          <td class="paramname"> <em>secretKeyToWrap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_content_name.html">ContentName</a>&nbsp;</td>
          <td class="paramname"> <em>publicKeyName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">PublicKey&nbsp;</td>
          <td class="paramname"> <em>publicKey</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td>  throws <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1io_1_1content_1_1_content_encoding_exception.html">ContentEncodingException</a>, IOException, InvalidKeyException, 			<a class="el" href="classorg_1_1ccnx_1_1ccn_1_1profiles_1_1_version_missing_exception.html">VersionMissingException</a> </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Store an additional link object pointing to the wrapped key object in the KeyDirectory. </p>
<p>The link object is named with the Principal's name to allow searching the KeyDirectory by Principal name rather than KeyID. </p>

<p>Reimplemented from <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1io_1_1content_1_1_key_directory.html#ad4f2cd07ceba295883bf35dd3257714d">org.ccnx.ccn.io.content.KeyDirectory</a>.</p>

</div>
</div>
<a class="anchor" id="a8a940807b0f4ae6470f0ed441844b425"></a><!-- doxytag: member="org::ccnx::ccn::profiles::security::access::group::PrincipalKeyDirectory::getCopyOfPrincipals" ref="a8a940807b0f4ae6470f0ed441844b425" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HashMap&lt;String, <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1profiles_1_1security_1_1access_1_1group_1_1_group_access_control_profile_1_1_principal_info.html">PrincipalInfo</a>&gt; org.ccnx.ccn.profiles.security.access.group.PrincipalKeyDirectory.getCopyOfPrincipals </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>  throws <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1io_1_1content_1_1_content_not_ready_exception.html">ContentNotReadyException</a> </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Return a copy to avoid synchronization problems. </p>
<dl><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ContentNotReadyException</em>&nbsp;</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a6f7bba8b8315063ab790195b00682525"></a><!-- doxytag: member="org::ccnx::ccn::profiles::security::access::group::PrincipalKeyDirectory::getWrappedKeyForPrincipal" ref="a6f7bba8b8315063ab790195b00682525" args="(String principalName)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1io_1_1content_1_1_wrapped_key_1_1_wrapped_key_object.html">WrappedKeyObject</a> org.ccnx.ccn.profiles.security.access.group.PrincipalKeyDirectory.getWrappedKeyForPrincipal </td>
          <td>(</td>
          <td class="paramtype">String&nbsp;</td>
          <td class="paramname"> <em>principalName</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td>  throws <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1io_1_1content_1_1_content_not_ready_exception.html">ContentNotReadyException</a>, <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1io_1_1content_1_1_content_decoding_exception.html">ContentDecodingException</a>, IOException <code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the wrapped key object corresponding to a specified principal. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>principalName</em>&nbsp;</td><td>the principal. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the corresponding wrapped key object. </dd></dl>
<dl><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>IOException</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ContentNotReadyException</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ContentDecodingException</em>&nbsp;</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a99d14b47646977a4a1172c79d26cf1c3"></a><!-- doxytag: member="org::ccnx::ccn::profiles::security::access::group::PrincipalKeyDirectory::getWrappedKeyNameForPrincipal" ref="a99d14b47646977a4a1172c79d26cf1c3" args="(ContentName principalPublicKeyName)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_content_name.html">ContentName</a> org.ccnx.ccn.profiles.security.access.group.PrincipalKeyDirectory.getWrappedKeyNameForPrincipal </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_content_name.html">ContentName</a>&nbsp;</td>
          <td class="paramname"> <em>principalPublicKeyName</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td>  throws <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1profiles_1_1_version_missing_exception.html">VersionMissingException</a>, <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1io_1_1content_1_1_content_encoding_exception.html">ContentEncodingException</a> <code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the wrapped key name for a principal specified by the name of its public key. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>principalPublicKeyName</em>&nbsp;</td><td>the name of the public key of the principal. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the corresponding wrapped key name. </dd></dl>
<dl><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1profiles_1_1_version_missing_exception.html" title="Thrown when a version field is expected and can&#39;t be found.">VersionMissingException</a></em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ContentEncodingException</em>&nbsp;</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a36acaa35080e218a59ee3e49b7f34bc8"></a><!-- doxytag: member="org::ccnx::ccn::profiles::security::access::group::PrincipalKeyDirectory::getWrappedKeyNameForPrincipal" ref="a36acaa35080e218a59ee3e49b7f34bc8" args="(PrincipalInfo pi)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_content_name.html">ContentName</a> org.ccnx.ccn.profiles.security.access.group.PrincipalKeyDirectory.getWrappedKeyNameForPrincipal </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1profiles_1_1security_1_1access_1_1group_1_1_group_access_control_profile_1_1_principal_info.html">PrincipalInfo</a>&nbsp;</td>
          <td class="paramname"> <em>pi</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the wrapped key name for a specified principal. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>isGroup</em>&nbsp;</td><td>whether the principal is a group. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>principalName</em>&nbsp;</td><td>the name of the principal. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>principalVersion</em>&nbsp;</td><td>the version of the principal. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the corresponding wrapped key name. </dd></dl>

</div>
</div>
<a class="anchor" id="a532c3e6bcbbbbb74604380aab0ec12b2"></a><!-- doxytag: member="org::ccnx::ccn::profiles::security::access::group::PrincipalKeyDirectory::initialize" ref="a532c3e6bcbbbbb74604380aab0ec12b2" args="(boolean startEnumerating)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void org.ccnx.ccn.profiles.security.access.group.PrincipalKeyDirectory.initialize </td>
          <td>(</td>
          <td class="paramtype">boolean&nbsp;</td>
          <td class="paramname"> <em>startEnumerating</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td>  throws IOException <code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Defer initialization until the end of our constructor since this class's variables are not set up yet, so we're not ready for callbacks. </p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1profiles_1_1security_1_1access_1_1group_1_1_principal_key_directory.html#ae7a8688a2214130b6d75cbacecba3998" title="Directory name should be versioned, else we pull the latest version.">PrincipalKeyDirectory.PrincipalKeyDirectory(GroupAccessControlManager, ContentName, boolean, CCNHandle)</a> </dd>
<dd>
<a class="el" href="classorg_1_1ccnx_1_1ccn_1_1io_1_1content_1_1_key_directory.html#aa6254cf0a256aa254047e8e228db9db7" title="Directory name should be versioned, else we pull the latest version.">KeyDirectory.KeyDirectory(ContentName, boolean, CCNHandle)</a> </dd></dl>

<p>Reimplemented from <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1io_1_1content_1_1_key_directory.html#a3db09cbfc4af2b2daed36840f3abbcc8">org.ccnx.ccn.io.content.KeyDirectory</a>.</p>

</div>
</div>
<a class="anchor" id="aaa4006b6bbdca96e9741fdda1e13e572"></a><!-- doxytag: member="org::ccnx::ccn::profiles::security::access::group::PrincipalKeyDirectory::unwrapKeyForPrincipal" ref="aaa4006b6bbdca96e9741fdda1e13e572" args="(String principal, Key unwrappingKey)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Key org.ccnx.ccn.profiles.security.access.group.PrincipalKeyDirectory.unwrapKeyForPrincipal </td>
          <td>(</td>
          <td class="paramtype">String&nbsp;</td>
          <td class="paramname"> <em>principal</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Key&nbsp;</td>
          <td class="paramname"> <em>unwrappingKey</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td>  throws InvalidKeyException, <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1io_1_1content_1_1_content_not_ready_exception.html">ContentNotReadyException</a>,  	<a class="el" href="classorg_1_1ccnx_1_1ccn_1_1io_1_1content_1_1_content_decoding_exception.html">ContentDecodingException</a>, <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1io_1_1content_1_1_content_gone_exception.html">ContentGoneException</a>, IOException, NoSuchAlgorithmException <code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Unwrap the key wrapped under a specified principal, with a specified unwrapping key. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>principal</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>unwrappingKey</em>&nbsp;</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd></dd></dl>
<dl><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ContentGoneException</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ContentNotReadyException</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ContentDecodingException</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>InvalidKeyException</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>IOException</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>NoSuchAlgorithmException</em>&nbsp;</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/org/ccnx/ccn/profiles/security/access/group/PrincipalKeyDirectory.java</li>
</ul>
</div>
<hr class="footer"/><address style="text-align: right;"><small>Generated on Mon Feb 4 11:59:03 2013 for Content-Centric Networking in Java by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
