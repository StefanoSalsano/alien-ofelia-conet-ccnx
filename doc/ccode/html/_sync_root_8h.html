<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Content-Centric Networking in C: sync/SyncRoot.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<script type="text/javascript">
<!--
function changeDisplayState (e){
  var num=this.id.replace(/[^[0-9]/g,'');
  var button=this.firstChild;
  var sectionDiv=document.getElementById('dynsection'+num);
  if (sectionDiv.style.display=='none'||sectionDiv.style.display==''){
    sectionDiv.style.display='block';
    button.src='open.gif';
  }else{
    sectionDiv.style.display='none';
    button.src='closed.gif';
  }
}
function initDynSections(){
  var divs=document.getElementsByTagName('div');
  var sectionCounter=1;
  for(var i=0;i<divs.length-1;i++){
    if(divs[i].className=='dynheader'&&divs[i+1].className=='dynsection'){
      var header=divs[i];
      var section=divs[i+1];
      var button=header.firstChild;
      if (button!='IMG'){
        divs[i].insertBefore(document.createTextNode(' '),divs[i].firstChild);
        button=document.createElement('img');
        divs[i].insertBefore(button,divs[i].firstChild);
      }
      header.style.cursor='pointer';
      header.onclick=changeDisplayState;
      header.id='dynheader'+sectionCounter;
      button.src='closed.gif';
      section.id='dynsection'+sectionCounter;
      section.style.display='none';
      section.style.marginLeft='14px';
      sectionCounter++;
    }
  }
}
window.onload = initDynSections;
-->
</script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="dir_a2ce97d05a9d430b2851eef455e009f7.html">sync</a>
  </div>
</div>
<div class="contents">
<h1>SyncRoot.h File Reference</h1>
<p>Part of CCNx Sync.  
<a href="#_details">More...</a></p>

<p><a href="_sync_root_8h_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_sync_root_struct.html">SyncRootStruct</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A <a class="el" href="struct_sync_root_struct.html" title="A SyncRootStruct object holds the necessary data for a root sync tree.">SyncRootStruct</a> object holds the necessary data for a root sync tree.  <a href="struct_sync_root_struct.html#_details">More...</a><br/></td></tr>
<tr><td colspan="2"><h2>Enumerations</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_sync_root_8h.html#a0a5eaadf73d65b7f64d364cbcb2bee06">SyncRootLookupCode</a> { <a class="el" href="_sync_root_8h.html#a0a5eaadf73d65b7f64d364cbcb2bee06aae05075f0f725b9e3350582cea010cd8">SyncRootLookupCode_none</a>, 
<a class="el" href="_sync_root_8h.html#a0a5eaadf73d65b7f64d364cbcb2bee06a2cfb1cd9a212e7bc6f9839c7b35f0ca6">SyncRootLookupCode_covered</a>, 
<a class="el" href="_sync_root_8h.html#a0a5eaadf73d65b7f64d364cbcb2bee06a7950dba5d481171f37ddf0d3512dc637">SyncRootLookupCode_error</a>
 }</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="struct_sync_root_struct.html">SyncRootStruct</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_sync_root_8h.html#a18308ecffb5585c8bcbd63d20a7e85b5">SyncAddRoot</a> (struct <a class="el" href="struct_sync_base_struct.html">SyncBaseStruct</a> *base, int syncScope, const struct <a class="el" href="structccn__charbuf.html">ccn_charbuf</a> *topoPrefix, const struct <a class="el" href="structccn__charbuf.html">ccn_charbuf</a> *namingPrefix, struct <a class="el" href="struct_sync_name_accum.html">SyncNameAccum</a> *filter)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">namesToAdd has the names where content is known to be present.  <a href="#a18308ecffb5585c8bcbd63d20a7e85b5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="struct_sync_root_struct.html">SyncRootStruct</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_sync_root_8h.html#a7e320127c8aedab8b84d66a5816bf0ec">SyncRemRoot</a> (struct <a class="el" href="struct_sync_root_struct.html">SyncRootStruct</a> *root)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Removes the root from the base, and frees up associated storage.  <a href="#a7e320127c8aedab8b84d66a5816bf0ec"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="struct_sync_root_struct.html">SyncRootStruct</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_sync_root_8h.html#acd5e0ea632c51a5e079da5b8bcc25763">SyncRootDecodeAndAdd</a> (struct <a class="el" href="struct_sync_base_struct.html">SyncBaseStruct</a> *base, struct <a class="el" href="structccn__buf__decoder.html">ccn_buf_decoder</a> *d)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Parse a content object representing a config slice, and if successful add it to the base.  <a href="#acd5e0ea632c51a5e079da5b8bcc25763"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_sync_root_8h.html#a186493a3edabb31639a268e289b45bc5">SyncRootAppendSlice</a> (struct <a class="el" href="structccn__charbuf.html">ccn_charbuf</a> *cd, struct <a class="el" href="struct_sync_root_struct.html">SyncRootStruct</a> *root)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Appends the ccnb encoding for a config slice to the provided cb.  <a href="#a186493a3edabb31639a268e289b45bc5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="struct_sync_hash_cache_entry.html">SyncHashCacheEntry</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_sync_root_8h.html#aed2aaaf7ab32c22cf311c996f97e13b8">SyncRootTopEntry</a> (struct <a class="el" href="struct_sync_root_struct.html">SyncRootStruct</a> *root)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="_sync_root_8h.html#a0a5eaadf73d65b7f64d364cbcb2bee06">SyncRootLookupCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_sync_root_8h.html#a7d7a39b275db66878bc92d605e042f65">SyncRootLookupName</a> (struct <a class="el" href="struct_sync_root_struct.html">SyncRootStruct</a> *root, const struct <a class="el" href="structccn__charbuf.html">ccn_charbuf</a> *name)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Tests to see if the name is covered by this root.  <a href="#a7d7a39b275db66878bc92d605e042f65"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Part of CCNx Sync. </p>

<p>Definition in file <a class="el" href="_sync_root_8h_source.html">SyncRoot.h</a>.</p>
<hr/><h2>Enumeration Type Documentation</h2>
<a class="anchor" id="a0a5eaadf73d65b7f64d364cbcb2bee06"></a><!-- doxytag: member="SyncRoot.h::SyncRootLookupCode" ref="a0a5eaadf73d65b7f64d364cbcb2bee06" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="_sync_root_8h.html#a0a5eaadf73d65b7f64d364cbcb2bee06">SyncRootLookupCode</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="a0a5eaadf73d65b7f64d364cbcb2bee06aae05075f0f725b9e3350582cea010cd8"></a><!-- doxytag: member="SyncRootLookupCode_none" ref="a0a5eaadf73d65b7f64d364cbcb2bee06aae05075f0f725b9e3350582cea010cd8" args="" -->SyncRootLookupCode_none</em>&nbsp;</td><td>
<p>not covered by this root </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a0a5eaadf73d65b7f64d364cbcb2bee06a2cfb1cd9a212e7bc6f9839c7b35f0ca6"></a><!-- doxytag: member="SyncRootLookupCode_covered" ref="a0a5eaadf73d65b7f64d364cbcb2bee06a2cfb1cd9a212e7bc6f9839c7b35f0ca6" args="" -->SyncRootLookupCode_covered</em>&nbsp;</td><td>
<p>covered by this root </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a0a5eaadf73d65b7f64d364cbcb2bee06a7950dba5d481171f37ddf0d3512dc637"></a><!-- doxytag: member="SyncRootLookupCode_error" ref="a0a5eaadf73d65b7f64d364cbcb2bee06a7950dba5d481171f37ddf0d3512dc637" args="" -->SyncRootLookupCode_error</em>&nbsp;</td><td>
<p>error in the name or the state </p>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="_sync_root_8h_source.html#l00107">107</a> of file <a class="el" href="_sync_root_8h_source.html">SyncRoot.h</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a18308ecffb5585c8bcbd63d20a7e85b5"></a><!-- doxytag: member="SyncRoot.h::SyncAddRoot" ref="a18308ecffb5585c8bcbd63d20a7e85b5" args="(struct SyncBaseStruct *base, int syncScope, const struct ccn_charbuf *topoPrefix, const struct ccn_charbuf *namingPrefix, struct SyncNameAccum *filter)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="struct_sync_root_struct.html">SyncRootStruct</a>* SyncAddRoot </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="struct_sync_base_struct.html">SyncBaseStruct</a> *&nbsp;</td>
          <td class="paramname"> <em>base</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>syncScope</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structccn__charbuf.html">ccn_charbuf</a> *&nbsp;</td>
          <td class="paramname"> <em>topoPrefix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structccn__charbuf.html">ccn_charbuf</a> *&nbsp;</td>
          <td class="paramname"> <em>namingPrefix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="struct_sync_name_accum.html">SyncNameAccum</a> *&nbsp;</td>
          <td class="paramname"> <em>filter</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>namesToAdd has the names where content is known to be present. </p>
<p>These names should come from SyncNotifyContent. The name storage belongs to the root.</p>
<p>namesToFetch has the names where content should be fetched. Once content is fetched and stored to the repo the names should be appended to namesToAdd. The name storage belongs to the root. Creates a new root structure and adds it to the base. The syncScope will be used for sync control interests (-1 for unscoped). The topoPrefix and namingPrefix will be copied and canonicalized. The filter (and the names in it) will also be copied and canonicalized. Canonicalized data is owned by the base. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>the new root object </dd></dl>

<p>Definition at line <a class="el" href="_sync_root_8c_source.html#l00105">105</a> of file <a class="el" href="_sync_root_8c_source.html">SyncRoot.c</a>.</p>

<p>Referenced by <a class="el" href="sync__api_8c_source.html#l01155">ccns_open()</a>, <a class="el" href="_sync_test_8c_source.html#l00527">genTestRootRepos()</a>, <a class="el" href="_sync_test_8c_source.html#l00507">genTestRootRouting()</a>, <a class="el" href="_sync_root_8c_source.html#l00238">SyncRootDecodeAndAdd()</a>, and <a class="el" href="_sync_test_8c_source.html#l00390">testReadBuilder()</a>.</p>

</div>
</div>
<a class="anchor" id="a7e320127c8aedab8b84d66a5816bf0ec"></a><!-- doxytag: member="SyncRoot.h::SyncRemRoot" ref="a7e320127c8aedab8b84d66a5816bf0ec" args="(struct SyncRootStruct *root)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="struct_sync_root_struct.html">SyncRootStruct</a>* SyncRemRoot </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="struct_sync_root_struct.html">SyncRootStruct</a> *&nbsp;</td>
          <td class="paramname"> <em>root</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Removes the root from the base, and frees up associated storage. </p>
<p>Requires that there are no active comparisons. Deactivates all pending interests. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>NULL if the root was removed, the root itself if not removed. </dd></dl>

<p>Definition at line <a class="el" href="_sync_root_8c_source.html#l00172">172</a> of file <a class="el" href="_sync_root_8c_source.html">SyncRoot.c</a>.</p>

<p>Referenced by <a class="el" href="sync__api_8c_source.html#l01256">ccns_close()</a>, <a class="el" href="_sync_actions_8c_source.html#l02100">findAndDeleteRoot()</a>, <a class="el" href="_sync_test_8c_source.html#l01550">main()</a>, <a class="el" href="_sync_base_8c_source.html#l00237">SyncFreeBase()</a>, <a class="el" href="_sync_actions_8c_source.html#l02156">SyncHandleSlice()</a>, <a class="el" href="_sync_test_8c_source.html#l00623">testRootBasic()</a>, and <a class="el" href="_sync_test_8c_source.html#l00554">testRootCoding()</a>.</p>

</div>
</div>
<a class="anchor" id="a186493a3edabb31639a268e289b45bc5"></a><!-- doxytag: member="SyncRoot.h::SyncRootAppendSlice" ref="a186493a3edabb31639a268e289b45bc5" args="(struct ccn_charbuf *cd, struct SyncRootStruct *root)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int SyncRootAppendSlice </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structccn__charbuf.html">ccn_charbuf</a> *&nbsp;</td>
          <td class="paramname"> <em>cd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="struct_sync_root_struct.html">SyncRootStruct</a> *&nbsp;</td>
          <td class="paramname"> <em>root</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Appends the ccnb encoding for a config slice to the provided cb. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>-1 for failure, 0 for success. </dd></dl>

<p>Definition at line <a class="el" href="_sync_root_8c_source.html#l00294">294</a> of file <a class="el" href="_sync_root_8c_source.html">SyncRoot.c</a>.</p>

<p>Referenced by <a class="el" href="_sync_root_8c_source.html#l00105">SyncAddRoot()</a>, and <a class="el" href="_sync_test_8c_source.html#l00554">testRootCoding()</a>.</p>

</div>
</div>
<a class="anchor" id="acd5e0ea632c51a5e079da5b8bcc25763"></a><!-- doxytag: member="SyncRoot.h::SyncRootDecodeAndAdd" ref="acd5e0ea632c51a5e079da5b8bcc25763" args="(struct SyncBaseStruct *base, struct ccn_buf_decoder *d)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="struct_sync_root_struct.html">SyncRootStruct</a>* SyncRootDecodeAndAdd </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="struct_sync_base_struct.html">SyncBaseStruct</a> *&nbsp;</td>
          <td class="paramname"> <em>base</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structccn__buf__decoder.html">ccn_buf_decoder</a> *&nbsp;</td>
          <td class="paramname"> <em>d</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Parse a content object representing a config slice, and if successful add it to the base. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>the new root if successful, NULL otherwise. </dd></dl>

<p>Definition at line <a class="el" href="_sync_root_8c_source.html#l00238">238</a> of file <a class="el" href="_sync_root_8c_source.html">SyncRoot.c</a>.</p>

<p>Referenced by <a class="el" href="_sync_actions_8c_source.html#l02156">SyncHandleSlice()</a>, and <a class="el" href="_sync_test_8c_source.html#l00554">testRootCoding()</a>.</p>

</div>
</div>
<a class="anchor" id="a7d7a39b275db66878bc92d605e042f65"></a><!-- doxytag: member="SyncRoot.h::SyncRootLookupName" ref="a7d7a39b275db66878bc92d605e042f65" args="(struct SyncRootStruct *root, const struct ccn_charbuf *name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="_sync_root_8h.html#a0a5eaadf73d65b7f64d364cbcb2bee06">SyncRootLookupCode</a> SyncRootLookupName </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="struct_sync_root_struct.html">SyncRootStruct</a> *&nbsp;</td>
          <td class="paramname"> <em>root</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structccn__charbuf.html">ccn_charbuf</a> *&nbsp;</td>
          <td class="paramname"> <em>name</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Tests to see if the name is covered by this root. </p>
<p>Useful for testing full names given by the Repo. The topoPrefix does not participate, but the filter does. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>a code indicating the result </dd></dl>

<p>Definition at line <a class="el" href="_sync_root_8c_source.html#l00330">330</a> of file <a class="el" href="_sync_root_8c_source.html">SyncRoot.c</a>.</p>

<p>Referenced by <a class="el" href="_sync_util_8c_source.html#l01083">SyncAddName()</a>, and <a class="el" href="_sync_test_8c_source.html#l00601">testRootLookup()</a>.</p>

</div>
</div>
<a class="anchor" id="aed2aaaf7ab32c22cf311c996f97e13b8"></a><!-- doxytag: member="SyncRoot.h::SyncRootTopEntry" ref="aed2aaaf7ab32c22cf311c996f97e13b8" args="(struct SyncRootStruct *root)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="struct_sync_hash_cache_entry.html">SyncHashCacheEntry</a>* SyncRootTopEntry </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="struct_sync_root_struct.html">SyncRootStruct</a> *&nbsp;</td>
          <td class="paramname"> <em>root</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl class="return"><dt><b>Returns:</b></dt><dd>the top entry, if the root hash has been established for this root, otherwise returns NULL. </dd></dl>

<p>Definition at line <a class="el" href="_sync_root_8c_source.html#l00318">318</a> of file <a class="el" href="_sync_root_8c_source.html">SyncRoot.c</a>.</p>

<p>Referenced by <a class="el" href="_sync_test_8c_source.html#l00390">testReadBuilder()</a>, and <a class="el" href="_sync_actions_8c_source.html#l03406">UpdateAction()</a>.</p>

</div>
</div>
</div>
<hr class="footer"/><address style="text-align: right;"><small>Generated on Mon Feb 4 11:57:27 2013 for Content-Centric Networking in C by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
