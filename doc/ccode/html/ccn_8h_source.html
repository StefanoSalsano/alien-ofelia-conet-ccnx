<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Content-Centric Networking in C: include/ccn/ccn.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<script type="text/javascript">
<!--
function changeDisplayState (e){
  var num=this.id.replace(/[^[0-9]/g,'');
  var button=this.firstChild;
  var sectionDiv=document.getElementById('dynsection'+num);
  if (sectionDiv.style.display=='none'||sectionDiv.style.display==''){
    sectionDiv.style.display='block';
    button.src='open.gif';
  }else{
    sectionDiv.style.display='none';
    button.src='closed.gif';
  }
}
function initDynSections(){
  var divs=document.getElementsByTagName('div');
  var sectionCounter=1;
  for(var i=0;i<divs.length-1;i++){
    if(divs[i].className=='dynheader'&&divs[i+1].className=='dynsection'){
      var header=divs[i];
      var section=divs[i+1];
      var button=header.firstChild;
      if (button!='IMG'){
        divs[i].insertBefore(document.createTextNode(' '),divs[i].firstChild);
        button=document.createElement('img');
        divs[i].insertBefore(button,divs[i].firstChild);
      }
      header.style.cursor='pointer';
      header.onclick=changeDisplayState;
      header.id='dynheader'+sectionCounter;
      button.src='closed.gif';
      section.id='dynsection'+sectionCounter;
      section.style.display='none';
      section.style.marginLeft='14px';
      sectionCounter++;
    }
  }
}
window.onload = initDynSections;
-->
</script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="dir_41e250420098d3193238c2ec3f91d540.html">include</a>&nbsp;&raquo;&nbsp;<a class="el" href="dir_fb678123179ff8fa3164fd7f81a7d8bd.html">ccn</a>
  </div>
</div>
<div class="contents">
<h1>ccn.h</h1><a href="ccn_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/**</span>
<a name="l00002"></a>00002 <span class="comment"> * @file ccn/ccn.h</span>
<a name="l00003"></a>00003 <span class="comment"> *</span>
<a name="l00004"></a>00004 <span class="comment"> * This is the low-level interface for CCNx clients.</span>
<a name="l00005"></a>00005 <span class="comment"> *</span>
<a name="l00006"></a>00006 <span class="comment"> * Part of the CCNx C Library.</span>
<a name="l00007"></a>00007 <span class="comment"> *</span>
<a name="l00008"></a>00008 <span class="comment"> * Copyright (C) 2008-2013 Palo Alto Research Center, Inc.</span>
<a name="l00009"></a>00009 <span class="comment"> *</span>
<a name="l00010"></a>00010 <span class="comment"> * This library is free software; you can redistribute it and/or modify it</span>
<a name="l00011"></a>00011 <span class="comment"> * under the terms of the GNU Lesser General Public License version 2.1</span>
<a name="l00012"></a>00012 <span class="comment"> * as published by the Free Software Foundation.</span>
<a name="l00013"></a>00013 <span class="comment"> * This library is distributed in the hope that it will be useful,</span>
<a name="l00014"></a>00014 <span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00015"></a>00015 <span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU</span>
<a name="l00016"></a>00016 <span class="comment"> * Lesser General Public License for more details. You should have received</span>
<a name="l00017"></a>00017 <span class="comment"> * a copy of the GNU Lesser General Public License along with this library;</span>
<a name="l00018"></a>00018 <span class="comment"> * if not, write to the Free Software Foundation, Inc., 51 Franklin Street,</span>
<a name="l00019"></a>00019 <span class="comment"> * Fifth Floor, Boston, MA 02110-1301 USA.</span>
<a name="l00020"></a>00020 <span class="comment"> */</span>
<a name="l00021"></a>00021 
<a name="l00022"></a>00022 <span class="preprocessor">#ifndef CCN_CCN_DEFINED</span>
<a name="l00023"></a>00023 <span class="preprocessor"></span><span class="preprocessor">#define CCN_CCN_DEFINED</span>
<a name="l00024"></a>00024 <span class="preprocessor"></span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &lt;stdint.h&gt;</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &lt;<a class="code" href="coding_8h.html" title="Details of the ccn binary wire encoding.">ccn/coding.h</a>&gt;</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &lt;<a class="code" href="charbuf_8h.html" title="Expandable character buffer for counted sequences of arbitrary octets.">ccn/charbuf.h</a>&gt;</span>
<a name="l00028"></a>00028 <span class="preprocessor">#include &lt;<a class="code" href="indexbuf_8h.html" title="Expandable buffer of non-negative values.">ccn/indexbuf.h</a>&gt;</span>
<a name="l00029"></a>00029 <span class="comment"></span>
<a name="l00030"></a>00030 <span class="comment">/**</span>
<a name="l00031"></a>00031 <span class="comment"> * A macro that clients may use to cope with an evolving API.</span>
<a name="l00032"></a>00032 <span class="comment"> *</span>
<a name="l00033"></a>00033 <span class="comment"> * The decimal digits of this use the pattern MMVVXXX, where MM is the</span>
<a name="l00034"></a>00034 <span class="comment"> * major release number and VV is the minor version level.</span>
<a name="l00035"></a>00035 <span class="comment"> * XXX will be bumped when an API change is made, but it will not be</span>
<a name="l00036"></a>00036 <span class="comment"> * directly tied to the patch level in a release number.</span>
<a name="l00037"></a>00037 <span class="comment"> * Thus CCN_API_VERSION=1000 would have corresponded to the first public</span>
<a name="l00038"></a>00038 <span class="comment"> * release (0.1.0), but that version did not have this macro defined.</span>
<a name="l00039"></a>00039 <span class="comment"> */</span>
<a name="l00040"></a><a class="code" href="ccn_8h.html#a379c16fc218a0cfc3202a085eb1ef2db">00040</a> <span class="preprocessor">#define CCN_API_VERSION 7001</span>
<a name="l00041"></a>00041 <span class="preprocessor"></span><span class="comment"></span>
<a name="l00042"></a>00042 <span class="comment">/**</span>
<a name="l00043"></a>00043 <span class="comment"> * Interest lifetime default.</span>
<a name="l00044"></a>00044 <span class="comment"> *</span>
<a name="l00045"></a>00045 <span class="comment"> * If the interest lifetime is not explicit, this is the default value.</span>
<a name="l00046"></a>00046 <span class="comment"> */</span>
<a name="l00047"></a><a class="code" href="ccn_8h.html#a0e7c867a8e1f31b941157994a6242452">00047</a> <span class="preprocessor">#define CCN_INTEREST_LIFETIME_SEC 4</span>
<a name="l00048"></a><a class="code" href="ccn_8h.html#a33cae88a5004e98afb9d8c4d8ea79ad4">00048</a> <span class="preprocessor"></span><span class="preprocessor">#define CCN_INTEREST_LIFETIME_MICROSEC (CCN_INTEREST_LIFETIME_SEC * 1000000)</span>
<a name="l00049"></a>00049 <span class="preprocessor"></span>
<a name="l00050"></a>00050 <span class="comment">/* opaque declarations */</span>
<a name="l00051"></a>00051 <span class="keyword">struct </span>ccn;
<a name="l00052"></a>00052 <span class="keyword">struct </span>ccn_pkey;
<a name="l00053"></a>00053 
<a name="l00054"></a>00054 <span class="comment">/* forward declarations */</span>
<a name="l00055"></a>00055 <span class="keyword">struct </span><a class="code" href="structccn__closure.html" title="Handle for upcalls that allow clients receive notifications of incoming interests...">ccn_closure</a>;
<a name="l00056"></a>00056 <span class="keyword">struct </span><a class="code" href="structccn__upcall__info.html" title="Additional information provided in the upcall.">ccn_upcall_info</a>;
<a name="l00057"></a>00057 <span class="keyword">struct </span><a class="code" href="structccn__parsed__interest.html">ccn_parsed_interest</a>;
<a name="l00058"></a>00058 <span class="keyword">struct </span><a class="code" href="structccn__parsed___content_object.html">ccn_parsed_ContentObject</a>;
<a name="l00059"></a>00059 <span class="keyword">struct </span><a class="code" href="structccn__parsed___link.html">ccn_parsed_Link</a>;
<a name="l00060"></a>00060 
<a name="l00061"></a>00061 <span class="comment">/*</span>
<a name="l00062"></a>00062 <span class="comment"> * Types for implementing upcalls</span>
<a name="l00063"></a>00063 <span class="comment"> * To receive notifications of incoming interests and content, the</span>
<a name="l00064"></a>00064 <span class="comment"> * client creates closures (using client-managed memory).</span>
<a name="l00065"></a>00065 <span class="comment"> */</span>
<a name="l00066"></a>00066 <span class="comment"></span>
<a name="l00067"></a>00067 <span class="comment">/**</span>
<a name="l00068"></a>00068 <span class="comment"> * This tells what kind of event the upcall is handling.</span>
<a name="l00069"></a>00069 <span class="comment"> *</span>
<a name="l00070"></a>00070 <span class="comment"> * The KEYMISSING and RAW codes are used only if deferred verification has been</span>
<a name="l00071"></a>00071 <span class="comment"> * requested.</span>
<a name="l00072"></a>00072 <span class="comment"> */</span>
<a name="l00073"></a><a class="code" href="ccn_8h.html#a5fcebad21626ea80c67775c092011c92">00073</a> <span class="keyword">enum</span> <a class="code" href="ccn_8h.html#a5fcebad21626ea80c67775c092011c92" title="This tells what kind of event the upcall is handling.">ccn_upcall_kind</a> {
<a name="l00074"></a><a class="code" href="ccn_8h.html#a5fcebad21626ea80c67775c092011c92ad00afdf8a89c718f4c451600b115b5e0">00074</a>     <a class="code" href="ccn_8h.html#a5fcebad21626ea80c67775c092011c92ad00afdf8a89c718f4c451600b115b5e0" title="handler is about to be deregistered">CCN_UPCALL_FINAL</a>,             <span class="comment">/**&lt; handler is about to be deregistered */</span>
<a name="l00075"></a><a class="code" href="ccn_8h.html#a5fcebad21626ea80c67775c092011c92a10dc20968eaf28989921d076bbc81d62">00075</a>     <a class="code" href="ccn_8h.html#a5fcebad21626ea80c67775c092011c92a10dc20968eaf28989921d076bbc81d62" title="incoming interest">CCN_UPCALL_INTEREST</a>,          <span class="comment">/**&lt; incoming interest */</span>
<a name="l00076"></a><a class="code" href="ccn_8h.html#a5fcebad21626ea80c67775c092011c92a01b7a7469d45ecef00337246a3a24d59">00076</a>     <a class="code" href="ccn_8h.html#a5fcebad21626ea80c67775c092011c92a01b7a7469d45ecef00337246a3a24d59" title="incoming interest, someone has answered">CCN_UPCALL_CONSUMED_INTEREST</a>, <span class="comment">/**&lt; incoming interest, someone has answered */</span>
<a name="l00077"></a><a class="code" href="ccn_8h.html#a5fcebad21626ea80c67775c092011c92a28260b0a25b7046e6930f0b13a718db0">00077</a>     <a class="code" href="ccn_8h.html#a5fcebad21626ea80c67775c092011c92a28260b0a25b7046e6930f0b13a718db0" title="incoming verified content">CCN_UPCALL_CONTENT</a>,           <span class="comment">/**&lt; incoming verified content */</span>
<a name="l00078"></a><a class="code" href="ccn_8h.html#a5fcebad21626ea80c67775c092011c92a3c7ef9861eb5ba1529b4d05630e83c88">00078</a>     <a class="code" href="ccn_8h.html#a5fcebad21626ea80c67775c092011c92a3c7ef9861eb5ba1529b4d05630e83c88" title="interest timed out">CCN_UPCALL_INTEREST_TIMED_OUT</a>,<span class="comment">/**&lt; interest timed out */</span>
<a name="l00079"></a><a class="code" href="ccn_8h.html#a5fcebad21626ea80c67775c092011c92a8db121649c55820013bfaaf65e436f5c">00079</a>     <a class="code" href="ccn_8h.html#a5fcebad21626ea80c67775c092011c92a8db121649c55820013bfaaf65e436f5c" title="content that has not been verified">CCN_UPCALL_CONTENT_UNVERIFIED</a>,<span class="comment">/**&lt; content that has not been verified */</span>
<a name="l00080"></a><a class="code" href="ccn_8h.html#a5fcebad21626ea80c67775c092011c92a34811cc6f61494c1f41253f950fcdda8">00080</a>     <a class="code" href="ccn_8h.html#a5fcebad21626ea80c67775c092011c92a34811cc6f61494c1f41253f950fcdda8" title="verification failed">CCN_UPCALL_CONTENT_BAD</a>,       <span class="comment">/**&lt; verification failed */</span>
<a name="l00081"></a><a class="code" href="ccn_8h.html#a5fcebad21626ea80c67775c092011c92a1b0d17f15edd2e43d9a026d19498ab7c">00081</a>     <a class="code" href="ccn_8h.html#a5fcebad21626ea80c67775c092011c92a1b0d17f15edd2e43d9a026d19498ab7c" title="key has not been fetched">CCN_UPCALL_CONTENT_KEYMISSING</a>,<span class="comment">/**&lt; key has not been fetched */</span>
<a name="l00082"></a><a class="code" href="ccn_8h.html#a5fcebad21626ea80c67775c092011c92aa96e60c7c64a5a65145b918cf6fcb4b4">00082</a>     <a class="code" href="ccn_8h.html#a5fcebad21626ea80c67775c092011c92aa96e60c7c64a5a65145b918cf6fcb4b4" title="verification has not been attempted">CCN_UPCALL_CONTENT_RAW</a>        <span class="comment">/**&lt; verification has not been attempted */</span>
<a name="l00083"></a>00083 };
<a name="l00084"></a>00084 <span class="comment"></span>
<a name="l00085"></a>00085 <span class="comment">/**</span>
<a name="l00086"></a>00086 <span class="comment"> * Upcalls return one of these values.</span>
<a name="l00087"></a>00087 <span class="comment"> */</span>
<a name="l00088"></a><a class="code" href="ccn_8h.html#ac4cc3fdb432fd23cdc0c5642276b0ddc">00088</a> <span class="keyword">enum</span> <a class="code" href="ccn_8h.html#ac4cc3fdb432fd23cdc0c5642276b0ddc" title="Upcalls return one of these values.">ccn_upcall_res</a> {
<a name="l00089"></a><a class="code" href="ccn_8h.html#ac4cc3fdb432fd23cdc0c5642276b0ddca66af9fd66092212c05d898ca20d3c6f2">00089</a>     <a class="code" href="ccn_8h.html#ac4cc3fdb432fd23cdc0c5642276b0ddca66af9fd66092212c05d898ca20d3c6f2" title="upcall detected an error">CCN_UPCALL_RESULT_ERR</a> = -1, <span class="comment">/**&lt; upcall detected an error */</span>
<a name="l00090"></a><a class="code" href="ccn_8h.html#ac4cc3fdb432fd23cdc0c5642276b0ddcadadb47635316f12c6542c33cebcfa727">00090</a>     <a class="code" href="ccn_8h.html#ac4cc3fdb432fd23cdc0c5642276b0ddcadadb47635316f12c6542c33cebcfa727" title="normal upcall return">CCN_UPCALL_RESULT_OK</a> = 0,   <span class="comment">/**&lt; normal upcall return */</span>
<a name="l00091"></a><a class="code" href="ccn_8h.html#ac4cc3fdb432fd23cdc0c5642276b0ddca686785df48ac222ef31beea39eebd404">00091</a>     <a class="code" href="ccn_8h.html#ac4cc3fdb432fd23cdc0c5642276b0ddca686785df48ac222ef31beea39eebd404" title="reexpress the same interest again">CCN_UPCALL_RESULT_REEXPRESS</a> = 1, <span class="comment">/**&lt; reexpress the same interest again */</span>
<a name="l00092"></a><a class="code" href="ccn_8h.html#ac4cc3fdb432fd23cdc0c5642276b0ddca35e0232348739cde04ba6355c4395001">00092</a>     <a class="code" href="ccn_8h.html#ac4cc3fdb432fd23cdc0c5642276b0ddca35e0232348739cde04ba6355c4395001" title="upcall claims to consume interest">CCN_UPCALL_RESULT_INTEREST_CONSUMED</a> = 2,<span class="comment">/**&lt; upcall claims to consume interest */</span>
<a name="l00093"></a><a class="code" href="ccn_8h.html#ac4cc3fdb432fd23cdc0c5642276b0ddcaacded567eed5b8559bd0e6b30ab241ce">00093</a>     <a class="code" href="ccn_8h.html#ac4cc3fdb432fd23cdc0c5642276b0ddcaacded567eed5b8559bd0e6b30ab241ce" title="force an unverified result to be verified">CCN_UPCALL_RESULT_VERIFY</a> = 3, <span class="comment">/**&lt; force an unverified result to be verified */</span>
<a name="l00094"></a><a class="code" href="ccn_8h.html#ac4cc3fdb432fd23cdc0c5642276b0ddcacd6ea884bd093194e63bb68acbb784d1">00094</a>     <a class="code" href="ccn_8h.html#ac4cc3fdb432fd23cdc0c5642276b0ddcacd6ea884bd093194e63bb68acbb784d1" title="request fetching of an unfetched key">CCN_UPCALL_RESULT_FETCHKEY</a> = 4 <span class="comment">/**&lt; request fetching of an unfetched key */</span>
<a name="l00095"></a>00095 };
<a name="l00096"></a>00096 <span class="comment"></span>
<a name="l00097"></a>00097 <span class="comment">/**</span>
<a name="l00098"></a>00098 <span class="comment"> * @type ccn_handler</span>
<a name="l00099"></a>00099 <span class="comment"> * This is the procedure type for the closure&#39;s implementation.</span>
<a name="l00100"></a>00100 <span class="comment"> */</span>
<a name="l00101"></a><a class="code" href="ccn_8h.html#a9570a786d534c3eb0343de466857f11f">00101</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> <a class="code" href="ccn_8h.html#ac4cc3fdb432fd23cdc0c5642276b0ddc" title="Upcalls return one of these values.">ccn_upcall_res</a> (*<a class="code" href="ccn_8h.html#a9570a786d534c3eb0343de466857f11f" title="ccn_handler This is the procedure type for the closure&amp;#39;s implementation.">ccn_handler</a>)(
<a name="l00102"></a>00102     <span class="keyword">struct </span><a class="code" href="structccn__closure.html" title="Handle for upcalls that allow clients receive notifications of incoming interests...">ccn_closure</a> *selfp,
<a name="l00103"></a>00103     <span class="keyword">enum</span> <a class="code" href="ccn_8h.html#a5fcebad21626ea80c67775c092011c92" title="This tells what kind of event the upcall is handling.">ccn_upcall_kind</a> kind,
<a name="l00104"></a>00104     <span class="keyword">struct </span><a class="code" href="structccn__upcall__info.html" title="Additional information provided in the upcall.">ccn_upcall_info</a> *info  <span class="comment">/**&lt; details about the event */</span>
<a name="l00105"></a>00105 );
<a name="l00106"></a>00106 <span class="comment"></span>
<a name="l00107"></a>00107 <span class="comment">/**</span>
<a name="l00108"></a>00108 <span class="comment"> * Handle for upcalls that allow clients receive notifications of</span>
<a name="l00109"></a>00109 <span class="comment"> * incoming interests and content.</span>
<a name="l00110"></a>00110 <span class="comment"> *</span>
<a name="l00111"></a>00111 <span class="comment"> * The client is responsible for managing this piece of memory and the</span>
<a name="l00112"></a>00112 <span class="comment"> * data therein. The refcount should be initially zero, and is used by the</span>
<a name="l00113"></a>00113 <span class="comment"> * library to keep to track of multiple registrations of the same closure.</span>
<a name="l00114"></a>00114 <span class="comment"> * When the count drops back to 0, the closure will be called with</span>
<a name="l00115"></a>00115 <span class="comment"> * kind = CCN_UPCALL_FINAL so that it has an opportunity to clean up.</span>
<a name="l00116"></a>00116 <span class="comment"> */</span>
<a name="l00117"></a><a class="code" href="structccn__closure.html">00117</a> <span class="keyword">struct </span><a class="code" href="structccn__closure.html" title="Handle for upcalls that allow clients receive notifications of incoming interests...">ccn_closure</a> {
<a name="l00118"></a><a class="code" href="structccn__closure.html#a48dca74271023e0caf287ad31dd1e66c">00118</a>     <a class="code" href="ccn_8h.html#a9570a786d534c3eb0343de466857f11f" title="ccn_handler This is the procedure type for the closure&amp;#39;s implementation.">ccn_handler</a> <a class="code" href="structccn__closure.html#a48dca74271023e0caf287ad31dd1e66c" title="client-supplied handler">p</a>;      <span class="comment">/**&lt; client-supplied handler */</span>
<a name="l00119"></a><a class="code" href="structccn__closure.html#a7173ea9b9dde3c4bbded120b90ae788c">00119</a>     <span class="keywordtype">void</span> *<a class="code" href="structccn__closure.html#a7173ea9b9dde3c4bbded120b90ae788c" title="for client use">data</a>;         <span class="comment">/**&lt; for client use */</span>
<a name="l00120"></a><a class="code" href="structccn__closure.html#a25a1e0591079ef386d0708a81f14b711">00120</a>     intptr_t <a class="code" href="structccn__closure.html#a25a1e0591079ef386d0708a81f14b711" title="for client use">intdata</a>;   <span class="comment">/**&lt; for client use */</span>
<a name="l00121"></a><a class="code" href="structccn__closure.html#a3b474a523e9ff2b33d5ee0c03aad76aa">00121</a>     <span class="keywordtype">int</span> <a class="code" href="structccn__closure.html#a3b474a523e9ff2b33d5ee0c03aad76aa" title="client should not update this directly">refcount</a>;       <span class="comment">/**&lt; client should not update this directly */</span>
<a name="l00122"></a>00122 };
<a name="l00123"></a>00123 <span class="comment"></span>
<a name="l00124"></a>00124 <span class="comment">/**</span>
<a name="l00125"></a>00125 <span class="comment"> * Additional information provided in the upcall.</span>
<a name="l00126"></a>00126 <span class="comment"> *</span>
<a name="l00127"></a>00127 <span class="comment"> * The client is responsible for managing this piece of memory and the</span>
<a name="l00128"></a>00128 <span class="comment"> * data therein. The refcount should be initially zero, and is used by the</span>
<a name="l00129"></a>00129 <span class="comment"> * library to keep to track of multiple registrations of the same closure.</span>
<a name="l00130"></a>00130 <span class="comment"> * When the count drops back to 0, the closure will be called with</span>
<a name="l00131"></a>00131 <span class="comment"> * kind = CCN_UPCALL_FINAL so that it has an opportunity to clean up.</span>
<a name="l00132"></a>00132 <span class="comment"> */</span>
<a name="l00133"></a><a class="code" href="structccn__upcall__info.html">00133</a> <span class="keyword">struct </span><a class="code" href="structccn__upcall__info.html" title="Additional information provided in the upcall.">ccn_upcall_info</a> {
<a name="l00134"></a><a class="code" href="structccn__upcall__info.html#abdc317226974c6e28e21f46ce5348708">00134</a>     <span class="keyword">struct </span>ccn *<a class="code" href="structccn__upcall__info.html#abdc317226974c6e28e21f46ce5348708" title="The ccn library handle.">h</a>;              <span class="comment">/**&lt; The ccn library handle */</span>
<a name="l00135"></a>00135     <span class="comment">/* Interest (incoming or matched) */</span>
<a name="l00136"></a><a class="code" href="structccn__upcall__info.html#ac8c5f48f32ed349e401f697e1e72b43c">00136</a>     <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *<a class="code" href="structccn__upcall__info.html#ac8c5f48f32ed349e401f697e1e72b43c">interest_ccnb</a>;
<a name="l00137"></a><a class="code" href="structccn__upcall__info.html#a1a8d0a58199c0624d003962d298982d5">00137</a>     <span class="keyword">struct </span><a class="code" href="structccn__parsed__interest.html">ccn_parsed_interest</a> *<a class="code" href="structccn__upcall__info.html#a1a8d0a58199c0624d003962d298982d5">pi</a>;
<a name="l00138"></a><a class="code" href="structccn__upcall__info.html#a685d7846f37c9dea4dcda981f0267906">00138</a>     <span class="keyword">struct </span><a class="code" href="structccn__indexbuf.html">ccn_indexbuf</a> *<a class="code" href="structccn__upcall__info.html#a685d7846f37c9dea4dcda981f0267906">interest_comps</a>;
<a name="l00139"></a><a class="code" href="structccn__upcall__info.html#a03ad6fed84681d245643cbe9019db015">00139</a>     <span class="keywordtype">int</span> <a class="code" href="structccn__upcall__info.html#a03ad6fed84681d245643cbe9019db015">matched_comps</a>;
<a name="l00140"></a>00140     <span class="comment">/* Incoming content for CCN_UPCALL_CONTENT* - otherwise NULL */</span>
<a name="l00141"></a><a class="code" href="structccn__upcall__info.html#a226aa6acbc2fe85ee7d400b52ef3664a">00141</a>     <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *<a class="code" href="structccn__upcall__info.html#a226aa6acbc2fe85ee7d400b52ef3664a">content_ccnb</a>;
<a name="l00142"></a><a class="code" href="structccn__upcall__info.html#a5483525206dfb80f831040d0d9602906">00142</a>     <span class="keyword">struct </span><a class="code" href="structccn__parsed___content_object.html">ccn_parsed_ContentObject</a> *<a class="code" href="structccn__upcall__info.html#a5483525206dfb80f831040d0d9602906">pco</a>;
<a name="l00143"></a><a class="code" href="structccn__upcall__info.html#a4cb4214256b27c8512dc5f9de87aa400">00143</a>     <span class="keyword">struct </span><a class="code" href="structccn__indexbuf.html">ccn_indexbuf</a> *<a class="code" href="structccn__upcall__info.html#a4cb4214256b27c8512dc5f9de87aa400">content_comps</a>;
<a name="l00144"></a>00144 };
<a name="l00145"></a>00145 
<a name="l00146"></a>00146 <span class="comment">/*</span>
<a name="l00147"></a>00147 <span class="comment"> * ccn_create: create a client handle</span>
<a name="l00148"></a>00148 <span class="comment"> * Creates and initializes a client handle, not yet connected.</span>
<a name="l00149"></a>00149 <span class="comment"> * On error, returns NULL and sets errno.</span>
<a name="l00150"></a>00150 <span class="comment"> * Errors: ENOMEM</span>
<a name="l00151"></a>00151 <span class="comment"> */</span> 
<a name="l00152"></a>00152 <span class="keyword">struct </span>ccn *<a class="code" href="ccn_8h.html#aabd4b8732f28cfec43435b455a6eec7e" title="Create a client handle.">ccn_create</a>(<span class="keywordtype">void</span>);
<a name="l00153"></a>00153 
<a name="l00154"></a>00154 <span class="comment">/*</span>
<a name="l00155"></a>00155 <span class="comment"> * ccn_connect: connect to local ccnd</span>
<a name="l00156"></a>00156 <span class="comment"> * Use NULL for name to get the default.</span>
<a name="l00157"></a>00157 <span class="comment"> * Normal return value is the fd for the connection.</span>
<a name="l00158"></a>00158 <span class="comment"> * On error, returns -1.</span>
<a name="l00159"></a>00159 <span class="comment"> */</span> 
<a name="l00160"></a>00160 <span class="keywordtype">int</span> <a class="code" href="ccn_8h.html#a0819949d7e37dc90360b46b861dc409b" title="Connect to local ccnd.">ccn_connect</a>(<span class="keyword">struct</span> ccn *h, <span class="keyword">const</span> <span class="keywordtype">char</span> *name);
<a name="l00161"></a>00161 
<a name="l00162"></a>00162 <span class="comment">/*</span>
<a name="l00163"></a>00163 <span class="comment"> * ccn_get_connection_fd: get connection socket fd</span>
<a name="l00164"></a>00164 <span class="comment"> * This is in case the client needs to know the associated</span>
<a name="l00165"></a>00165 <span class="comment"> * file descriptor, e.g. for use in select/poll.</span>
<a name="l00166"></a>00166 <span class="comment"> * The client should not use this fd for actual I/O.</span>
<a name="l00167"></a>00167 <span class="comment"> * Normal return value is the fd for the connection.</span>
<a name="l00168"></a>00168 <span class="comment"> * Returns -1 if the handle is not connected.</span>
<a name="l00169"></a>00169 <span class="comment"> */</span> 
<a name="l00170"></a>00170 <span class="keywordtype">int</span> <a class="code" href="ccn_8h.html#a932df0f9c232ae47f06cd1db35ac1472">ccn_get_connection_fd</a>(<span class="keyword">struct</span> ccn *h);
<a name="l00171"></a>00171 
<a name="l00172"></a>00172 <span class="comment">/*</span>
<a name="l00173"></a>00173 <span class="comment"> * ccn_disconnect: disconnect from local ccnd</span>
<a name="l00174"></a>00174 <span class="comment"> * This breaks the connection and discards buffered I/O,</span>
<a name="l00175"></a>00175 <span class="comment"> * but leaves other state intact.  Interests that are pending at disconnect</span>
<a name="l00176"></a>00176 <span class="comment"> * will be reported as timed out, and interest filters active at disconnect</span>
<a name="l00177"></a>00177 <span class="comment"> * will be re-registered if a subsequent ccn_connect on the handle succeeds.</span>
<a name="l00178"></a>00178 <span class="comment"> */</span> 
<a name="l00179"></a>00179 <span class="keywordtype">int</span> <a class="code" href="ccn_8h.html#a0bbd9a8ad8414a8f7f955cca679f4d9c">ccn_disconnect</a>(<span class="keyword">struct</span> ccn *h);
<a name="l00180"></a>00180 
<a name="l00181"></a>00181 <span class="comment">/*</span>
<a name="l00182"></a>00182 <span class="comment"> * ccn_destroy: destroy handle</span>
<a name="l00183"></a>00183 <span class="comment"> * Releases all resources associated with *hp and sets it to NULL.</span>
<a name="l00184"></a>00184 <span class="comment"> */</span> 
<a name="l00185"></a>00185 <span class="keywordtype">void</span> <a class="code" href="ccn_8h.html#adac19e5f8dd6cf3ecd73b85f77f161ae">ccn_destroy</a>(<span class="keyword">struct</span> ccn **hp);
<a name="l00186"></a>00186 
<a name="l00187"></a>00187 <span class="comment">/* Control where verification happens */</span>
<a name="l00188"></a>00188 <span class="keywordtype">int</span> <a class="code" href="ccn_8h.html#ad58027d2b1d7d540dd0b0e3da65d261d" title="Tell the library to defer verification.">ccn_defer_verification</a>(<span class="keyword">struct</span> ccn *h, <span class="keywordtype">int</span> defer);
<a name="l00189"></a>00189 
<a name="l00190"></a>00190 <span class="comment">/***********************************</span>
<a name="l00191"></a>00191 <span class="comment"> * Writing Names</span>
<a name="l00192"></a>00192 <span class="comment"> * Names for interests are constructed in charbufs using </span>
<a name="l00193"></a>00193 <span class="comment"> * the following routines.</span>
<a name="l00194"></a>00194 <span class="comment"> */</span>
<a name="l00195"></a>00195 
<a name="l00196"></a>00196 <span class="comment">/*</span>
<a name="l00197"></a>00197 <span class="comment"> * ccn_name_init: reset charbuf to represent an empty Name in binary format</span>
<a name="l00198"></a>00198 <span class="comment"> * Return value is 0, or -1 for error.</span>
<a name="l00199"></a>00199 <span class="comment"> */</span>
<a name="l00200"></a>00200 <span class="keywordtype">int</span> <a class="code" href="ccn_8h.html#a4aa75ce6fc675e7a4c4c6d65e68817bd" title="Reset charbuf to represent an empty Name in binary format.">ccn_name_init</a>(<span class="keyword">struct</span> <a class="code" href="structccn__charbuf.html">ccn_charbuf</a> *c);
<a name="l00201"></a>00201 
<a name="l00202"></a>00202 <span class="comment">/*</span>
<a name="l00203"></a>00203 <span class="comment"> * ccn_name_append: add a Component to a Name</span>
<a name="l00204"></a>00204 <span class="comment"> * The component is an arbitrary string of n octets, no escaping required.</span>
<a name="l00205"></a>00205 <span class="comment"> * Return value is 0, or -1 for error.</span>
<a name="l00206"></a>00206 <span class="comment"> */</span>
<a name="l00207"></a>00207 <span class="keywordtype">int</span> <a class="code" href="ccn_8h.html#a3f4f614f38ae77dccb4099e982c646f8" title="Add a Component to a Name.">ccn_name_append</a>(<span class="keyword">struct</span> <a class="code" href="structccn__charbuf.html">ccn_charbuf</a> *c, <span class="keyword">const</span> <span class="keywordtype">void</span> *component, <span class="keywordtype">size_t</span> n);
<a name="l00208"></a>00208 
<a name="l00209"></a>00209 <span class="comment">/*</span>
<a name="l00210"></a>00210 <span class="comment"> * ccn_name_append_str: add a Component that is a \0 terminated string.</span>
<a name="l00211"></a>00211 <span class="comment"> * The component added is the bytes of the string without the \0.</span>
<a name="l00212"></a>00212 <span class="comment"> * This function is convenient for those applications that construct </span>
<a name="l00213"></a>00213 <span class="comment"> * component names from simple strings.</span>
<a name="l00214"></a>00214 <span class="comment"> * Return value is 0, or -1 for error</span>
<a name="l00215"></a>00215 <span class="comment"> */</span>
<a name="l00216"></a>00216 <span class="keywordtype">int</span> <a class="code" href="ccn_8h.html#aec5620dc4689a663ea7181cdebeda4d0" title="Add a Component that is a NUL-terminated string.">ccn_name_append_str</a>(<span class="keyword">struct</span> <a class="code" href="structccn__charbuf.html">ccn_charbuf</a> *c, <span class="keyword">const</span> <span class="keywordtype">char</span> *s);
<a name="l00217"></a>00217 
<a name="l00218"></a>00218 <span class="comment">/*</span>
<a name="l00219"></a>00219 <span class="comment"> * ccn_name_append_components: add sequence of ccnb-encoded Components</span>
<a name="l00220"></a>00220 <span class="comment"> *    to a ccnb-encoded Name</span>
<a name="l00221"></a>00221 <span class="comment"> * start and stop are offsets from ccnb</span>
<a name="l00222"></a>00222 <span class="comment"> * Return value is 0, or -1 for obvious error</span>
<a name="l00223"></a>00223 <span class="comment"> */</span>
<a name="l00224"></a>00224 <span class="keywordtype">int</span> <a class="code" href="ccn_8h.html#a8ea2cc78c18c1aa99f12f44bd70bc7a1" title="Add sequence of ccnb-encoded Components to a ccnb-encoded Name.">ccn_name_append_components</a>(<span class="keyword">struct</span> <a class="code" href="structccn__charbuf.html">ccn_charbuf</a> *c,
<a name="l00225"></a>00225                                <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *ccnb,
<a name="l00226"></a>00226                                <span class="keywordtype">size_t</span> start, <span class="keywordtype">size_t</span> stop);
<a name="l00227"></a>00227 
<a name="l00228"></a><a class="code" href="ccn_8h.html#afec910e39c89dcf24a44f93e97032399">00228</a> <span class="keyword">enum</span> <a class="code" href="ccn_8h.html#afec910e39c89dcf24a44f93e97032399">ccn_marker</a> {
<a name="l00229"></a><a class="code" href="ccn_8h.html#afec910e39c89dcf24a44f93e97032399a36371d18c0c5a44e25c6863d74ca842a">00229</a>     <a class="code" href="ccn_8h.html#afec910e39c89dcf24a44f93e97032399a36371d18c0c5a44e25c6863d74ca842a">CCN_MARKER_NONE</a> = -1,
<a name="l00230"></a><a class="code" href="ccn_8h.html#afec910e39c89dcf24a44f93e97032399af3eb8e7fa3a938a5bcc6c1f141357d71">00230</a>     <a class="code" href="ccn_8h.html#afec910e39c89dcf24a44f93e97032399af3eb8e7fa3a938a5bcc6c1f141357d71" title="consecutive block sequence numbers">CCN_MARKER_SEQNUM</a>  = 0x00, <span class="comment">/**&lt; consecutive block sequence numbers */</span>
<a name="l00231"></a><a class="code" href="ccn_8h.html#afec910e39c89dcf24a44f93e97032399a9626cdc2d5d10ce37fb26d9084aaec32">00231</a>     <a class="code" href="ccn_8h.html#afec910e39c89dcf24a44f93e97032399a9626cdc2d5d10ce37fb26d9084aaec32" title="commands, etc.">CCN_MARKER_CONTROL</a> = 0xC1, <span class="comment">/**&lt; commands, etc. */</span> 
<a name="l00232"></a><a class="code" href="ccn_8h.html#afec910e39c89dcf24a44f93e97032399ad746cd6b15d7c91b1e54618065122aad">00232</a>     <a class="code" href="ccn_8h.html#afec910e39c89dcf24a44f93e97032399ad746cd6b15d7c91b1e54618065122aad" title="deprecated">CCN_MARKER_OSEQNUM</a> = 0xF8, <span class="comment">/**&lt; deprecated */</span>
<a name="l00233"></a><a class="code" href="ccn_8h.html#afec910e39c89dcf24a44f93e97032399a42634dd580eaf8e2ae685ce4e6b5c3cb">00233</a>     <a class="code" href="ccn_8h.html#afec910e39c89dcf24a44f93e97032399a42634dd580eaf8e2ae685ce4e6b5c3cb" title="nonconsecutive block ids">CCN_MARKER_BLKID</a>   = 0xFB, <span class="comment">/**&lt; nonconsecutive block ids */</span>
<a name="l00234"></a><a class="code" href="ccn_8h.html#afec910e39c89dcf24a44f93e97032399a8b7274d49f90dd8d37f86d1ee8a20c6e">00234</a>     <a class="code" href="ccn_8h.html#afec910e39c89dcf24a44f93e97032399a8b7274d49f90dd8d37f86d1ee8a20c6e" title="timestamp-based versioning">CCN_MARKER_VERSION</a> = 0xFD  <span class="comment">/**&lt; timestamp-based versioning */</span>
<a name="l00235"></a>00235 };
<a name="l00236"></a>00236 
<a name="l00237"></a>00237 <span class="comment">/*</span>
<a name="l00238"></a>00238 <span class="comment"> * ccn_name_append_numeric: add binary Component to ccnb-encoded Name</span>
<a name="l00239"></a>00239 <span class="comment"> * These are special components used for marking versions, fragments, etc.</span>
<a name="l00240"></a>00240 <span class="comment"> * Return value is 0, or -1 for error</span>
<a name="l00241"></a>00241 <span class="comment"> * see doc/technical/NameConventions.html</span>
<a name="l00242"></a>00242 <span class="comment"> */</span>
<a name="l00243"></a>00243 <span class="keywordtype">int</span> <a class="code" href="ccn_8h.html#a3b95a770555b90f43d4876bea62c202d" title="Add a binary Component to a ccnb-encoded Name.">ccn_name_append_numeric</a>(<span class="keyword">struct</span> <a class="code" href="structccn__charbuf.html">ccn_charbuf</a> *c,
<a name="l00244"></a>00244                             <span class="keyword">enum</span> <a class="code" href="ccn_8h.html#afec910e39c89dcf24a44f93e97032399">ccn_marker</a> tag, uintmax_t value);
<a name="l00245"></a>00245 
<a name="l00246"></a>00246 <span class="comment">/*</span>
<a name="l00247"></a>00247 <span class="comment"> * ccn_name_append_nonce: add nonce Component to ccnb-encoded Name</span>
<a name="l00248"></a>00248 <span class="comment"> * Uses %C1.N.n marker.</span>
<a name="l00249"></a>00249 <span class="comment"> * see doc/technical/NameConventions.html</span>
<a name="l00250"></a>00250 <span class="comment"> */</span>
<a name="l00251"></a>00251 <span class="keywordtype">int</span> <a class="code" href="ccn_8h.html#aa8b2365706c6a01fe6e1ea410eac9b84" title="Add nonce Component to ccnb-encoded Name.">ccn_name_append_nonce</a>(<span class="keyword">struct</span> <a class="code" href="structccn__charbuf.html">ccn_charbuf</a> *c);
<a name="l00252"></a>00252 
<a name="l00253"></a>00253 <span class="comment">/*</span>
<a name="l00254"></a>00254 <span class="comment"> * ccn_name_split: find Component boundaries in a ccnb-encoded Name</span>
<a name="l00255"></a>00255 <span class="comment"> * Thin veneer over ccn_parse_Name().</span>
<a name="l00256"></a>00256 <span class="comment"> * returns -1 for error, otherwise the number of Components</span>
<a name="l00257"></a>00257 <span class="comment"> * components arg may be NULL to just do a validity check</span>
<a name="l00258"></a>00258 <span class="comment"> */</span>
<a name="l00259"></a>00259 <span class="keywordtype">int</span> <a class="code" href="ccn_8h.html#a75efe309adf727b49a9afe58fed4b483" title="Find Component boundaries in a ccnb-encoded Name.">ccn_name_split</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structccn__charbuf.html">ccn_charbuf</a> *c,
<a name="l00260"></a>00260                    <span class="keyword">struct</span> <a class="code" href="structccn__indexbuf.html">ccn_indexbuf</a>* components);
<a name="l00261"></a>00261 
<a name="l00262"></a>00262 <span class="comment">/*</span>
<a name="l00263"></a>00263 <span class="comment"> * ccn_name_chop: Chop the name down to n components.</span>
<a name="l00264"></a>00264 <span class="comment"> * returns -1 for error, otherwise the new number of Components</span>
<a name="l00265"></a>00265 <span class="comment"> * components arg may be NULL; if provided it must be consistent with</span>
<a name="l00266"></a>00266 <span class="comment"> * some prefix of the name, and is updated accordingly.</span>
<a name="l00267"></a>00267 <span class="comment"> * n may be negative to say how many components to remove instead of how</span>
<a name="l00268"></a>00268 <span class="comment"> * many to leave, e.g. -1 will remove just the last component.</span>
<a name="l00269"></a>00269 <span class="comment"> */</span>
<a name="l00270"></a>00270 <span class="keywordtype">int</span> <a class="code" href="ccn_8h.html#a79ca5ab3dd25aa67bf1949a440284978" title="Chop the name down to n components.">ccn_name_chop</a>(<span class="keyword">struct</span> <a class="code" href="structccn__charbuf.html">ccn_charbuf</a> *c,
<a name="l00271"></a>00271                   <span class="keyword">struct</span> <a class="code" href="structccn__indexbuf.html">ccn_indexbuf</a>* components, <span class="keywordtype">int</span> n);
<a name="l00272"></a>00272 
<a name="l00273"></a>00273 
<a name="l00274"></a>00274 <span class="comment">/***********************************</span>
<a name="l00275"></a>00275 <span class="comment"> * Authenticators and signatures for content are constructed in charbufs</span>
<a name="l00276"></a>00276 <span class="comment"> * using the following routines.</span>
<a name="l00277"></a>00277 <span class="comment"> */</span>
<a name="l00278"></a>00278 
<a name="l00279"></a><a class="code" href="ccn_8h.html#a5ac452b850189ae724c4ff89ae81c702">00279</a> <span class="keyword">enum</span> <a class="code" href="ccn_8h.html#a5ac452b850189ae724c4ff89ae81c702">ccn_content_type</a> {
<a name="l00280"></a><a class="code" href="ccn_8h.html#a5ac452b850189ae724c4ff89ae81c702a8777a57c9bccbe58b5e42749d9ec839d">00280</a>     <a class="code" href="ccn_8h.html#a5ac452b850189ae724c4ff89ae81c702a8777a57c9bccbe58b5e42749d9ec839d">CCN_CONTENT_DATA</a> = 0x0C04C0,
<a name="l00281"></a><a class="code" href="ccn_8h.html#a5ac452b850189ae724c4ff89ae81c702ac8d1ba8b5da730f994a3b7a510d11213">00281</a>     <a class="code" href="ccn_8h.html#a5ac452b850189ae724c4ff89ae81c702ac8d1ba8b5da730f994a3b7a510d11213">CCN_CONTENT_ENCR</a> = 0x10D091,
<a name="l00282"></a><a class="code" href="ccn_8h.html#a5ac452b850189ae724c4ff89ae81c702a73b644ea179c5d4145072df836092a1f">00282</a>     <a class="code" href="ccn_8h.html#a5ac452b850189ae724c4ff89ae81c702a73b644ea179c5d4145072df836092a1f">CCN_CONTENT_GONE</a> = 0x18E344,
<a name="l00283"></a><a class="code" href="ccn_8h.html#a5ac452b850189ae724c4ff89ae81c702ac721241f29c64d4acd212497a30b362c">00283</a>     <a class="code" href="ccn_8h.html#a5ac452b850189ae724c4ff89ae81c702ac721241f29c64d4acd212497a30b362c">CCN_CONTENT_KEY</a>  = 0x28463F,
<a name="l00284"></a><a class="code" href="ccn_8h.html#a5ac452b850189ae724c4ff89ae81c702a0055466cba309d1764f3e428dd1fc059">00284</a>     <a class="code" href="ccn_8h.html#a5ac452b850189ae724c4ff89ae81c702a0055466cba309d1764f3e428dd1fc059">CCN_CONTENT_LINK</a> = 0x2C834A,
<a name="l00285"></a><a class="code" href="ccn_8h.html#a5ac452b850189ae724c4ff89ae81c702a277adabdd800cc480a6f9a09344d5a7f">00285</a>     <a class="code" href="ccn_8h.html#a5ac452b850189ae724c4ff89ae81c702a277adabdd800cc480a6f9a09344d5a7f">CCN_CONTENT_NACK</a> = 0x34008A
<a name="l00286"></a>00286 };
<a name="l00287"></a>00287 
<a name="l00288"></a>00288 <span class="comment">/***********************************</span>
<a name="l00289"></a>00289 <span class="comment"> * ccn_express_interest: </span>
<a name="l00290"></a>00290 <span class="comment"> * Use the above routines to set up namebuf.</span>
<a name="l00291"></a>00291 <span class="comment"> * Matching occurs only on the first prefix_comps components of</span>
<a name="l00292"></a>00292 <span class="comment"> * the name, or on all components if prefix_comps is -1.</span>
<a name="l00293"></a>00293 <span class="comment"> * Any remaining components serve to establish the starting point for</span>
<a name="l00294"></a>00294 <span class="comment"> * the search for matching content.</span>
<a name="l00295"></a>00295 <span class="comment"> * The namebuf may be reused or destroyed after the call.</span>
<a name="l00296"></a>00296 <span class="comment"> * If action is not NULL, it is invoked when matching data comes back.</span>
<a name="l00297"></a>00297 <span class="comment"> * If interest_template is supplied, it should contain a ccnb formatted</span>
<a name="l00298"></a>00298 <span class="comment"> * interest message to provide the other portions of the interest.</span>
<a name="l00299"></a>00299 <span class="comment"> * It may also be reused or destroyed after the call.</span>
<a name="l00300"></a>00300 <span class="comment"> * When an interest times out, the upcall may return</span>
<a name="l00301"></a>00301 <span class="comment"> * CCN_UPCALL_RESULT_REEXPRESS to simply re-express the interest.</span>
<a name="l00302"></a>00302 <span class="comment"> * The default is to unregister the handler.  The common use will be for</span>
<a name="l00303"></a>00303 <span class="comment"> * the upcall to register again with an interest modified to prevent matching</span>
<a name="l00304"></a>00304 <span class="comment"> * the same interest again.</span>
<a name="l00305"></a>00305 <span class="comment"> */</span>
<a name="l00306"></a>00306 <span class="keywordtype">int</span> <a class="code" href="ccn_8h.html#a9f2d6eede46c8aac3dbb4b6e22e1d492">ccn_express_interest</a>(<span class="keyword">struct</span> ccn *h,
<a name="l00307"></a>00307                          <span class="keyword">struct</span> <a class="code" href="structccn__charbuf.html">ccn_charbuf</a> *namebuf,
<a name="l00308"></a>00308                          <span class="keyword">struct</span> <a class="code" href="structccn__closure.html" title="Handle for upcalls that allow clients receive notifications of incoming interests...">ccn_closure</a> *action,
<a name="l00309"></a>00309                          <span class="keyword">struct</span> <a class="code" href="structccn__charbuf.html">ccn_charbuf</a> *interest_template);
<a name="l00310"></a>00310 
<a name="l00311"></a>00311 <span class="comment">/*</span>
<a name="l00312"></a>00312 <span class="comment"> * Register to receive interests on a prefix</span>
<a name="l00313"></a>00313 <span class="comment"> */</span>
<a name="l00314"></a>00314 <span class="keywordtype">int</span> <a class="code" href="ccn_8h.html#a9193ff0e42816aea703225a374d5532d" title="Register to receive interests on a prefix.">ccn_set_interest_filter</a>(<span class="keyword">struct</span> ccn *h, <span class="keyword">struct</span> <a class="code" href="structccn__charbuf.html">ccn_charbuf</a> *namebuf,
<a name="l00315"></a>00315                             <span class="keyword">struct</span> <a class="code" href="structccn__closure.html" title="Handle for upcalls that allow clients receive notifications of incoming interests...">ccn_closure</a> *action);
<a name="l00316"></a>00316 
<a name="l00317"></a>00317 <span class="comment">/*</span>
<a name="l00318"></a>00318 <span class="comment"> * Variation allows non-default forwarding flags</span>
<a name="l00319"></a>00319 <span class="comment"> */</span>
<a name="l00320"></a>00320 <span class="keywordtype">int</span> <a class="code" href="ccn_8h.html#ace6d0b4b97edab3d13c14a0566996b0f" title="Register to receive interests on a prefix, with forwarding flags.">ccn_set_interest_filter_with_flags</a>(<span class="keyword">struct</span> ccn *h,
<a name="l00321"></a>00321                                        <span class="keyword">struct</span> <a class="code" href="structccn__charbuf.html">ccn_charbuf</a> *namebuf,
<a name="l00322"></a>00322                                        <span class="keyword">struct</span> <a class="code" href="structccn__closure.html" title="Handle for upcalls that allow clients receive notifications of incoming interests...">ccn_closure</a> *action,
<a name="l00323"></a>00323                                        <span class="keywordtype">int</span> forw_flags);
<a name="l00324"></a>00324 
<a name="l00325"></a>00325 <span class="comment">/*</span>
<a name="l00326"></a>00326 <span class="comment"> * ccn_put: send ccn binary</span>
<a name="l00327"></a>00327 <span class="comment"> * This checks for a single well-formed ccn binary object and </span>
<a name="l00328"></a>00328 <span class="comment"> * sends it out (or queues it to be sent).  For normal clients,</span>
<a name="l00329"></a>00329 <span class="comment"> * this should be a ContentObject sent in response to an Interest,</span>
<a name="l00330"></a>00330 <span class="comment"> * but ccn_put does not check for that.</span>
<a name="l00331"></a>00331 <span class="comment"> * Returns -1 for error, 0 if sent completely, 1 if queued.</span>
<a name="l00332"></a>00332 <span class="comment"> */</span>
<a name="l00333"></a>00333 <span class="keywordtype">int</span> <a class="code" href="ccn_8h.html#ac71f5c8727443c13afb11cf471f5f8fc">ccn_put</a>(<span class="keyword">struct</span> ccn *h, <span class="keyword">const</span> <span class="keywordtype">void</span> *p, <span class="keywordtype">size_t</span> length);
<a name="l00334"></a>00334 
<a name="l00335"></a>00335 <span class="comment">/*</span>
<a name="l00336"></a>00336 <span class="comment"> * ccn_output_is_pending:</span>
<a name="l00337"></a>00337 <span class="comment"> * This is for client-managed select or poll.</span>
<a name="l00338"></a>00338 <span class="comment"> * Returns 1 if there is data waiting to be sent, else 0.</span>
<a name="l00339"></a>00339 <span class="comment"> */</span>
<a name="l00340"></a>00340 <span class="keywordtype">int</span> <a class="code" href="ccn_8h.html#a9b6da55e8377d824bb7200dc4287354f">ccn_output_is_pending</a>(<span class="keyword">struct</span> ccn *h);
<a name="l00341"></a>00341 
<a name="l00342"></a>00342 <span class="comment">/*</span>
<a name="l00343"></a>00343 <span class="comment"> * ccn_run: process incoming</span>
<a name="l00344"></a>00344 <span class="comment"> * This may serve as the main event loop for simple apps by passing </span>
<a name="l00345"></a>00345 <span class="comment"> * a timeout value of -1.</span>
<a name="l00346"></a>00346 <span class="comment"> * The timeout is in milliseconds.</span>
<a name="l00347"></a>00347 <span class="comment"> */</span>
<a name="l00348"></a>00348 <span class="keywordtype">int</span> <a class="code" href="ccn_8h.html#a3efe1659b5387eb385044bcd48619603" title="Run the ccn client event loop.">ccn_run</a>(<span class="keyword">struct</span> ccn *h, <span class="keywordtype">int</span> timeout);
<a name="l00349"></a>00349 
<a name="l00350"></a>00350 <span class="comment">/*</span>
<a name="l00351"></a>00351 <span class="comment"> * ccn_set_run_timeout: modify ccn_run timeout</span>
<a name="l00352"></a>00352 <span class="comment"> * This may be called from an upcall to change the timeout value.</span>
<a name="l00353"></a>00353 <span class="comment"> * The timeout is in milliseconds.  Returns old value.</span>
<a name="l00354"></a>00354 <span class="comment"> */</span>
<a name="l00355"></a>00355 <span class="keywordtype">int</span> <a class="code" href="ccn_8h.html#a1f48aec24780ebc7f0ee8f6305ba8246" title="Modify ccn_run timeout.">ccn_set_run_timeout</a>(<span class="keyword">struct</span> ccn *h, <span class="keywordtype">int</span> timeout);
<a name="l00356"></a>00356 
<a name="l00357"></a>00357 <span class="comment">/*</span>
<a name="l00358"></a>00358 <span class="comment"> * ccn_get: Get a single matching ContentObject</span>
<a name="l00359"></a>00359 <span class="comment"> * This is a convenience for getting a single matching ContentObject.</span>
<a name="l00360"></a>00360 <span class="comment"> * Blocks until a matching ContentObject arrives or there is a timeout.</span>
<a name="l00361"></a>00361 <span class="comment"> * If h is NULL or ccn_get is called from inside an upcall, a new connection</span>
<a name="l00362"></a>00362 <span class="comment"> * will be used and upcalls from other requests will not be processed while</span>
<a name="l00363"></a>00363 <span class="comment"> * ccn_get is active.</span>
<a name="l00364"></a>00364 <span class="comment"> * The pcobuf and compsbuf arguments may be supplied to save the work of</span>
<a name="l00365"></a>00365 <span class="comment"> * re-parsing the ContentObject.  Either or both may be NULL if this</span>
<a name="l00366"></a>00366 <span class="comment"> * information is not actually needed.</span>
<a name="l00367"></a>00367 <span class="comment"> * flags are not currently used, should be 0.</span>
<a name="l00368"></a>00368 <span class="comment"> * Returns 0 for success, -1 for an error.</span>
<a name="l00369"></a>00369 <span class="comment"> */</span>
<a name="l00370"></a>00370 <span class="keywordtype">int</span> <a class="code" href="ccn_8h.html#a04cac8f7330c6fc434bcf0dab0ccc720" title="Get a single matching ContentObject This is a convenience for getting a single matching...">ccn_get</a>(<span class="keyword">struct</span> ccn *h,
<a name="l00371"></a>00371             <span class="keyword">struct</span> <a class="code" href="structccn__charbuf.html">ccn_charbuf</a> *name,
<a name="l00372"></a>00372             <span class="keyword">struct</span> <a class="code" href="structccn__charbuf.html">ccn_charbuf</a> *interest_template,
<a name="l00373"></a>00373             <span class="keywordtype">int</span> timeout_ms,
<a name="l00374"></a>00374             <span class="keyword">struct</span> <a class="code" href="structccn__charbuf.html">ccn_charbuf</a> *resultbuf,
<a name="l00375"></a>00375             <span class="keyword">struct</span> <a class="code" href="structccn__parsed___content_object.html">ccn_parsed_ContentObject</a> *pcobuf,
<a name="l00376"></a>00376             <span class="keyword">struct</span> <a class="code" href="structccn__indexbuf.html">ccn_indexbuf</a> *compsbuf,
<a name="l00377"></a>00377             <span class="keywordtype">int</span> flags);
<a name="l00378"></a>00378 
<a name="l00379"></a><a class="code" href="ccn_8h.html#ab4902f7532f2d85ebcf72a166085c114">00379</a> <span class="preprocessor">#define CCN_GET_NOKEYWAIT 1</span>
<a name="l00380"></a>00380 <span class="preprocessor"></span>
<a name="l00381"></a>00381 <span class="comment">/* Handy if the content object didn&#39;t arrive in the usual way. */</span>
<a name="l00382"></a>00382 <span class="keywordtype">int</span> <a class="code" href="ccn_8h.html#a0afdee72d2bb592b031256d72ea7607c" title="Verify a ContentObject using the public key from either the object itself or our...">ccn_verify_content</a>(<span class="keyword">struct</span> ccn *h,
<a name="l00383"></a>00383                        <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *msg,
<a name="l00384"></a>00384                        <span class="keyword">struct</span> <a class="code" href="structccn__parsed___content_object.html">ccn_parsed_ContentObject</a> *pco);
<a name="l00385"></a>00385 
<a name="l00386"></a>00386 <span class="comment">/***********************************</span>
<a name="l00387"></a>00387 <span class="comment"> * Binary decoding</span>
<a name="l00388"></a>00388 <span class="comment"> * These routines require that the whole binary object be buffered.</span>
<a name="l00389"></a>00389 <span class="comment"> */</span>
<a name="l00390"></a>00390 
<a name="l00391"></a><a class="code" href="structccn__buf__decoder.html">00391</a> <span class="keyword">struct </span><a class="code" href="structccn__buf__decoder.html">ccn_buf_decoder</a> {
<a name="l00392"></a><a class="code" href="structccn__buf__decoder.html#ad0c36c4f48a2a7995653059161ca4ba9">00392</a>     <span class="keyword">struct </span><a class="code" href="structccn__skeleton__decoder.html">ccn_skeleton_decoder</a> <a class="code" href="structccn__buf__decoder.html#ad0c36c4f48a2a7995653059161ca4ba9">decoder</a>;
<a name="l00393"></a><a class="code" href="structccn__buf__decoder.html#ad701c927df188aca8fd6e745b27a9d7d">00393</a>     <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *<a class="code" href="structccn__buf__decoder.html#ad701c927df188aca8fd6e745b27a9d7d">buf</a>;
<a name="l00394"></a><a class="code" href="structccn__buf__decoder.html#a72e7b2fe98a12882cfdd65a3adfec4f0">00394</a>     <span class="keywordtype">size_t</span> <a class="code" href="structccn__buf__decoder.html#a72e7b2fe98a12882cfdd65a3adfec4f0">size</a>;
<a name="l00395"></a>00395 };
<a name="l00396"></a>00396 
<a name="l00397"></a>00397 <span class="keyword">struct </span><a class="code" href="structccn__buf__decoder.html">ccn_buf_decoder</a> *<a class="code" href="ccn_8h.html#a4ba830f8dad511663779d85122db633a">ccn_buf_decoder_start</a>(<span class="keyword">struct</span> <a class="code" href="structccn__buf__decoder.html">ccn_buf_decoder</a> *d,
<a name="l00398"></a>00398     <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *<a class="code" href="structccn__buf__decoder.html#ad701c927df188aca8fd6e745b27a9d7d">buf</a>, <span class="keywordtype">size_t</span> <a class="code" href="structccn__buf__decoder.html#a72e7b2fe98a12882cfdd65a3adfec4f0">size</a>);
<a name="l00399"></a>00399 
<a name="l00400"></a>00400 <span class="keywordtype">void</span> <a class="code" href="ccn_8h.html#a1b17cadb92b2339cba24721b0466a0ce">ccn_buf_advance</a>(<span class="keyword">struct</span> <a class="code" href="structccn__buf__decoder.html">ccn_buf_decoder</a> *d);
<a name="l00401"></a>00401 <span class="keywordtype">int</span> <a class="code" href="ccn_8h.html#afc0f094d2ad39a94e6ffc5b4fc54bf20">ccn_buf_advance_past_element</a>(<span class="keyword">struct</span> <a class="code" href="structccn__buf__decoder.html">ccn_buf_decoder</a> *d);
<a name="l00402"></a>00402 
<a name="l00403"></a>00403 <span class="comment">/* The match routines return a boolean - true for match */</span>
<a name="l00404"></a>00404 <span class="comment">/* XXX - note, ccn_buf_match_blob doesn&#39;t match - it extracts the blob! */</span>
<a name="l00405"></a>00405 <span class="keywordtype">int</span> <a class="code" href="ccn_8h.html#a127d4f9a3f901ba15bc5335d5a9fa3b0">ccn_buf_match_dtag</a>(<span class="keyword">struct</span> <a class="code" href="structccn__buf__decoder.html">ccn_buf_decoder</a> *d, <span class="keyword">enum</span> <a class="code" href="coding_8h.html#a720ee1182276ef229dcf775366d84f33" title="DTAG identifies ccnb-encoded elements.">ccn_dtag</a> dtag);
<a name="l00406"></a>00406 
<a name="l00407"></a>00407 <span class="keywordtype">int</span> <a class="code" href="ccn_8h.html#a520b440ee45107ded8415e281447a892">ccn_buf_match_some_dtag</a>(<span class="keyword">struct</span> <a class="code" href="structccn__buf__decoder.html">ccn_buf_decoder</a> *d);
<a name="l00408"></a>00408 
<a name="l00409"></a>00409 <span class="keywordtype">int</span> <a class="code" href="ccn_8h.html#a6010640d4b93062a1939c72ff7c3a922">ccn_buf_match_some_blob</a>(<span class="keyword">struct</span> <a class="code" href="structccn__buf__decoder.html">ccn_buf_decoder</a> *d);
<a name="l00410"></a>00410 <span class="keywordtype">int</span> <a class="code" href="ccn_8h.html#a9fed718b821292cf45ba00f17a09e69e">ccn_buf_match_blob</a>(<span class="keyword">struct</span> <a class="code" href="structccn__buf__decoder.html">ccn_buf_decoder</a> *d,
<a name="l00411"></a>00411                        <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> **bufp, <span class="keywordtype">size_t</span> *sizep);
<a name="l00412"></a>00412 
<a name="l00413"></a>00413 <span class="keywordtype">int</span> <a class="code" href="ccn_8h.html#ab88ea4768dd3b50b1059a264867b4d54">ccn_buf_match_udata</a>(<span class="keyword">struct</span> <a class="code" href="structccn__buf__decoder.html">ccn_buf_decoder</a> *d, <span class="keyword">const</span> <span class="keywordtype">char</span> *s);
<a name="l00414"></a>00414 
<a name="l00415"></a>00415 <span class="keywordtype">int</span> <a class="code" href="ccn_8h.html#a39eaace5806c35700e9cc0109adb684a">ccn_buf_match_attr</a>(<span class="keyword">struct</span> <a class="code" href="structccn__buf__decoder.html">ccn_buf_decoder</a> *d, <span class="keyword">const</span> <span class="keywordtype">char</span> *s);
<a name="l00416"></a>00416 
<a name="l00417"></a>00417 <span class="comment">/* On error, the parse routines enter an error state and return a negative value. */</span>
<a name="l00418"></a>00418 <span class="keywordtype">int</span> <a class="code" href="ccn_8h.html#a0125f8cc6f65a009336d50cb62438c55">ccn_parse_required_tagged_BLOB</a>(<span class="keyword">struct</span> <a class="code" href="structccn__buf__decoder.html">ccn_buf_decoder</a> *d,
<a name="l00419"></a>00419                                    <span class="keyword">enum</span> <a class="code" href="coding_8h.html#a720ee1182276ef229dcf775366d84f33" title="DTAG identifies ccnb-encoded elements.">ccn_dtag</a> dtag,
<a name="l00420"></a>00420                                    <span class="keywordtype">int</span> minlen, <span class="keywordtype">int</span> maxlen);
<a name="l00421"></a>00421 <span class="keywordtype">int</span> <a class="code" href="ccn_8h.html#ab103e43fe80ea10967dd6c24e14536bf">ccn_parse_optional_tagged_BLOB</a>(<span class="keyword">struct</span> <a class="code" href="structccn__buf__decoder.html">ccn_buf_decoder</a> *d,
<a name="l00422"></a>00422                                    <span class="keyword">enum</span> <a class="code" href="coding_8h.html#a720ee1182276ef229dcf775366d84f33" title="DTAG identifies ccnb-encoded elements.">ccn_dtag</a> dtag,
<a name="l00423"></a>00423                                    <span class="keywordtype">int</span> minlen, <span class="keywordtype">int</span> maxlen);
<a name="l00424"></a>00424 <span class="keywordtype">int</span> <a class="code" href="ccn_8h.html#a70fa3e1d30fcd69ce47f0ece8d62686c">ccn_parse_nonNegativeInteger</a>(<span class="keyword">struct</span> <a class="code" href="structccn__buf__decoder.html">ccn_buf_decoder</a> *d);
<a name="l00425"></a>00425 <span class="keywordtype">int</span> <a class="code" href="ccn_8h.html#a6d94ab4310d51f4b0489ec3fd7866a0f">ccn_parse_optional_tagged_nonNegativeInteger</a>(<span class="keyword">struct</span> <a class="code" href="structccn__buf__decoder.html">ccn_buf_decoder</a> *d,
<a name="l00426"></a>00426                                                  <span class="keyword">enum</span> <a class="code" href="coding_8h.html#a720ee1182276ef229dcf775366d84f33" title="DTAG identifies ccnb-encoded elements.">ccn_dtag</a> dtag);
<a name="l00427"></a>00427 <span class="keywordtype">int</span> <a class="code" href="ccn_8h.html#a5f93441ff25042528a31f206ef053138" title="Parse a potentially large non-negative integer.">ccn_parse_uintmax</a>(<span class="keyword">struct</span> <a class="code" href="structccn__buf__decoder.html">ccn_buf_decoder</a> *d, uintmax_t *result);
<a name="l00428"></a>00428 <span class="keywordtype">int</span> <a class="code" href="ccn_8h.html#aea33945d85ab225836c568e3eee632e6" title="Parses a ccnb-encoded element expected to contain a UDATA string.">ccn_parse_tagged_string</a>(<span class="keyword">struct</span> <a class="code" href="structccn__buf__decoder.html">ccn_buf_decoder</a> *d,
<a name="l00429"></a>00429                             <span class="keyword">enum</span> <a class="code" href="coding_8h.html#a720ee1182276ef229dcf775366d84f33" title="DTAG identifies ccnb-encoded elements.">ccn_dtag</a> dtag, <span class="keyword">struct</span> <a class="code" href="structccn__charbuf.html">ccn_charbuf</a> *<a class="code" href="ccnlibtest_8c.html#ad8b364fbcd4b0961757af2a59ba785d2">store</a>);
<a name="l00430"></a>00430 <span class="comment">/* check the decoder error state for these two - result can&#39;t be negative */</span>
<a name="l00431"></a>00431 uintmax_t <a class="code" href="ccn_8h.html#a092883fe8fe859b0639d40d40ef4d62c">ccn_parse_required_tagged_binary_number</a>(<span class="keyword">struct</span> <a class="code" href="structccn__buf__decoder.html">ccn_buf_decoder</a> *d,
<a name="l00432"></a>00432                                                   <span class="keyword">enum</span> <a class="code" href="coding_8h.html#a720ee1182276ef229dcf775366d84f33" title="DTAG identifies ccnb-encoded elements.">ccn_dtag</a> dtag,
<a name="l00433"></a>00433                                                   <span class="keywordtype">int</span> minlen, <span class="keywordtype">int</span> maxlen);
<a name="l00434"></a>00434 uintmax_t <a class="code" href="ccn_8h.html#a75254aca8e7698defee09f58df68b75f">ccn_parse_optional_tagged_binary_number</a>(<span class="keyword">struct</span> <a class="code" href="structccn__buf__decoder.html">ccn_buf_decoder</a> *d,
<a name="l00435"></a>00435                                                   <span class="keyword">enum</span> <a class="code" href="coding_8h.html#a720ee1182276ef229dcf775366d84f33" title="DTAG identifies ccnb-encoded elements.">ccn_dtag</a> dtag,
<a name="l00436"></a>00436                                                   <span class="keywordtype">int</span> minlen, <span class="keywordtype">int</span> maxlen,
<a name="l00437"></a>00437                                                   uintmax_t default_value);<span class="comment"></span>
<a name="l00438"></a>00438 <span class="comment">/**</span>
<a name="l00439"></a>00439 <span class="comment"> * Enter an error state if element closer not found.</span>
<a name="l00440"></a>00440 <span class="comment"> */</span>
<a name="l00441"></a>00441 <span class="keywordtype">void</span> <a class="code" href="ccn_8h.html#a1868a32594c3c2a98e60049a3f3184b8" title="Enter an error state if element closer not found.">ccn_buf_check_close</a>(<span class="keyword">struct</span> <a class="code" href="structccn__buf__decoder.html">ccn_buf_decoder</a> *d);
<a name="l00442"></a>00442 
<a name="l00443"></a>00443 <span class="comment">/*</span>
<a name="l00444"></a>00444 <span class="comment"> * ccn_ref_tagged_BLOB: Get address &amp; size associated with blob-valued element</span>
<a name="l00445"></a>00445 <span class="comment"> * Returns 0 for success, negative value for error.</span>
<a name="l00446"></a>00446 <span class="comment"> */</span>
<a name="l00447"></a>00447 <span class="keywordtype">int</span> <a class="code" href="ccn_8h.html#af630540ae5874ba0b17f1960482a85a9">ccn_ref_tagged_BLOB</a>(<span class="keyword">enum</span> <a class="code" href="coding_8h.html#a720ee1182276ef229dcf775366d84f33" title="DTAG identifies ccnb-encoded elements.">ccn_dtag</a> tt,
<a name="l00448"></a>00448                         <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *<a class="code" href="structccn__buf__decoder.html#ad701c927df188aca8fd6e745b27a9d7d">buf</a>,
<a name="l00449"></a>00449                         <span class="keywordtype">size_t</span> start, <span class="keywordtype">size_t</span> stop,
<a name="l00450"></a>00450                         <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> **presult, <span class="keywordtype">size_t</span> *psize);
<a name="l00451"></a>00451 
<a name="l00452"></a>00452 <span class="comment">/*</span>
<a name="l00453"></a>00453 <span class="comment"> * ccn_ref_tagged_string: Get address &amp; size associated with</span>
<a name="l00454"></a>00454 <span class="comment"> * string(UDATA)-valued element.   Note that since the element closer</span>
<a name="l00455"></a>00455 <span class="comment"> * is a 0 byte, the string result will be correctly interpreted as a C string.</span>
<a name="l00456"></a>00456 <span class="comment"> * Returns 0 for success, negative value for error.</span>
<a name="l00457"></a>00457 <span class="comment"> */</span>
<a name="l00458"></a>00458 <span class="keywordtype">int</span> <a class="code" href="ccn_8h.html#ae9ed1ea4ac27fae9408e7e5c7310141b" title="Produce a pointer and length for the string in a ccnb-encoded tagged element containing...">ccn_ref_tagged_string</a>(<span class="keyword">enum</span> <a class="code" href="coding_8h.html#a720ee1182276ef229dcf775366d84f33" title="DTAG identifies ccnb-encoded elements.">ccn_dtag</a> tt,
<a name="l00459"></a>00459                         <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *<a class="code" href="structccn__buf__decoder.html#ad701c927df188aca8fd6e745b27a9d7d">buf</a>,
<a name="l00460"></a>00460                         <span class="keywordtype">size_t</span> start, <span class="keywordtype">size_t</span> stop,
<a name="l00461"></a>00461                         <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> **presult, <span class="keywordtype">size_t</span> *psize);
<a name="l00462"></a>00462 
<a name="l00463"></a>00463 <span class="keywordtype">int</span> <a class="code" href="ccn_8h.html#a593756f6a28898c9b2a2bf1865fc0f2b">ccn_fetch_tagged_nonNegativeInteger</a>(<span class="keyword">enum</span> <a class="code" href="coding_8h.html#a720ee1182276ef229dcf775366d84f33" title="DTAG identifies ccnb-encoded elements.">ccn_dtag</a> tt,
<a name="l00464"></a>00464             <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *<a class="code" href="structccn__buf__decoder.html#ad701c927df188aca8fd6e745b27a9d7d">buf</a>, <span class="keywordtype">size_t</span> start, <span class="keywordtype">size_t</span> stop);
<a name="l00465"></a>00465 
<a name="l00466"></a>00466 <span class="comment">/*********** Interest parsing ***********/</span>
<a name="l00467"></a>00467 
<a name="l00468"></a>00468 <span class="comment">/*</span>
<a name="l00469"></a>00469 <span class="comment"> * The parse of an interest results in an array of offsets into the </span>
<a name="l00470"></a>00470 <span class="comment"> * wire representation, with the start and end of each major element and</span>
<a name="l00471"></a>00471 <span class="comment"> * a few of the inportant sub-elements.  The following enum allows those</span>
<a name="l00472"></a>00472 <span class="comment"> * array items to be referred to symbolically.  The *_B_* indices correspond</span>
<a name="l00473"></a>00473 <span class="comment"> * to beginning offsets and the *_E_* indices correspond to ending offsets.</span>
<a name="l00474"></a>00474 <span class="comment"> * An omitted element has its beginning and ending offset equal to each other.</span>
<a name="l00475"></a>00475 <span class="comment"> * Normally these offsets will end up in non-decreasing order.</span>
<a name="l00476"></a>00476 <span class="comment"> * Some aliasing tricks may be played here, e.g. since</span>
<a name="l00477"></a>00477 <span class="comment"> * offset[CCN_PI_E_ComponentLast] is always equal to</span>
<a name="l00478"></a>00478 <span class="comment"> * offset[CCN_PI_E_LastPrefixComponent],</span>
<a name="l00479"></a>00479 <span class="comment"> * we may define CCN_PI_E_ComponentLast = CCN_PI_E_LastPrefixComponent.</span>
<a name="l00480"></a>00480 <span class="comment"> * However, code should not rely on that,</span>
<a name="l00481"></a>00481 <span class="comment"> * since it may change from time to time as the</span>
<a name="l00482"></a>00482 <span class="comment"> * interest schema evolves.</span>
<a name="l00483"></a>00483 <span class="comment"> */</span>
<a name="l00484"></a><a class="code" href="ccn_8h.html#af757316233f18d2b2252600bbd780dd9">00484</a> <span class="keyword">enum</span> <a class="code" href="ccn_8h.html#af757316233f18d2b2252600bbd780dd9">ccn_parsed_interest_offsetid</a> {
<a name="l00485"></a><a class="code" href="ccn_8h.html#af757316233f18d2b2252600bbd780dd9aec6eb389501f45e87378621c413261e2">00485</a>     <a class="code" href="ccn_8h.html#af757316233f18d2b2252600bbd780dd9aec6eb389501f45e87378621c413261e2">CCN_PI_B_Name</a>,
<a name="l00486"></a><a class="code" href="ccn_8h.html#af757316233f18d2b2252600bbd780dd9a7a90fec0637d06bb4ede9bf834ce9a83">00486</a>     <a class="code" href="ccn_8h.html#af757316233f18d2b2252600bbd780dd9a7a90fec0637d06bb4ede9bf834ce9a83">CCN_PI_B_Component0</a>,
<a name="l00487"></a><a class="code" href="ccn_8h.html#af757316233f18d2b2252600bbd780dd9a7826c63e16f21cd84ad091192ed74898">00487</a>     <a class="code" href="ccn_8h.html#af757316233f18d2b2252600bbd780dd9a7826c63e16f21cd84ad091192ed74898">CCN_PI_B_LastPrefixComponent</a>,
<a name="l00488"></a><a class="code" href="ccn_8h.html#af757316233f18d2b2252600bbd780dd9a6ce15fd28c83ef58611ab197164a5fb8">00488</a>     <a class="code" href="ccn_8h.html#af757316233f18d2b2252600bbd780dd9a6ce15fd28c83ef58611ab197164a5fb8">CCN_PI_E_LastPrefixComponent</a>,
<a name="l00489"></a><a class="code" href="ccn_8h.html#af757316233f18d2b2252600bbd780dd9a72187bad2d120dcd47703eaac92c6d38">00489</a>     <a class="code" href="ccn_8h.html#af757316233f18d2b2252600bbd780dd9a72187bad2d120dcd47703eaac92c6d38">CCN_PI_E_ComponentLast</a> = <a class="code" href="ccn_8h.html#af757316233f18d2b2252600bbd780dd9a6ce15fd28c83ef58611ab197164a5fb8">CCN_PI_E_LastPrefixComponent</a>,
<a name="l00490"></a><a class="code" href="ccn_8h.html#af757316233f18d2b2252600bbd780dd9afb9f0effbe855926d8766df4418ccc03">00490</a>     <a class="code" href="ccn_8h.html#af757316233f18d2b2252600bbd780dd9afb9f0effbe855926d8766df4418ccc03">CCN_PI_E_Name</a>,
<a name="l00491"></a><a class="code" href="ccn_8h.html#af757316233f18d2b2252600bbd780dd9a2dedf9fcd85c8958fb70d2333299906b">00491</a>     <a class="code" href="ccn_8h.html#af757316233f18d2b2252600bbd780dd9a2dedf9fcd85c8958fb70d2333299906b">CCN_PI_B_MinSuffixComponents</a>,
<a name="l00492"></a><a class="code" href="ccn_8h.html#af757316233f18d2b2252600bbd780dd9a292499c75facdda39183f0cfd0d3f09e">00492</a>     <a class="code" href="ccn_8h.html#af757316233f18d2b2252600bbd780dd9a292499c75facdda39183f0cfd0d3f09e">CCN_PI_E_MinSuffixComponents</a>,
<a name="l00493"></a><a class="code" href="ccn_8h.html#af757316233f18d2b2252600bbd780dd9ad081b5df0eade12a09f7640373c59ef5">00493</a>     <a class="code" href="ccn_8h.html#af757316233f18d2b2252600bbd780dd9ad081b5df0eade12a09f7640373c59ef5">CCN_PI_B_MaxSuffixComponents</a>,
<a name="l00494"></a><a class="code" href="ccn_8h.html#af757316233f18d2b2252600bbd780dd9a81438e5dd836f5b99916e07dfef07579">00494</a>     <a class="code" href="ccn_8h.html#af757316233f18d2b2252600bbd780dd9a81438e5dd836f5b99916e07dfef07579">CCN_PI_E_MaxSuffixComponents</a>,
<a name="l00495"></a><a class="code" href="ccn_8h.html#af757316233f18d2b2252600bbd780dd9a8e76ad444890c4909a7643d61f1d3931">00495</a>     <a class="code" href="ccn_8h.html#af757316233f18d2b2252600bbd780dd9a8e76ad444890c4909a7643d61f1d3931">CCN_PI_B_PublisherID</a>, <span class="comment">// XXX - rename</span>
<a name="l00496"></a><a class="code" href="ccn_8h.html#af757316233f18d2b2252600bbd780dd9a02115c02da579c760b3a4e50698634d4">00496</a>     <a class="code" href="ccn_8h.html#af757316233f18d2b2252600bbd780dd9a02115c02da579c760b3a4e50698634d4">CCN_PI_B_PublisherIDKeyDigest</a>,
<a name="l00497"></a><a class="code" href="ccn_8h.html#af757316233f18d2b2252600bbd780dd9a91b4ed6af13e2d89ca39bd668a04a6cc">00497</a>     <a class="code" href="ccn_8h.html#af757316233f18d2b2252600bbd780dd9a91b4ed6af13e2d89ca39bd668a04a6cc">CCN_PI_E_PublisherIDKeyDigest</a>,
<a name="l00498"></a><a class="code" href="ccn_8h.html#af757316233f18d2b2252600bbd780dd9a4afedccd2c9a56a18d45bdd28a0378d2">00498</a>     <a class="code" href="ccn_8h.html#af757316233f18d2b2252600bbd780dd9a4afedccd2c9a56a18d45bdd28a0378d2">CCN_PI_E_PublisherID</a>,
<a name="l00499"></a><a class="code" href="ccn_8h.html#af757316233f18d2b2252600bbd780dd9a4c40a9e5305b7602b96ababfd02f6775">00499</a>     <a class="code" href="ccn_8h.html#af757316233f18d2b2252600bbd780dd9a4c40a9e5305b7602b96ababfd02f6775">CCN_PI_B_Exclude</a>,
<a name="l00500"></a><a class="code" href="ccn_8h.html#af757316233f18d2b2252600bbd780dd9ad7411aa4c9a0b67d3b48c4abbe1e0f0a">00500</a>     <a class="code" href="ccn_8h.html#af757316233f18d2b2252600bbd780dd9ad7411aa4c9a0b67d3b48c4abbe1e0f0a">CCN_PI_E_Exclude</a>,
<a name="l00501"></a><a class="code" href="ccn_8h.html#af757316233f18d2b2252600bbd780dd9aa245dd0edb68de128d330178d84e7c58">00501</a>     <a class="code" href="ccn_8h.html#af757316233f18d2b2252600bbd780dd9aa245dd0edb68de128d330178d84e7c58">CCN_PI_B_ChildSelector</a>,
<a name="l00502"></a><a class="code" href="ccn_8h.html#af757316233f18d2b2252600bbd780dd9ae0da6708deb90894f50588f44184376e">00502</a>     <a class="code" href="ccn_8h.html#af757316233f18d2b2252600bbd780dd9ae0da6708deb90894f50588f44184376e">CCN_PI_E_ChildSelector</a>,
<a name="l00503"></a><a class="code" href="ccn_8h.html#af757316233f18d2b2252600bbd780dd9a4aef78efabde9aa1faefbc8bff3eccb6">00503</a>     <a class="code" href="ccn_8h.html#af757316233f18d2b2252600bbd780dd9a4aef78efabde9aa1faefbc8bff3eccb6">CCN_PI_B_AnswerOriginKind</a>,
<a name="l00504"></a><a class="code" href="ccn_8h.html#af757316233f18d2b2252600bbd780dd9aefa9d5c7b7fb20615b324649f693f653">00504</a>     <a class="code" href="ccn_8h.html#af757316233f18d2b2252600bbd780dd9aefa9d5c7b7fb20615b324649f693f653">CCN_PI_E_AnswerOriginKind</a>,
<a name="l00505"></a><a class="code" href="ccn_8h.html#af757316233f18d2b2252600bbd780dd9a93ab498c9cda336c253da7e19181c32d">00505</a>     <a class="code" href="ccn_8h.html#af757316233f18d2b2252600bbd780dd9a93ab498c9cda336c253da7e19181c32d">CCN_PI_B_Scope</a>,
<a name="l00506"></a><a class="code" href="ccn_8h.html#af757316233f18d2b2252600bbd780dd9a2a47735d8eda6fcfeca801046b8efa8b">00506</a>     <a class="code" href="ccn_8h.html#af757316233f18d2b2252600bbd780dd9a2a47735d8eda6fcfeca801046b8efa8b">CCN_PI_E_Scope</a>,
<a name="l00507"></a><a class="code" href="ccn_8h.html#af757316233f18d2b2252600bbd780dd9a1e01f2fa4631b5806d5e545266f2bf3e">00507</a>     <a class="code" href="ccn_8h.html#af757316233f18d2b2252600bbd780dd9a1e01f2fa4631b5806d5e545266f2bf3e">CCN_PI_B_InterestLifetime</a>,
<a name="l00508"></a><a class="code" href="ccn_8h.html#af757316233f18d2b2252600bbd780dd9a7283c8d6f5b37dddbfc54552ffa9e7ba">00508</a>     <a class="code" href="ccn_8h.html#af757316233f18d2b2252600bbd780dd9a7283c8d6f5b37dddbfc54552ffa9e7ba">CCN_PI_E_InterestLifetime</a>,
<a name="l00509"></a><a class="code" href="ccn_8h.html#af757316233f18d2b2252600bbd780dd9a2ae6e1571ec0795020181a912c2f558d">00509</a>     <a class="code" href="ccn_8h.html#af757316233f18d2b2252600bbd780dd9a2ae6e1571ec0795020181a912c2f558d">CCN_PI_B_Nonce</a>,
<a name="l00510"></a><a class="code" href="ccn_8h.html#af757316233f18d2b2252600bbd780dd9a4cb3b7e6225c31aeb10ddf0fe14195f5">00510</a>     <a class="code" href="ccn_8h.html#af757316233f18d2b2252600bbd780dd9a4cb3b7e6225c31aeb10ddf0fe14195f5">CCN_PI_E_Nonce</a>,
<a name="l00511"></a><a class="code" href="ccn_8h.html#af757316233f18d2b2252600bbd780dd9a03b83a997d2061247020eb592d89785e">00511</a>     <a class="code" href="ccn_8h.html#af757316233f18d2b2252600bbd780dd9a03b83a997d2061247020eb592d89785e">CCN_PI_B_OTHER</a>,
<a name="l00512"></a><a class="code" href="ccn_8h.html#af757316233f18d2b2252600bbd780dd9adfd7fbf837331d77b3085f0dae4f5ab0">00512</a>     <a class="code" href="ccn_8h.html#af757316233f18d2b2252600bbd780dd9adfd7fbf837331d77b3085f0dae4f5ab0">CCN_PI_E_OTHER</a>,
<a name="l00513"></a><a class="code" href="ccn_8h.html#af757316233f18d2b2252600bbd780dd9ae3500edfbd06a2be152e0ef8fcc64328">00513</a>     <a class="code" href="ccn_8h.html#af757316233f18d2b2252600bbd780dd9ae3500edfbd06a2be152e0ef8fcc64328">CCN_PI_E</a>
<a name="l00514"></a>00514 };
<a name="l00515"></a>00515 
<a name="l00516"></a><a class="code" href="structccn__parsed__interest.html">00516</a> <span class="keyword">struct </span><a class="code" href="structccn__parsed__interest.html">ccn_parsed_interest</a> {
<a name="l00517"></a><a class="code" href="structccn__parsed__interest.html#a1c33d36d3e8affb67c9a8e46eee18ce7">00517</a>     <span class="keywordtype">int</span> <a class="code" href="structccn__parsed__interest.html#a1c33d36d3e8affb67c9a8e46eee18ce7">magic</a>;
<a name="l00518"></a><a class="code" href="structccn__parsed__interest.html#af8e2d2c628b4b7bdb82de9edf8f91042">00518</a>     <span class="keywordtype">int</span> <a class="code" href="structccn__parsed__interest.html#af8e2d2c628b4b7bdb82de9edf8f91042">prefix_comps</a>;
<a name="l00519"></a><a class="code" href="structccn__parsed__interest.html#ae9c7f9f454d216c42403abbea5663ccd">00519</a>     <span class="keywordtype">int</span> <a class="code" href="structccn__parsed__interest.html#ae9c7f9f454d216c42403abbea5663ccd">min_suffix_comps</a>;
<a name="l00520"></a><a class="code" href="structccn__parsed__interest.html#ab63d1af5939686ce2d0fbe995c756eb9">00520</a>     <span class="keywordtype">int</span> <a class="code" href="structccn__parsed__interest.html#ab63d1af5939686ce2d0fbe995c756eb9">max_suffix_comps</a>;
<a name="l00521"></a><a class="code" href="structccn__parsed__interest.html#aea26b9ec88bb56e264346d9b22f23603">00521</a>     <span class="keywordtype">int</span> <a class="code" href="structccn__parsed__interest.html#aea26b9ec88bb56e264346d9b22f23603">orderpref</a>;
<a name="l00522"></a><a class="code" href="structccn__parsed__interest.html#a0c535d59cbe268b169381219513d54c4">00522</a>     <span class="keywordtype">int</span> <a class="code" href="structccn__parsed__interest.html#a0c535d59cbe268b169381219513d54c4">answerfrom</a>;
<a name="l00523"></a><a class="code" href="structccn__parsed__interest.html#a390914a53122916d606c0c3f63b2af47">00523</a>     <span class="keywordtype">int</span> <a class="code" href="structccn__parsed__interest.html#a390914a53122916d606c0c3f63b2af47">scope</a>;
<a name="l00524"></a><a class="code" href="structccn__parsed__interest.html#aa9895008888641d588d8f2ba53e9a46a">00524</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <a class="code" href="structccn__parsed__interest.html#aa9895008888641d588d8f2ba53e9a46a">offset</a>[<a class="code" href="ccn_8h.html#af757316233f18d2b2252600bbd780dd9ae3500edfbd06a2be152e0ef8fcc64328">CCN_PI_E</a>+1];
<a name="l00525"></a>00525 };
<a name="l00526"></a>00526 
<a name="l00527"></a><a class="code" href="ccn_8h.html#a2f04c30061a8e40ec262d4169ab4a1b5">00527</a> <span class="keyword">enum</span> <a class="code" href="ccn_8h.html#a2f04c30061a8e40ec262d4169ab4a1b5">ccn_parsed_Link_offsetid</a> {
<a name="l00528"></a><a class="code" href="ccn_8h.html#a2f04c30061a8e40ec262d4169ab4a1b5aee12bfae4b3598821b4018a2917fd02f">00528</a>     <a class="code" href="ccn_8h.html#a2f04c30061a8e40ec262d4169ab4a1b5aee12bfae4b3598821b4018a2917fd02f">CCN_PL_B_Name</a>,
<a name="l00529"></a><a class="code" href="ccn_8h.html#a2f04c30061a8e40ec262d4169ab4a1b5aca7b0b8131b59afbc3f563288453e4e4">00529</a>     <a class="code" href="ccn_8h.html#a2f04c30061a8e40ec262d4169ab4a1b5aca7b0b8131b59afbc3f563288453e4e4">CCN_PL_B_Component0</a>,
<a name="l00530"></a><a class="code" href="ccn_8h.html#a2f04c30061a8e40ec262d4169ab4a1b5acde61366b05cba5bba1b792b5aa9694f">00530</a>     <a class="code" href="ccn_8h.html#a2f04c30061a8e40ec262d4169ab4a1b5acde61366b05cba5bba1b792b5aa9694f">CCN_PL_E_ComponentLast</a>,
<a name="l00531"></a><a class="code" href="ccn_8h.html#a2f04c30061a8e40ec262d4169ab4a1b5a8f843a05b895b90e4449a5de3277076c">00531</a>     <a class="code" href="ccn_8h.html#a2f04c30061a8e40ec262d4169ab4a1b5a8f843a05b895b90e4449a5de3277076c">CCN_PL_E_Name</a>,
<a name="l00532"></a><a class="code" href="ccn_8h.html#a2f04c30061a8e40ec262d4169ab4a1b5ac7054acbc189acbab6dba5ae5f17fbdd">00532</a>     <a class="code" href="ccn_8h.html#a2f04c30061a8e40ec262d4169ab4a1b5ac7054acbc189acbab6dba5ae5f17fbdd">CCN_PL_B_Label</a>,
<a name="l00533"></a><a class="code" href="ccn_8h.html#a2f04c30061a8e40ec262d4169ab4a1b5a94e513cf2ae5ca176342f06a3eae37e3">00533</a>     <a class="code" href="ccn_8h.html#a2f04c30061a8e40ec262d4169ab4a1b5a94e513cf2ae5ca176342f06a3eae37e3">CCN_PL_E_Label</a>,
<a name="l00534"></a><a class="code" href="ccn_8h.html#a2f04c30061a8e40ec262d4169ab4a1b5ace436346b1490c0d1559b3f6518154b3">00534</a>     <a class="code" href="ccn_8h.html#a2f04c30061a8e40ec262d4169ab4a1b5ace436346b1490c0d1559b3f6518154b3">CCN_PL_B_LinkAuthenticator</a>,
<a name="l00535"></a><a class="code" href="ccn_8h.html#a2f04c30061a8e40ec262d4169ab4a1b5a91a4c8c76a119afd75304a33f9ea5c38">00535</a>     <a class="code" href="ccn_8h.html#a2f04c30061a8e40ec262d4169ab4a1b5a91a4c8c76a119afd75304a33f9ea5c38">CCN_PL_B_PublisherID</a>,
<a name="l00536"></a><a class="code" href="ccn_8h.html#a2f04c30061a8e40ec262d4169ab4a1b5a0acf1643bcc1cb8ff8fbe05b3b3ae64a">00536</a>     <a class="code" href="ccn_8h.html#a2f04c30061a8e40ec262d4169ab4a1b5a0acf1643bcc1cb8ff8fbe05b3b3ae64a">CCN_PL_B_PublisherDigest</a>,
<a name="l00537"></a><a class="code" href="ccn_8h.html#a2f04c30061a8e40ec262d4169ab4a1b5a2fb9ab4725d9f47417be7a0696cf30f7">00537</a>     <a class="code" href="ccn_8h.html#a2f04c30061a8e40ec262d4169ab4a1b5a2fb9ab4725d9f47417be7a0696cf30f7">CCN_PL_E_PublisherDigest</a>,
<a name="l00538"></a><a class="code" href="ccn_8h.html#a2f04c30061a8e40ec262d4169ab4a1b5a822bcc096b08df093416c10ab7a5466c">00538</a>     <a class="code" href="ccn_8h.html#a2f04c30061a8e40ec262d4169ab4a1b5a822bcc096b08df093416c10ab7a5466c">CCN_PL_E_PublisherID</a>,
<a name="l00539"></a><a class="code" href="ccn_8h.html#a2f04c30061a8e40ec262d4169ab4a1b5a20e142ab2b5078344499ee5dea696673">00539</a>     <a class="code" href="ccn_8h.html#a2f04c30061a8e40ec262d4169ab4a1b5a20e142ab2b5078344499ee5dea696673">CCN_PL_B_NameComponentCount</a>,
<a name="l00540"></a><a class="code" href="ccn_8h.html#a2f04c30061a8e40ec262d4169ab4a1b5a5b05dbe72e207122be1e967a3fd4e763">00540</a>     <a class="code" href="ccn_8h.html#a2f04c30061a8e40ec262d4169ab4a1b5a5b05dbe72e207122be1e967a3fd4e763">CCN_PL_E_NameComponentCount</a>,
<a name="l00541"></a><a class="code" href="ccn_8h.html#a2f04c30061a8e40ec262d4169ab4a1b5a40d7de03aca9e20033b1ba6e8f6279f6">00541</a>     <a class="code" href="ccn_8h.html#a2f04c30061a8e40ec262d4169ab4a1b5a40d7de03aca9e20033b1ba6e8f6279f6">CCN_PL_B_Timestamp</a>,
<a name="l00542"></a><a class="code" href="ccn_8h.html#a2f04c30061a8e40ec262d4169ab4a1b5afebd6679e9417ed7cf0a35606a4ea820">00542</a>     <a class="code" href="ccn_8h.html#a2f04c30061a8e40ec262d4169ab4a1b5afebd6679e9417ed7cf0a35606a4ea820">CCN_PL_E_Timestamp</a>,
<a name="l00543"></a><a class="code" href="ccn_8h.html#a2f04c30061a8e40ec262d4169ab4a1b5a64bc6a8ff9edc0cb2415f37fe2dfc0b0">00543</a>     <a class="code" href="ccn_8h.html#a2f04c30061a8e40ec262d4169ab4a1b5a64bc6a8ff9edc0cb2415f37fe2dfc0b0">CCN_PL_B_Type</a>,
<a name="l00544"></a><a class="code" href="ccn_8h.html#a2f04c30061a8e40ec262d4169ab4a1b5ab9e00d25da3e5018266ba89a6e4085ed">00544</a>     <a class="code" href="ccn_8h.html#a2f04c30061a8e40ec262d4169ab4a1b5ab9e00d25da3e5018266ba89a6e4085ed">CCN_PL_E_Type</a>,
<a name="l00545"></a><a class="code" href="ccn_8h.html#a2f04c30061a8e40ec262d4169ab4a1b5adff03b222bc11454e0635860316096e1">00545</a>     <a class="code" href="ccn_8h.html#a2f04c30061a8e40ec262d4169ab4a1b5adff03b222bc11454e0635860316096e1">CCN_PL_B_ContentDigest</a>,
<a name="l00546"></a><a class="code" href="ccn_8h.html#a2f04c30061a8e40ec262d4169ab4a1b5a0f742e1491da5d1ed69b3b2f996dcfb1">00546</a>     <a class="code" href="ccn_8h.html#a2f04c30061a8e40ec262d4169ab4a1b5a0f742e1491da5d1ed69b3b2f996dcfb1">CCN_PL_E_ContentDigest</a>,
<a name="l00547"></a><a class="code" href="ccn_8h.html#a2f04c30061a8e40ec262d4169ab4a1b5a8c5f086fec6c24184626b67993958f8d">00547</a>     <a class="code" href="ccn_8h.html#a2f04c30061a8e40ec262d4169ab4a1b5a8c5f086fec6c24184626b67993958f8d">CCN_PL_E_LinkAuthenticator</a>,
<a name="l00548"></a><a class="code" href="ccn_8h.html#a2f04c30061a8e40ec262d4169ab4a1b5af4df455ca287ea9c61f43f080703f3b1">00548</a>     <a class="code" href="ccn_8h.html#a2f04c30061a8e40ec262d4169ab4a1b5af4df455ca287ea9c61f43f080703f3b1">CCN_PL_E</a>
<a name="l00549"></a>00549 };
<a name="l00550"></a>00550 
<a name="l00551"></a><a class="code" href="structccn__parsed___link.html">00551</a> <span class="keyword">struct </span><a class="code" href="structccn__parsed___link.html">ccn_parsed_Link</a> {
<a name="l00552"></a><a class="code" href="structccn__parsed___link.html#a9b6ce54f26708cc0af1961ae07b6a5a4">00552</a>     <span class="keywordtype">int</span> <a class="code" href="structccn__parsed___link.html#a9b6ce54f26708cc0af1961ae07b6a5a4">name_ncomps</a>;
<a name="l00553"></a><a class="code" href="structccn__parsed___link.html#aaadc5094a80e19b726bbbd3548beb6c6">00553</a>     <span class="keywordtype">int</span> <a class="code" href="structccn__parsed___link.html#aaadc5094a80e19b726bbbd3548beb6c6">name_component_count</a>;
<a name="l00554"></a><a class="code" href="structccn__parsed___link.html#af0aa96f4402c08fdb9ebf8d18eca911e">00554</a>     <span class="keywordtype">int</span> <a class="code" href="structccn__parsed___link.html#af0aa96f4402c08fdb9ebf8d18eca911e">publisher_digest_type</a>;
<a name="l00555"></a><a class="code" href="structccn__parsed___link.html#a34c8c6bbdceedc2c470b8e0c8b0e640c">00555</a>     <span class="keywordtype">int</span> <a class="code" href="structccn__parsed___link.html#a34c8c6bbdceedc2c470b8e0c8b0e640c">type</a>;
<a name="l00556"></a><a class="code" href="structccn__parsed___link.html#afb7e45b159806b9ad23df818630fcb27">00556</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <a class="code" href="structccn__parsed___link.html#afb7e45b159806b9ad23df818630fcb27">offset</a>[<a class="code" href="ccn_8h.html#a2f04c30061a8e40ec262d4169ab4a1b5af4df455ca287ea9c61f43f080703f3b1">CCN_PL_E</a>+1];
<a name="l00557"></a>00557 };
<a name="l00558"></a>00558 
<a name="l00559"></a>00559 <span class="comment">/*</span>
<a name="l00560"></a>00560 <span class="comment"> * ccn_parse_Link:</span>
<a name="l00561"></a>00561 <span class="comment"> * Returns number of name components, or a negative value for an error.</span>
<a name="l00562"></a>00562 <span class="comment"> * Fills in *link.</span>
<a name="l00563"></a>00563 <span class="comment"> * If components is not NULL, it is filled with byte indexes of</span>
<a name="l00564"></a>00564 <span class="comment"> * the start of each Component of the Name of the Link,</span>
<a name="l00565"></a>00565 <span class="comment"> * plus one additional value for the index of the end of the last component.</span>
<a name="l00566"></a>00566 <span class="comment"> */</span>
<a name="l00567"></a>00567 <span class="keywordtype">int</span>
<a name="l00568"></a>00568 <a class="code" href="ccn_8h.html#a9f240db11f498e56fc8258c1435a3def">ccn_parse_Link</a>(<span class="keyword">struct</span> <a class="code" href="structccn__buf__decoder.html">ccn_buf_decoder</a> *d,
<a name="l00569"></a>00569                    <span class="keyword">struct</span> <a class="code" href="structccn__parsed___link.html">ccn_parsed_Link</a> *link,
<a name="l00570"></a>00570                    <span class="keyword">struct</span> <a class="code" href="structccn__indexbuf.html">ccn_indexbuf</a> *components);
<a name="l00571"></a>00571 
<a name="l00572"></a>00572 <span class="comment">/*</span>
<a name="l00573"></a>00573 <span class="comment"> * ccn_append_Link: TODO: fill in documentation</span>
<a name="l00574"></a>00574 <span class="comment"> */</span>
<a name="l00575"></a>00575 <span class="keywordtype">int</span>
<a name="l00576"></a>00576 <a class="code" href="ccn_8h.html#ad65c3fee2768fd23bcc382b1b1f31d1e" title="Append a representation of a Link to a charbuf.">ccnb_append_Link</a>(<span class="keyword">struct</span> <a class="code" href="structccn__charbuf.html">ccn_charbuf</a> *buf,
<a name="l00577"></a>00577                  <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structccn__charbuf.html">ccn_charbuf</a> *name,
<a name="l00578"></a>00578                  <span class="keyword">const</span> <span class="keywordtype">char</span> *label,
<a name="l00579"></a>00579                  <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structccn__charbuf.html">ccn_charbuf</a> *linkAuthenticator
<a name="l00580"></a>00580                  );
<a name="l00581"></a>00581 
<a name="l00582"></a>00582 <span class="comment">/*</span>
<a name="l00583"></a>00583 <span class="comment"> * ccn_parse_LinkAuthenticator:</span>
<a name="l00584"></a>00584 <span class="comment"> */</span>
<a name="l00585"></a>00585 <span class="keywordtype">int</span>
<a name="l00586"></a>00586 <a class="code" href="ccn_8h.html#a47a916b3d5e0b605702c195b28277e96">ccn_parse_LinkAuthenticator</a>(<span class="keyword">struct</span> <a class="code" href="structccn__buf__decoder.html">ccn_buf_decoder</a> *d,
<a name="l00587"></a>00587                <span class="keyword">struct</span> <a class="code" href="structccn__parsed___link.html">ccn_parsed_Link</a> *link);
<a name="l00588"></a>00588 
<a name="l00589"></a>00589 <span class="comment">/*</span>
<a name="l00590"></a>00590 <span class="comment"> * ccn_parse_Collection_start: TODO: fill in documentation</span>
<a name="l00591"></a>00591 <span class="comment"> */</span>
<a name="l00592"></a>00592 
<a name="l00593"></a>00593 <span class="keywordtype">int</span>
<a name="l00594"></a>00594 <a class="code" href="ccn_8h.html#a7c9c4170cd9692a23123180c55e15d24">ccn_parse_Collection_start</a>(<span class="keyword">struct</span> <a class="code" href="structccn__buf__decoder.html">ccn_buf_decoder</a> *d);
<a name="l00595"></a>00595 
<a name="l00596"></a>00596 <span class="comment">/*</span>
<a name="l00597"></a>00597 <span class="comment"> * ccn_parse_Collection_next: TODO: fill in documentation</span>
<a name="l00598"></a>00598 <span class="comment"> */</span>
<a name="l00599"></a>00599 
<a name="l00600"></a>00600 <span class="keywordtype">int</span>
<a name="l00601"></a>00601 <a class="code" href="ccn_8h.html#a79bb10e543137d868f2970d485e66c8a">ccn_parse_Collection_next</a>(<span class="keyword">struct</span> <a class="code" href="structccn__buf__decoder.html">ccn_buf_decoder</a> *d,
<a name="l00602"></a>00602                           <span class="keyword">struct</span> <a class="code" href="structccn__parsed___link.html">ccn_parsed_Link</a> *link,
<a name="l00603"></a>00603                           <span class="keyword">struct</span> <a class="code" href="structccn__indexbuf.html">ccn_indexbuf</a> *components);
<a name="l00604"></a>00604 
<a name="l00605"></a>00605 <span class="comment">/*</span>
<a name="l00606"></a>00606 <span class="comment"> * Bitmasks for AnswerOriginKind</span>
<a name="l00607"></a>00607 <span class="comment"> */</span>
<a name="l00608"></a><a class="code" href="ccn_8h.html#a8e4feae026026e2ccda69564c64e75f8">00608</a> <span class="preprocessor">#define CCN_AOK_CS      0x1     </span><span class="comment">/* Answer from content store */</span>
<a name="l00609"></a><a class="code" href="ccn_8h.html#a2eee6f7928f301760a9fe253faf676b3">00609</a> <span class="preprocessor">#define CCN_AOK_NEW     0x2     </span><span class="comment">/* OK to produce new content */</span>
<a name="l00610"></a><a class="code" href="ccn_8h.html#a15412bdde903379cc284c427873a3e4a">00610</a> <span class="preprocessor">#define CCN_AOK_DEFAULT (CCN_AOK_CS | CCN_AOK_NEW)</span>
<a name="l00611"></a><a class="code" href="ccn_8h.html#a94c6d87cd87f551fb2f9680740b39278">00611</a> <span class="preprocessor"></span><span class="preprocessor">#define CCN_AOK_STALE   0x4     </span><span class="comment">/* OK to answer with stale data */</span>
<a name="l00612"></a><a class="code" href="ccn_8h.html#aa458756c9bdd96b9803609c6dae6d235">00612</a> <span class="preprocessor">#define CCN_AOK_EXPIRE  0x10    </span><span class="comment">/* Mark as stale (must have Scope 0) */</span>
<a name="l00613"></a>00613 
<a name="l00614"></a>00614 <span class="comment">/*</span>
<a name="l00615"></a>00615 <span class="comment"> * ccn_parse_interest:</span>
<a name="l00616"></a>00616 <span class="comment"> * Returns number of name components, or a negative value for an error.</span>
<a name="l00617"></a>00617 <span class="comment"> * Fills in *interest.</span>
<a name="l00618"></a>00618 <span class="comment"> * If components is not NULL, it is filled with byte indexes of</span>
<a name="l00619"></a>00619 <span class="comment"> * the start of each Component of the Name of the Interest,</span>
<a name="l00620"></a>00620 <span class="comment"> * plus one additional value for the index of the end of the last component.</span>
<a name="l00621"></a>00621 <span class="comment"> */</span>
<a name="l00622"></a>00622 <span class="keywordtype">int</span>
<a name="l00623"></a>00623 <a class="code" href="ccn_8h.html#afd0b5c0251d4cdf65601d38a7a113b75">ccn_parse_interest</a>(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *msg, <span class="keywordtype">size_t</span> size,
<a name="l00624"></a>00624                    <span class="keyword">struct</span> <a class="code" href="structccn__parsed__interest.html">ccn_parsed_interest</a> *interest,
<a name="l00625"></a>00625                    <span class="keyword">struct</span> <a class="code" href="structccn__indexbuf.html">ccn_indexbuf</a> *components);
<a name="l00626"></a>00626 
<a name="l00627"></a>00627 <span class="comment">/*</span>
<a name="l00628"></a>00628 <span class="comment"> * Returns the lifetime of the interest in units of 2**(-12) seconds</span>
<a name="l00629"></a>00629 <span class="comment"> * (the same units as timestamps).</span>
<a name="l00630"></a>00630 <span class="comment"> */</span>
<a name="l00631"></a>00631 intmax_t <a class="code" href="ccn_8h.html#abca82b55146f6a2ebce000adce9b0d30">ccn_interest_lifetime</a>(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *msg,
<a name="l00632"></a>00632                                <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structccn__parsed__interest.html">ccn_parsed_interest</a> *pi);
<a name="l00633"></a>00633 <span class="comment">/*</span>
<a name="l00634"></a>00634 <span class="comment"> * As above, but result is in seconds.  Any fractional part is truncated, so</span>
<a name="l00635"></a>00635 <span class="comment"> * this is not useful for short-lived interests.</span>
<a name="l00636"></a>00636 <span class="comment"> */</span>
<a name="l00637"></a>00637 <span class="keywordtype">int</span> <a class="code" href="ccn_8h.html#a1db8902f71f2d19e0c4064b44d1cb115">ccn_interest_lifetime_seconds</a>(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *msg,
<a name="l00638"></a>00638                                   <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structccn__parsed__interest.html">ccn_parsed_interest</a> *pi);
<a name="l00639"></a>00639 
<a name="l00640"></a>00640 <span class="comment">/*********** ContentObject parsing ***********/</span>
<a name="l00641"></a>00641 <span class="comment">/* Analogous to enum ccn_parsed_interest_offsetid, but for content */</span>
<a name="l00642"></a><a class="code" href="ccn_8h.html#a8bb16876590e11ec0ef1af93415b0387">00642</a> <span class="keyword">enum</span> <a class="code" href="ccn_8h.html#a8bb16876590e11ec0ef1af93415b0387">ccn_parsed_content_object_offsetid</a> {
<a name="l00643"></a><a class="code" href="ccn_8h.html#a8bb16876590e11ec0ef1af93415b0387aae65115e40f65c745257db62f28f5de9">00643</a>     <a class="code" href="ccn_8h.html#a8bb16876590e11ec0ef1af93415b0387aae65115e40f65c745257db62f28f5de9">CCN_PCO_B_Signature</a>,
<a name="l00644"></a><a class="code" href="ccn_8h.html#a8bb16876590e11ec0ef1af93415b0387af491dbca319567397862ba195d1b8abd">00644</a>     <a class="code" href="ccn_8h.html#a8bb16876590e11ec0ef1af93415b0387af491dbca319567397862ba195d1b8abd">CCN_PCO_B_DigestAlgorithm</a>,
<a name="l00645"></a><a class="code" href="ccn_8h.html#a8bb16876590e11ec0ef1af93415b0387a2e8250563ea6f537d2c26935fca19aeb">00645</a>     <a class="code" href="ccn_8h.html#a8bb16876590e11ec0ef1af93415b0387a2e8250563ea6f537d2c26935fca19aeb">CCN_PCO_E_DigestAlgorithm</a>,
<a name="l00646"></a><a class="code" href="ccn_8h.html#a8bb16876590e11ec0ef1af93415b0387a169592f5d9e8a72704e97a9d772c612a">00646</a>     <a class="code" href="ccn_8h.html#a8bb16876590e11ec0ef1af93415b0387a169592f5d9e8a72704e97a9d772c612a">CCN_PCO_B_Witness</a>,
<a name="l00647"></a><a class="code" href="ccn_8h.html#a8bb16876590e11ec0ef1af93415b0387ad344951a8160b5b7757fd35581ab42e2">00647</a>     <a class="code" href="ccn_8h.html#a8bb16876590e11ec0ef1af93415b0387ad344951a8160b5b7757fd35581ab42e2">CCN_PCO_E_Witness</a>,
<a name="l00648"></a><a class="code" href="ccn_8h.html#a8bb16876590e11ec0ef1af93415b0387aee88d0223840c37a99b7d484e92dc3cf">00648</a>     <a class="code" href="ccn_8h.html#a8bb16876590e11ec0ef1af93415b0387aee88d0223840c37a99b7d484e92dc3cf">CCN_PCO_B_SignatureBits</a>,
<a name="l00649"></a><a class="code" href="ccn_8h.html#a8bb16876590e11ec0ef1af93415b0387a1e53304e16e25ad199ae07302ebe00e7">00649</a>     <a class="code" href="ccn_8h.html#a8bb16876590e11ec0ef1af93415b0387a1e53304e16e25ad199ae07302ebe00e7">CCN_PCO_E_SignatureBits</a>,
<a name="l00650"></a><a class="code" href="ccn_8h.html#a8bb16876590e11ec0ef1af93415b0387ab95e46ef4bc183686bbd073b24bccd4e">00650</a>     <a class="code" href="ccn_8h.html#a8bb16876590e11ec0ef1af93415b0387ab95e46ef4bc183686bbd073b24bccd4e">CCN_PCO_E_Signature</a>,
<a name="l00651"></a><a class="code" href="ccn_8h.html#a8bb16876590e11ec0ef1af93415b0387aff2d3319997f81c4daeddc3b7ffbafa5">00651</a>     <a class="code" href="ccn_8h.html#a8bb16876590e11ec0ef1af93415b0387aff2d3319997f81c4daeddc3b7ffbafa5">CCN_PCO_B_Name</a>,
<a name="l00652"></a><a class="code" href="ccn_8h.html#a8bb16876590e11ec0ef1af93415b0387a06192913062b25cc3c1507d77f27610b">00652</a>     <a class="code" href="ccn_8h.html#a8bb16876590e11ec0ef1af93415b0387a06192913062b25cc3c1507d77f27610b">CCN_PCO_B_Component0</a>,
<a name="l00653"></a><a class="code" href="ccn_8h.html#a8bb16876590e11ec0ef1af93415b0387a6d94b222e64b2fa437909708b9d790a8">00653</a>     <a class="code" href="ccn_8h.html#a8bb16876590e11ec0ef1af93415b0387a6d94b222e64b2fa437909708b9d790a8">CCN_PCO_E_ComponentN</a>,
<a name="l00654"></a><a class="code" href="ccn_8h.html#a8bb16876590e11ec0ef1af93415b0387a2668fd1b7e94a98cc6ee1a2f02c0bd66">00654</a>     <a class="code" href="ccn_8h.html#a8bb16876590e11ec0ef1af93415b0387a2668fd1b7e94a98cc6ee1a2f02c0bd66">CCN_PCO_E_ComponentLast</a> = <a class="code" href="ccn_8h.html#a8bb16876590e11ec0ef1af93415b0387a6d94b222e64b2fa437909708b9d790a8">CCN_PCO_E_ComponentN</a>,
<a name="l00655"></a><a class="code" href="ccn_8h.html#a8bb16876590e11ec0ef1af93415b0387a73f737bfd320d668e312c5466b0e70ae">00655</a>     <a class="code" href="ccn_8h.html#a8bb16876590e11ec0ef1af93415b0387a73f737bfd320d668e312c5466b0e70ae">CCN_PCO_E_Name</a>,
<a name="l00656"></a><a class="code" href="ccn_8h.html#a8bb16876590e11ec0ef1af93415b0387a227917e4ffee91710eba075b7c1a58cb">00656</a>     <a class="code" href="ccn_8h.html#a8bb16876590e11ec0ef1af93415b0387a227917e4ffee91710eba075b7c1a58cb">CCN_PCO_B_SignedInfo</a>,
<a name="l00657"></a><a class="code" href="ccn_8h.html#a8bb16876590e11ec0ef1af93415b0387aad06f2d6d08098bc598d5a301043c7c0">00657</a>     <a class="code" href="ccn_8h.html#a8bb16876590e11ec0ef1af93415b0387aad06f2d6d08098bc598d5a301043c7c0">CCN_PCO_B_PublisherPublicKeyDigest</a>,
<a name="l00658"></a><a class="code" href="ccn_8h.html#a8bb16876590e11ec0ef1af93415b0387a5c0aa12b4ce25e09db3028f98f5ae7e0">00658</a>     <a class="code" href="ccn_8h.html#a8bb16876590e11ec0ef1af93415b0387a5c0aa12b4ce25e09db3028f98f5ae7e0">CCN_PCO_E_PublisherPublicKeyDigest</a>,
<a name="l00659"></a><a class="code" href="ccn_8h.html#a8bb16876590e11ec0ef1af93415b0387a4007a03c4c6c7a0c933d206073d30a90">00659</a>     <a class="code" href="ccn_8h.html#a8bb16876590e11ec0ef1af93415b0387a4007a03c4c6c7a0c933d206073d30a90">CCN_PCO_B_Timestamp</a>,
<a name="l00660"></a><a class="code" href="ccn_8h.html#a8bb16876590e11ec0ef1af93415b0387a5d67ab2115f7097203aae3a2b6894ae5">00660</a>     <a class="code" href="ccn_8h.html#a8bb16876590e11ec0ef1af93415b0387a5d67ab2115f7097203aae3a2b6894ae5">CCN_PCO_E_Timestamp</a>,
<a name="l00661"></a><a class="code" href="ccn_8h.html#a8bb16876590e11ec0ef1af93415b0387a320067cd82f4049ba58f3cfb7dd2f811">00661</a>     <a class="code" href="ccn_8h.html#a8bb16876590e11ec0ef1af93415b0387a320067cd82f4049ba58f3cfb7dd2f811">CCN_PCO_B_Type</a>,
<a name="l00662"></a><a class="code" href="ccn_8h.html#a8bb16876590e11ec0ef1af93415b0387a9c178de6f6d3b13651ad9f80be2b3f53">00662</a>     <a class="code" href="ccn_8h.html#a8bb16876590e11ec0ef1af93415b0387a9c178de6f6d3b13651ad9f80be2b3f53">CCN_PCO_E_Type</a>,
<a name="l00663"></a><a class="code" href="ccn_8h.html#a8bb16876590e11ec0ef1af93415b0387a338b7afeba7699e0cc491572c4bca59b">00663</a>     <a class="code" href="ccn_8h.html#a8bb16876590e11ec0ef1af93415b0387a338b7afeba7699e0cc491572c4bca59b">CCN_PCO_B_FreshnessSeconds</a>,
<a name="l00664"></a><a class="code" href="ccn_8h.html#a8bb16876590e11ec0ef1af93415b0387ae640edd95af9c2477a8bc8a4a645ed32">00664</a>     <a class="code" href="ccn_8h.html#a8bb16876590e11ec0ef1af93415b0387ae640edd95af9c2477a8bc8a4a645ed32">CCN_PCO_E_FreshnessSeconds</a>,
<a name="l00665"></a><a class="code" href="ccn_8h.html#a8bb16876590e11ec0ef1af93415b0387a430043d1637e992d68972dca8e349847">00665</a>     <a class="code" href="ccn_8h.html#a8bb16876590e11ec0ef1af93415b0387a430043d1637e992d68972dca8e349847">CCN_PCO_B_FinalBlockID</a>,
<a name="l00666"></a><a class="code" href="ccn_8h.html#a8bb16876590e11ec0ef1af93415b0387a3324e176405ad15bd5c56205d98dc4c3">00666</a>     <a class="code" href="ccn_8h.html#a8bb16876590e11ec0ef1af93415b0387a3324e176405ad15bd5c56205d98dc4c3">CCN_PCO_E_FinalBlockID</a>,
<a name="l00667"></a><a class="code" href="ccn_8h.html#a8bb16876590e11ec0ef1af93415b0387a937f30ec7e7f94e411fcf4e7db276c2b">00667</a>     <a class="code" href="ccn_8h.html#a8bb16876590e11ec0ef1af93415b0387a937f30ec7e7f94e411fcf4e7db276c2b">CCN_PCO_B_KeyLocator</a>,
<a name="l00668"></a>00668     <span class="comment">/* Exactly one of Key, Certificate, or KeyName will be present */</span>
<a name="l00669"></a><a class="code" href="ccn_8h.html#a8bb16876590e11ec0ef1af93415b0387a7bac57aa1a3a77666556d64af172f0e2">00669</a>     <a class="code" href="ccn_8h.html#a8bb16876590e11ec0ef1af93415b0387a7bac57aa1a3a77666556d64af172f0e2">CCN_PCO_B_Key_Certificate_KeyName</a>,
<a name="l00670"></a><a class="code" href="ccn_8h.html#a8bb16876590e11ec0ef1af93415b0387ae19e9aa1067305641338667f13e7c827">00670</a>     <a class="code" href="ccn_8h.html#a8bb16876590e11ec0ef1af93415b0387ae19e9aa1067305641338667f13e7c827">CCN_PCO_B_KeyName_Name</a>,
<a name="l00671"></a><a class="code" href="ccn_8h.html#a8bb16876590e11ec0ef1af93415b0387adf82b30b50dd50fbb429b525ec0ece79">00671</a>     <a class="code" href="ccn_8h.html#a8bb16876590e11ec0ef1af93415b0387adf82b30b50dd50fbb429b525ec0ece79">CCN_PCO_E_KeyName_Name</a>,
<a name="l00672"></a><a class="code" href="ccn_8h.html#a8bb16876590e11ec0ef1af93415b0387a5d93359cb710dcf121388a99108af2e8">00672</a>     <a class="code" href="ccn_8h.html#a8bb16876590e11ec0ef1af93415b0387a5d93359cb710dcf121388a99108af2e8">CCN_PCO_B_KeyName_Pub</a>,
<a name="l00673"></a><a class="code" href="ccn_8h.html#a8bb16876590e11ec0ef1af93415b0387ae8875d2a96fe53b0dcb8ed00d5eee812">00673</a>     <a class="code" href="ccn_8h.html#a8bb16876590e11ec0ef1af93415b0387ae8875d2a96fe53b0dcb8ed00d5eee812">CCN_PCO_E_KeyName_Pub</a>,
<a name="l00674"></a><a class="code" href="ccn_8h.html#a8bb16876590e11ec0ef1af93415b0387aa57b3cb991a03dd6a8e46bd077b4cfe1">00674</a>     <a class="code" href="ccn_8h.html#a8bb16876590e11ec0ef1af93415b0387aa57b3cb991a03dd6a8e46bd077b4cfe1">CCN_PCO_E_Key_Certificate_KeyName</a>,
<a name="l00675"></a><a class="code" href="ccn_8h.html#a8bb16876590e11ec0ef1af93415b0387a0ffbf1a28a3cd7dc8e23500f3c1941a8">00675</a>     <a class="code" href="ccn_8h.html#a8bb16876590e11ec0ef1af93415b0387a0ffbf1a28a3cd7dc8e23500f3c1941a8">CCN_PCO_E_KeyLocator</a>,
<a name="l00676"></a><a class="code" href="ccn_8h.html#a8bb16876590e11ec0ef1af93415b0387a39ab54c63a11ad212165a9ba6cc6b676">00676</a>     <a class="code" href="ccn_8h.html#a8bb16876590e11ec0ef1af93415b0387a39ab54c63a11ad212165a9ba6cc6b676">CCN_PCO_B_ExtOpt</a>,
<a name="l00677"></a><a class="code" href="ccn_8h.html#a8bb16876590e11ec0ef1af93415b0387a95cfa63cba55790b81cd1044c392d44f">00677</a>     <a class="code" href="ccn_8h.html#a8bb16876590e11ec0ef1af93415b0387a95cfa63cba55790b81cd1044c392d44f">CCN_PCO_E_ExtOpt</a>,
<a name="l00678"></a><a class="code" href="ccn_8h.html#a8bb16876590e11ec0ef1af93415b0387a683027f393128bb5f171854c663e1193">00678</a>     <a class="code" href="ccn_8h.html#a8bb16876590e11ec0ef1af93415b0387a683027f393128bb5f171854c663e1193">CCN_PCO_E_SignedInfo</a>,
<a name="l00679"></a><a class="code" href="ccn_8h.html#a8bb16876590e11ec0ef1af93415b0387adcd495b5bdd02ccb3679ab3808b3a7c9">00679</a>     <a class="code" href="ccn_8h.html#a8bb16876590e11ec0ef1af93415b0387adcd495b5bdd02ccb3679ab3808b3a7c9">CCN_PCO_B_Content</a>,
<a name="l00680"></a><a class="code" href="ccn_8h.html#a8bb16876590e11ec0ef1af93415b0387ad17e965ebbdde723eb20d4f9484ecb3c">00680</a>     <a class="code" href="ccn_8h.html#a8bb16876590e11ec0ef1af93415b0387ad17e965ebbdde723eb20d4f9484ecb3c">CCN_PCO_E_Content</a>,
<a name="l00681"></a><a class="code" href="ccn_8h.html#a8bb16876590e11ec0ef1af93415b0387a1d25adf694c64b4ae597b26abe6b30fc">00681</a>     <a class="code" href="ccn_8h.html#a8bb16876590e11ec0ef1af93415b0387a1d25adf694c64b4ae597b26abe6b30fc">CCN_PCO_E</a>
<a name="l00682"></a>00682 };
<a name="l00683"></a>00683 
<a name="l00684"></a><a class="code" href="structccn__parsed___content_object.html">00684</a> <span class="keyword">struct </span><a class="code" href="structccn__parsed___content_object.html">ccn_parsed_ContentObject</a> {
<a name="l00685"></a><a class="code" href="structccn__parsed___content_object.html#aa3dabaff100456ecd245fbebc3e5edec">00685</a>     <span class="keywordtype">int</span> <a class="code" href="structccn__parsed___content_object.html#aa3dabaff100456ecd245fbebc3e5edec">magic</a>;
<a name="l00686"></a><a class="code" href="structccn__parsed___content_object.html#a95f6fd64d36fcc6fee3d2770c9cc2ac7">00686</a>     <span class="keyword">enum</span> <a class="code" href="ccn_8h.html#a5ac452b850189ae724c4ff89ae81c702">ccn_content_type</a> <a class="code" href="structccn__parsed___content_object.html#a95f6fd64d36fcc6fee3d2770c9cc2ac7">type</a>;
<a name="l00687"></a><a class="code" href="structccn__parsed___content_object.html#a28c648bcb38d7c2839a708b485cf8776">00687</a>     <span class="keywordtype">int</span> <a class="code" href="structccn__parsed___content_object.html#a28c648bcb38d7c2839a708b485cf8776">name_ncomps</a>;
<a name="l00688"></a><a class="code" href="structccn__parsed___content_object.html#a9812a65809374954710cb98556230d19">00688</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <a class="code" href="structccn__parsed___content_object.html#a9812a65809374954710cb98556230d19">offset</a>[<a class="code" href="ccn_8h.html#a8bb16876590e11ec0ef1af93415b0387a1d25adf694c64b4ae597b26abe6b30fc">CCN_PCO_E</a>+1];
<a name="l00689"></a><a class="code" href="structccn__parsed___content_object.html#a2e8fa103339de2a45cc133cf5ba33090">00689</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="structccn__parsed___content_object.html#a2e8fa103339de2a45cc133cf5ba33090">digest</a>[32];   <span class="comment">/* Computed only when needed */</span>
<a name="l00690"></a><a class="code" href="structccn__parsed___content_object.html#af85953905c72f474e5e63f76a63187bd">00690</a>     <span class="keywordtype">int</span> <a class="code" href="structccn__parsed___content_object.html#af85953905c72f474e5e63f76a63187bd">digest_bytes</a>;
<a name="l00691"></a>00691 };
<a name="l00692"></a>00692 
<a name="l00693"></a>00693 <span class="comment">/*</span>
<a name="l00694"></a>00694 <span class="comment"> * ccn_parse_ContentObject:</span>
<a name="l00695"></a>00695 <span class="comment"> * Returns 0, or a negative value for an error.</span>
<a name="l00696"></a>00696 <span class="comment"> * Fills in *x with offsets of constituent elements.</span>
<a name="l00697"></a>00697 <span class="comment"> * If components is not NULL, it is filled with byte indexes</span>
<a name="l00698"></a>00698 <span class="comment"> * of the start of each Component of the Name of the ContentObject,</span>
<a name="l00699"></a>00699 <span class="comment"> * plus one additional value for the index of the end of the last component.</span>
<a name="l00700"></a>00700 <span class="comment"> * Sets x-&gt;digest_bytes to 0; the digest is computed lazily by calling</span>
<a name="l00701"></a>00701 <span class="comment"> * ccn_digest_ContentObject.</span>
<a name="l00702"></a>00702 <span class="comment"> */</span>
<a name="l00703"></a>00703 <span class="keywordtype">int</span> <a class="code" href="ccn_8h.html#a464e10bcdb62aa8821df3ce27eb8c5aa">ccn_parse_ContentObject</a>(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *msg, <span class="keywordtype">size_t</span> size,
<a name="l00704"></a>00704                             <span class="keyword">struct</span> <a class="code" href="structccn__parsed___content_object.html">ccn_parsed_ContentObject</a> *x,
<a name="l00705"></a>00705                             <span class="keyword">struct</span> <a class="code" href="structccn__indexbuf.html">ccn_indexbuf</a> *components);
<a name="l00706"></a>00706 
<a name="l00707"></a>00707 <span class="keywordtype">void</span> <a class="code" href="ccn_8h.html#aa8848c4dbbfa772b1b870d434d764166" title="Compute the digest of the entire ContentObject if necessary, caching the result in...">ccn_digest_ContentObject</a>(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *msg,
<a name="l00708"></a>00708                               <span class="keyword">struct</span> <a class="code" href="structccn__parsed___content_object.html">ccn_parsed_ContentObject</a> *pc);
<a name="l00709"></a>00709 
<a name="l00710"></a>00710 <span class="comment">/*</span>
<a name="l00711"></a>00711 <span class="comment"> * ccn_parse_Name: Parses a ccnb-encoded name</span>
<a name="l00712"></a>00712 <span class="comment"> * components may be NULL, otherwise is filled in with Component boundary offsets</span>
<a name="l00713"></a>00713 <span class="comment"> * Returns the number of Components in the Name, or -1 if there is an error.</span>
<a name="l00714"></a>00714 <span class="comment"> */</span>
<a name="l00715"></a>00715 <span class="keywordtype">int</span> <a class="code" href="ccn_8h.html#a0991323fcfa9202fd34db25fd4f65485" title="Parses a ccnb-encoded name.">ccn_parse_Name</a>(<span class="keyword">struct</span> <a class="code" href="structccn__buf__decoder.html">ccn_buf_decoder</a> *d, <span class="keyword">struct</span> <a class="code" href="structccn__indexbuf.html">ccn_indexbuf</a> *components);
<a name="l00716"></a>00716 
<a name="l00717"></a>00717 <span class="comment">/*</span>
<a name="l00718"></a>00718 <span class="comment"> * ccn_compare_names:</span>
<a name="l00719"></a>00719 <span class="comment"> * Returns a value that is negative, zero, or positive depending upon whether</span>
<a name="l00720"></a>00720 <span class="comment"> * the Name element of a is less, equal, or greater than the Name element of b.</span>
<a name="l00721"></a>00721 <span class="comment"> * a and b may point to the start of ccnb-encoded elements of type Name,</span>
<a name="l00722"></a>00722 <span class="comment"> * Interest, or ContentObject.  The size values should be large enough to</span>
<a name="l00723"></a>00723 <span class="comment"> * encompass the entire Name element.</span>
<a name="l00724"></a>00724 <span class="comment"> * The ordering used is the canonical ordering of the ccn name hierarchy.</span>
<a name="l00725"></a>00725 <span class="comment"> */</span>
<a name="l00726"></a>00726 <span class="keywordtype">int</span> <a class="code" href="ccn_8h.html#a51eecb6e851286d46246101d2ea4b51b">ccn_compare_names</a>(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *a, <span class="keywordtype">size_t</span> asize,
<a name="l00727"></a>00727                       <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *b, <span class="keywordtype">size_t</span> bsize);
<a name="l00728"></a>00728 
<a name="l00729"></a>00729 <span class="comment">/***********************************</span>
<a name="l00730"></a>00730 <span class="comment"> * Reading Names:</span>
<a name="l00731"></a>00731 <span class="comment"> * Names may be (minimally) read using the following routines,</span>
<a name="l00732"></a>00732 <span class="comment"> * based on the component boundary markers generated from a parse.</span>
<a name="l00733"></a>00733 <span class="comment"> */</span>
<a name="l00734"></a>00734 
<a name="l00735"></a>00735 <span class="comment">/*</span>
<a name="l00736"></a>00736 <span class="comment"> * ccn_indexbuf_comp_strcmp: perform strcmp of given val against </span>
<a name="l00737"></a>00737 <span class="comment"> * name component at given index i (counting from 0).</span>
<a name="l00738"></a>00738 <span class="comment"> * Uses conventional string ordering, not the canonical CCNx ordering.</span>
<a name="l00739"></a>00739 <span class="comment"> * Returns negative, 0, or positive if val is less than, equal to,</span>
<a name="l00740"></a>00740 <span class="comment"> * or greater than the component.</span>
<a name="l00741"></a>00741 <span class="comment"> * Safe even on binary components, though the result may not be useful.</span>
<a name="l00742"></a>00742 <span class="comment"> * NOTE - this ordering is different from the canonical ordering</span>
<a name="l00743"></a>00743 <span class="comment"> * used by ccn_compare_names();</span>
<a name="l00744"></a>00744 <span class="comment"> */</span>
<a name="l00745"></a>00745 <span class="keywordtype">int</span> <a class="code" href="ccn_8h.html#a8b35775b22257b33832776c661e8b39a">ccn_name_comp_strcmp</a>(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *data,
<a name="l00746"></a>00746                          <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structccn__indexbuf.html">ccn_indexbuf</a> *indexbuf,
<a name="l00747"></a>00747                          <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i,
<a name="l00748"></a>00748                          <span class="keyword">const</span> <span class="keywordtype">char</span> *val);
<a name="l00749"></a>00749 
<a name="l00750"></a>00750 <span class="comment">/*</span>
<a name="l00751"></a>00751 <span class="comment"> * ccn_name_comp_get: return a pointer to and size of component at</span>
<a name="l00752"></a>00752 <span class="comment"> * given index i.  The first component is index 0.</span>
<a name="l00753"></a>00753 <span class="comment"> */</span>
<a name="l00754"></a>00754 <span class="keywordtype">int</span> <a class="code" href="ccn_8h.html#a70c13909ea45ffb1069916d7a512fdda" title="Extract a pointer to and size of component at given index i.">ccn_name_comp_get</a>(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *data,
<a name="l00755"></a>00755                       <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structccn__indexbuf.html">ccn_indexbuf</a> *indexbuf,
<a name="l00756"></a>00756                       <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i,
<a name="l00757"></a>00757                       <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> **comp, <span class="keywordtype">size_t</span> *size);
<a name="l00758"></a>00758 
<a name="l00759"></a>00759 <span class="keywordtype">int</span> <a class="code" href="ccn_8h.html#af81a071aeb0de5f014552e137fc2444a" title="Advance the last Component of a Name to the next possible value.">ccn_name_next_sibling</a>(<span class="keyword">struct</span> <a class="code" href="structccn__charbuf.html">ccn_charbuf</a> *c);
<a name="l00760"></a>00760 
<a name="l00761"></a>00761 <span class="comment">/***********************************</span>
<a name="l00762"></a>00762 <span class="comment"> * Reading content objects</span>
<a name="l00763"></a>00763 <span class="comment"> */</span>
<a name="l00764"></a>00764 
<a name="l00765"></a>00765 <span class="keywordtype">int</span> <a class="code" href="ccn_8h.html#ac3a7a8cad96caf34fc73240b20f07cd2">ccn_content_get_value</a>(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *data, <span class="keywordtype">size_t</span> data_size,
<a name="l00766"></a>00766                           <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structccn__parsed___content_object.html">ccn_parsed_ContentObject</a> *content,
<a name="l00767"></a>00767                           <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> **value, <span class="keywordtype">size_t</span> *size);
<a name="l00768"></a>00768 
<a name="l00769"></a>00769 <span class="comment">/* checking for final block given upcall info */</span>
<a name="l00770"></a>00770 <span class="keywordtype">int</span> <a class="code" href="ccn_8h.html#ad0c040bf9d94a14c2749fb21e6024857" title="Check whether content described by info is final block.">ccn_is_final_block</a>(<span class="keyword">struct</span> <a class="code" href="structccn__upcall__info.html" title="Additional information provided in the upcall.">ccn_upcall_info</a> *info);
<a name="l00771"></a>00771 
<a name="l00772"></a>00772 <span class="comment">/* checking for final block given parsed content object */</span>
<a name="l00773"></a>00773 <span class="keywordtype">int</span> <a class="code" href="ccn_8h.html#a7a69e02d715e2b652c4565de0f698d2f" title="Given a ccnb encoded content object, the parsed form, and name components report...">ccn_is_final_pco</a>(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *ccnb,
<a name="l00774"></a>00774                      <span class="keyword">struct</span> <a class="code" href="structccn__parsed___content_object.html">ccn_parsed_ContentObject</a> *pco,
<a name="l00775"></a>00775                      <span class="keyword">struct</span> <a class="code" href="structccn__indexbuf.html">ccn_indexbuf</a> *comps);
<a name="l00776"></a>00776 
<a name="l00777"></a>00777 <span class="comment">/* content-object signing */</span>
<a name="l00778"></a>00778 <span class="comment"></span>
<a name="l00779"></a>00779 <span class="comment">/**</span>
<a name="l00780"></a>00780 <span class="comment"> * Parameters for creating signed content objects.</span>
<a name="l00781"></a>00781 <span class="comment"> *</span>
<a name="l00782"></a>00782 <span class="comment"> * A pointer to one of these may be passed to ccn_sign_content() for</span>
<a name="l00783"></a>00783 <span class="comment"> * cases where the default signing behavior does not suffice.</span>
<a name="l00784"></a>00784 <span class="comment"> * For the default (sign with the user&#39;s default key pair), pass NULL</span>
<a name="l00785"></a>00785 <span class="comment"> * for the pointer.</span>
<a name="l00786"></a>00786 <span class="comment"> *</span>
<a name="l00787"></a>00787 <span class="comment"> * The recommended way to us this is to create a local variable:</span>
<a name="l00788"></a>00788 <span class="comment"> *</span>
<a name="l00789"></a>00789 <span class="comment"> *   struct ccn_signing_params myparams = CCN_SIGNING_PARAMS_INIT;</span>
<a name="l00790"></a>00790 <span class="comment"> *</span>
<a name="l00791"></a>00791 <span class="comment"> * and then fill in the desired fields.  This way if additional parameters</span>
<a name="l00792"></a>00792 <span class="comment"> * are added, it won&#39;t be necessary to go back and modify exiting clients.</span>
<a name="l00793"></a>00793 <span class="comment"> * </span>
<a name="l00794"></a>00794 <span class="comment"> * The template_ccnb may contain a ccnb-encoded SignedInfo to supply</span>
<a name="l00795"></a>00795 <span class="comment"> * selected fields from under the direction of sp_flags.</span>
<a name="l00796"></a>00796 <span class="comment"> * It is permitted to omit unneeded fields from the template, even if the</span>
<a name="l00797"></a>00797 <span class="comment"> * schema says they are manditory.</span>
<a name="l00798"></a>00798 <span class="comment"> *</span>
<a name="l00799"></a>00799 <span class="comment"> * If the pubid is all zero, the user&#39;s default key pair is used for</span>
<a name="l00800"></a>00800 <span class="comment"> * signing.  Otherwise the corresponding private key must have already</span>
<a name="l00801"></a>00801 <span class="comment"> * been supplied to the handle using ccn_load_private_key() or equivalent.</span>
<a name="l00802"></a>00802 <span class="comment"> *</span>
<a name="l00803"></a>00803 <span class="comment"> * The default signing key is obtained from ~/.ccnx/.ccnx_keystore unless</span>
<a name="l00804"></a>00804 <span class="comment"> * the CCNX_DIR is used to override the directory location.</span>
<a name="l00805"></a>00805 <span class="comment"> */</span>
<a name="l00806"></a>00806  
<a name="l00807"></a><a class="code" href="structccn__signing__params.html">00807</a> <span class="keyword">struct </span><a class="code" href="structccn__signing__params.html" title="Parameters for creating signed content objects.">ccn_signing_params</a> {
<a name="l00808"></a><a class="code" href="structccn__signing__params.html#a0fd970ca78f2f61542022069a809630b">00808</a>     <span class="keywordtype">int</span> <a class="code" href="structccn__signing__params.html#a0fd970ca78f2f61542022069a809630b">api_version</a>;
<a name="l00809"></a><a class="code" href="structccn__signing__params.html#a2b9c1f834abea9bd43f1d901e852802e">00809</a>     <span class="keywordtype">int</span> <a class="code" href="structccn__signing__params.html#a2b9c1f834abea9bd43f1d901e852802e">sp_flags</a>;
<a name="l00810"></a><a class="code" href="structccn__signing__params.html#a5feb999d270877e7b926d9a917f296a2">00810</a>     <span class="keyword">struct </span><a class="code" href="structccn__charbuf.html">ccn_charbuf</a> *<a class="code" href="structccn__signing__params.html#a5feb999d270877e7b926d9a917f296a2">template_ccnb</a>;
<a name="l00811"></a><a class="code" href="structccn__signing__params.html#a0a03cda1c779bf7856ab985d792681db">00811</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="structccn__signing__params.html#a0a03cda1c779bf7856ab985d792681db">pubid</a>[32];
<a name="l00812"></a><a class="code" href="structccn__signing__params.html#a4816531af13fcf3981ea44bf2d4c9b2f">00812</a>     <span class="keyword">enum</span> <a class="code" href="ccn_8h.html#a5ac452b850189ae724c4ff89ae81c702">ccn_content_type</a> <a class="code" href="structccn__signing__params.html#a4816531af13fcf3981ea44bf2d4c9b2f">type</a>;
<a name="l00813"></a><a class="code" href="structccn__signing__params.html#a768c61b9b4e01e677bcd89f6be350367">00813</a>     <span class="keywordtype">int</span> <a class="code" href="structccn__signing__params.html#a768c61b9b4e01e677bcd89f6be350367">freshness</a>;
<a name="l00814"></a>00814     <span class="comment">// XXX where should digest_algorithm fit in?</span>
<a name="l00815"></a>00815 };
<a name="l00816"></a>00816 
<a name="l00817"></a><a class="code" href="ccn_8h.html#a4ff046ac820ac0f2ef6acb912a03b328">00817</a> <span class="preprocessor">#define CCN_SIGNING_PARAMS_INIT \</span>
<a name="l00818"></a>00818 <span class="preprocessor">  { CCN_API_VERSION, 0, NULL, {0}, CCN_CONTENT_DATA, -1 }</span>
<a name="l00819"></a>00819 <span class="preprocessor"></span>
<a name="l00820"></a><a class="code" href="ccn_8h.html#a404524db7af5360092c6a78bd0754645">00820</a> <span class="preprocessor">#define CCN_SP_TEMPL_TIMESTAMP      0x0001</span>
<a name="l00821"></a><a class="code" href="ccn_8h.html#a0c926290dc80a2358fdf33aa100af220">00821</a> <span class="preprocessor"></span><span class="preprocessor">#define CCN_SP_TEMPL_FINAL_BLOCK_ID 0x0002</span>
<a name="l00822"></a><a class="code" href="ccn_8h.html#ac6a0af95aae4da7a67b21c5583880a82">00822</a> <span class="preprocessor"></span><span class="preprocessor">#define CCN_SP_TEMPL_FRESHNESS      0x0004</span>
<a name="l00823"></a><a class="code" href="ccn_8h.html#a67706be4cfcbc355e6f429ed0ec6b2e7">00823</a> <span class="preprocessor"></span><span class="preprocessor">#define CCN_SP_TEMPL_KEY_LOCATOR    0x0008</span>
<a name="l00824"></a><a class="code" href="ccn_8h.html#abff51f3f313d457fbcc13006343fdd28">00824</a> <span class="preprocessor"></span><span class="preprocessor">#define CCN_SP_FINAL_BLOCK          0x0010</span>
<a name="l00825"></a><a class="code" href="ccn_8h.html#aa92fd3a427296bf2e899f11e22127e7e">00825</a> <span class="preprocessor"></span><span class="preprocessor">#define CCN_SP_OMIT_KEY_LOCATOR     0x0020</span>
<a name="l00826"></a><a class="code" href="ccn_8h.html#aa36fffe55891338e92e0d4a3f581a857">00826</a> <span class="preprocessor"></span><span class="preprocessor">#define CCN_SP_TEMPL_EXT_OPT        0x0040</span>
<a name="l00827"></a>00827 <span class="preprocessor"></span>
<a name="l00828"></a>00828 <span class="keywordtype">int</span> <a class="code" href="ccn_8h.html#a95240bd470b549c89a5e0fd72fa34d45" title="Create a signed ContentObject.">ccn_sign_content</a>(<span class="keyword">struct</span> ccn *h,
<a name="l00829"></a>00829                      <span class="keyword">struct</span> <a class="code" href="structccn__charbuf.html">ccn_charbuf</a> *resultbuf,
<a name="l00830"></a>00830                      <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structccn__charbuf.html">ccn_charbuf</a> *name_prefix,
<a name="l00831"></a>00831                      <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structccn__signing__params.html" title="Parameters for creating signed content objects.">ccn_signing_params</a> *params,
<a name="l00832"></a>00832                      <span class="keyword">const</span> <span class="keywordtype">void</span> *data, <span class="keywordtype">size_t</span> size);
<a name="l00833"></a>00833 
<a name="l00834"></a>00834 <span class="keywordtype">int</span> <a class="code" href="ccn_8h.html#a1687e80107ea56e47121dcc9f3ad0b9c" title="Load a private key from a keystore file.">ccn_load_private_key</a>(<span class="keyword">struct</span> ccn *h,
<a name="l00835"></a>00835                          <span class="keyword">const</span> <span class="keywordtype">char</span> *keystore_path,
<a name="l00836"></a>00836                          <span class="keyword">const</span> <span class="keywordtype">char</span> *keystore_passphrase,
<a name="l00837"></a>00837                          <span class="keyword">struct</span> <a class="code" href="structccn__charbuf.html">ccn_charbuf</a> *pubid_out);
<a name="l00838"></a>00838 
<a name="l00839"></a>00839 <span class="keywordtype">int</span> <a class="code" href="ccn_8h.html#a84e164010a78b31d5a4631dc50168f63" title="Load the handle&amp;#39;s default signing key from a keystore.">ccn_load_default_key</a>(<span class="keyword">struct</span> ccn *h,
<a name="l00840"></a>00840                          <span class="keyword">const</span> <span class="keywordtype">char</span> *keystore_path,
<a name="l00841"></a>00841                          <span class="keyword">const</span> <span class="keywordtype">char</span> *keystore_passphrase);
<a name="l00842"></a>00842 
<a name="l00843"></a>00843 <span class="keywordtype">int</span> <a class="code" href="ccn_8h.html#ae7ae6fdd5d2582c9fd343c7ba8cd9fbc" title="Place the public key associated with the params into result buffer, and its digest...">ccn_get_public_key</a>(<span class="keyword">struct</span> ccn *h,
<a name="l00844"></a>00844                        <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structccn__signing__params.html" title="Parameters for creating signed content objects.">ccn_signing_params</a> *params,
<a name="l00845"></a>00845                        <span class="keyword">struct</span> <a class="code" href="structccn__charbuf.html">ccn_charbuf</a> *digest_result,
<a name="l00846"></a>00846                        <span class="keyword">struct</span> <a class="code" href="structccn__charbuf.html">ccn_charbuf</a> *result);
<a name="l00847"></a>00847 
<a name="l00848"></a>00848 <span class="keywordtype">int</span> <a class="code" href="ccn_8h.html#a3fad8da4139732b27be40706356ec446" title="This is mostly for use within the library, but may be useful for some clients.">ccn_chk_signing_params</a>(<span class="keyword">struct</span> ccn *h,
<a name="l00849"></a>00849                            <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structccn__signing__params.html" title="Parameters for creating signed content objects.">ccn_signing_params</a> *params,
<a name="l00850"></a>00850                            <span class="keyword">struct</span> <a class="code" href="structccn__signing__params.html" title="Parameters for creating signed content objects.">ccn_signing_params</a> *result,
<a name="l00851"></a>00851                            <span class="keyword">struct</span> <a class="code" href="structccn__charbuf.html">ccn_charbuf</a> **ptimestamp,
<a name="l00852"></a>00852                            <span class="keyword">struct</span> <a class="code" href="structccn__charbuf.html">ccn_charbuf</a> **pfinalblockid,
<a name="l00853"></a>00853                            <span class="keyword">struct</span> <a class="code" href="structccn__charbuf.html">ccn_charbuf</a> **pkeylocator,
<a name="l00854"></a>00854                            <span class="keyword">struct</span> <a class="code" href="structccn__charbuf.html">ccn_charbuf</a> **pextopt);
<a name="l00855"></a>00855 
<a name="l00856"></a>00856 <span class="comment">/* low-level content-object signing */</span>
<a name="l00857"></a>00857 
<a name="l00858"></a><a class="code" href="ccn_8h.html#a0863b9b89135f5d2488f6be44378a717">00858</a> <span class="preprocessor">#define CCN_SIGNING_DEFAULT_DIGEST_ALGORITHM &quot;SHA256&quot;</span>
<a name="l00859"></a>00859 <span class="preprocessor"></span>
<a name="l00860"></a>00860 <span class="keywordtype">int</span> <a class="code" href="ccn_8h.html#a4b792d695de5e7664ffe17b5fc79e6ee" title="Create SignedInfo.">ccn_signed_info_create</a>(
<a name="l00861"></a>00861     <span class="keyword">struct</span> <a class="code" href="structccn__charbuf.html">ccn_charbuf</a> *c,              <span class="comment">/* filled with result */</span>
<a name="l00862"></a>00862     <span class="keyword">const</span> <span class="keywordtype">void</span> *publisher_key_id,       <span class="comment">/* input, (sha256) hash */</span>
<a name="l00863"></a>00863     <span class="keywordtype">size_t</span> publisher_key_id_size,       <span class="comment">/* input, 32 for sha256 hashes */</span>
<a name="l00864"></a>00864     <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structccn__charbuf.html">ccn_charbuf</a> *timestamp,<span class="comment">/* input ccnb blob, NULL for &quot;now&quot; */</span>
<a name="l00865"></a>00865     <span class="keyword">enum</span> <a class="code" href="ccn_8h.html#a5ac452b850189ae724c4ff89ae81c702">ccn_content_type</a> type,         <span class="comment">/* input */</span>
<a name="l00866"></a>00866     <span class="keywordtype">int</span> <a class="code" href="ccnc_8c.html#a332b90542523ea1c7f6bd20194fa87d3">freshness</a>,                      <span class="comment">/* input, -1 means omit */</span>
<a name="l00867"></a>00867     <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structccn__charbuf.html">ccn_charbuf</a> *finalblockid, <span class="comment">/* input, NULL means omit */</span>
<a name="l00868"></a>00868     <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structccn__charbuf.html">ccn_charbuf</a> *key_locator); <span class="comment">/* input, optional, ccnb encoded */</span>
<a name="l00869"></a>00869 
<a name="l00870"></a>00870 <span class="keywordtype">int</span> <a class="code" href="ccn_8h.html#a4f098bd83d6b576455bd62b6a3233492" title="Encode and sign a ContentObject.">ccn_encode_ContentObject</a>(<span class="keyword">struct</span> <a class="code" href="structccn__charbuf.html">ccn_charbuf</a> *<a class="code" href="structccn__charbuf.html#af24075ee3911a992d0dda6f449f3b3b3">buf</a>,
<a name="l00871"></a>00871                              <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structccn__charbuf.html">ccn_charbuf</a> *Name,
<a name="l00872"></a>00872                              <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structccn__charbuf.html">ccn_charbuf</a> *SignedInfo,
<a name="l00873"></a>00873                              <span class="keyword">const</span> <span class="keywordtype">void</span> *data,
<a name="l00874"></a>00874                              <span class="keywordtype">size_t</span> size,
<a name="l00875"></a>00875                              <span class="keyword">const</span> <span class="keywordtype">char</span> *digest_algorithm,
<a name="l00876"></a>00876                              <span class="keyword">const</span> <span class="keyword">struct</span> ccn_pkey *private_key);
<a name="l00877"></a>00877 
<a name="l00878"></a>00878 <span class="comment">/***********************************</span>
<a name="l00879"></a>00879 <span class="comment"> * Matching</span>
<a name="l00880"></a>00880 <span class="comment"> */</span>
<a name="l00881"></a>00881 
<a name="l00882"></a>00882 
<a name="l00883"></a>00883 <span class="comment">/*</span>
<a name="l00884"></a>00884 <span class="comment"> * ccn_content_matches_interest: Test for a match</span>
<a name="l00885"></a>00885 <span class="comment"> * Return 1 if the ccnb-encoded content_object matches the </span>
<a name="l00886"></a>00886 <span class="comment"> * ccnb-encoded interest_msg, otherwise 0.</span>
<a name="l00887"></a>00887 <span class="comment"> * The implicit_content_digest boolean says whether or not the</span>
<a name="l00888"></a>00888 <span class="comment"> * final name component is implicit (as in the on-wire format)</span>
<a name="l00889"></a>00889 <span class="comment"> * or explicit (as within ccnd&#39;s content store).</span>
<a name="l00890"></a>00890 <span class="comment"> * Valid parse information (pc and pi) may be provided to speed things</span>
<a name="l00891"></a>00891 <span class="comment"> * up; if NULL they will be reconstructed internally.</span>
<a name="l00892"></a>00892 <span class="comment"> */</span>
<a name="l00893"></a>00893 <span class="keywordtype">int</span> <a class="code" href="ccn_8h.html#a2e161e1c17ef110dfa019bc1d560c82c" title="Test for a match between a ContentObject and an Interest.">ccn_content_matches_interest</a>(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *content_object,
<a name="l00894"></a>00894                                  <span class="keywordtype">size_t</span> content_object_size,
<a name="l00895"></a>00895                                  <span class="keywordtype">int</span> implicit_content_digest,
<a name="l00896"></a>00896                                  <span class="keyword">struct</span> <a class="code" href="structccn__parsed___content_object.html">ccn_parsed_ContentObject</a> *pc,
<a name="l00897"></a>00897                                  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *interest_msg,
<a name="l00898"></a>00898                                  <span class="keywordtype">size_t</span> interest_msg_size,
<a name="l00899"></a>00899                                  <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structccn__parsed__interest.html">ccn_parsed_interest</a> *pi);
<a name="l00900"></a>00900 
<a name="l00901"></a>00901 <span class="comment">/*</span>
<a name="l00902"></a>00902 <span class="comment"> * Test whether the given raw name is int the Exclude set.</span>
<a name="l00903"></a>00903 <span class="comment"> */</span>
<a name="l00904"></a>00904 <span class="keywordtype">int</span> <a class="code" href="ccn_8h.html#a6798296ca78192d0aad45e802effb9cf" title="Test for a match between a next component and an exclusion clause.">ccn_excluded</a>(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *excl,
<a name="l00905"></a>00905                  <span class="keywordtype">size_t</span> excl_size,
<a name="l00906"></a>00906                  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *nextcomp,
<a name="l00907"></a>00907                  <span class="keywordtype">size_t</span> nextcomp_size);
<a name="l00908"></a>00908 
<a name="l00909"></a>00909 <span class="comment">/***********************************</span>
<a name="l00910"></a>00910 <span class="comment"> * StatusResponse</span>
<a name="l00911"></a>00911 <span class="comment"> */</span>
<a name="l00912"></a>00912 <span class="keywordtype">int</span> <a class="code" href="ccn_8h.html#ab851333b974a4d077f99a6f44f55a1b0">ccn_encode_StatusResponse</a>(<span class="keyword">struct</span> <a class="code" href="structccn__charbuf.html">ccn_charbuf</a> *<a class="code" href="structccn__charbuf.html#af24075ee3911a992d0dda6f449f3b3b3">buf</a>,
<a name="l00913"></a>00913                               <span class="keywordtype">int</span> errcode, <span class="keyword">const</span> <span class="keywordtype">char</span> *errtext);
<a name="l00914"></a>00914 
<a name="l00915"></a>00915 <span class="comment">/***********************************</span>
<a name="l00916"></a>00916 <span class="comment"> * Debugging</span>
<a name="l00917"></a>00917 <span class="comment"> */</span>
<a name="l00918"></a>00918 
<a name="l00919"></a>00919 <span class="comment">/*</span>
<a name="l00920"></a>00920 <span class="comment"> * ccn_perror: produce message on standard error output describing the last</span>
<a name="l00921"></a>00921 <span class="comment"> * error encountered during a call using the given handle.</span>
<a name="l00922"></a>00922 <span class="comment"> * ccn_seterror records error info, ccn_geterror gets it.</span>
<a name="l00923"></a>00923 <span class="comment"> */</span>
<a name="l00924"></a>00924 <span class="keywordtype">void</span> <a class="code" href="ccn_8h.html#a7d67184b81f3d5128f76c5e04d80e4d2" title="Produce message on standard error output describing the last error encountered during...">ccn_perror</a>(<span class="keyword">struct</span> ccn *h, <span class="keyword">const</span> <span class="keywordtype">char</span> *s);
<a name="l00925"></a>00925 <span class="keywordtype">int</span> <a class="code" href="ccn_8h.html#a4c7d7421fc369be3c350113403344557" title="Set the error code in a ccn handle.">ccn_seterror</a>(<span class="keyword">struct</span> ccn *h, <span class="keywordtype">int</span> error_code);
<a name="l00926"></a>00926 <span class="keywordtype">int</span> <a class="code" href="ccn_8h.html#abd39c710dc95a559fc1401553ebd4f1a" title="Recover last error code.">ccn_geterror</a>(<span class="keyword">struct</span> ccn *h);
<a name="l00927"></a>00927 
<a name="l00928"></a>00928 <span class="comment">/***********************************</span>
<a name="l00929"></a>00929 <span class="comment"> * Low-level binary formatting</span>
<a name="l00930"></a>00930 <span class="comment"> */</span>
<a name="l00931"></a>00931 
<a name="l00932"></a>00932 <span class="comment">/*</span>
<a name="l00933"></a>00933 <span class="comment"> * Append a ccnb start marker</span>
<a name="l00934"></a>00934 <span class="comment"> *</span>
<a name="l00935"></a>00935 <span class="comment"> * This forms the basic building block of ccnb-encoded data.</span>
<a name="l00936"></a>00936 <span class="comment"> * c is the buffer to append to.</span>
<a name="l00937"></a>00937 <span class="comment"> * Return value is 0, or -1 for error.</span>
<a name="l00938"></a>00938 <span class="comment"> */</span>
<a name="l00939"></a>00939 <span class="keywordtype">int</span> <a class="code" href="ccn_8h.html#a2fded0bbb7253c024924baa53beda660" title="Append a ccnb start marker.">ccn_charbuf_append_tt</a>(<span class="keyword">struct</span> <a class="code" href="structccn__charbuf.html">ccn_charbuf</a> *c, <span class="keywordtype">size_t</span> val, <span class="keyword">enum</span> <a class="code" href="coding_8h.html#a750e116f861c8e3f015cde245bbc0570" title="Type tag for a ccnb start marker.">ccn_tt</a> tt);
<a name="l00940"></a>00940 <span class="comment"></span>
<a name="l00941"></a>00941 <span class="comment">/**</span>
<a name="l00942"></a>00942 <span class="comment"> * Append a CCN_CLOSE</span>
<a name="l00943"></a>00943 <span class="comment"> *</span>
<a name="l00944"></a>00944 <span class="comment"> * Use this to close off an element in ccnb-encoded data.</span>
<a name="l00945"></a>00945 <span class="comment"> * @param c is the buffer to append to.</span>
<a name="l00946"></a>00946 <span class="comment"> * @returns 0 for success or -1 for error.</span>
<a name="l00947"></a>00947 <span class="comment"> */</span>
<a name="l00948"></a>00948 <span class="keywordtype">int</span> <a class="code" href="ccn_8h.html#ac8fba19d429bb106de10a008142882aa" title="Append a CCN_CLOSE.">ccn_charbuf_append_closer</a>(<span class="keyword">struct</span> <a class="code" href="structccn__charbuf.html">ccn_charbuf</a> *c);
<a name="l00949"></a>00949 
<a name="l00950"></a>00950 <span class="comment">/***********************************</span>
<a name="l00951"></a>00951 <span class="comment"> * Slightly higher level binary formatting</span>
<a name="l00952"></a>00952 <span class="comment"> */</span>
<a name="l00953"></a>00953 
<a name="l00954"></a>00954 <span class="comment">/*</span>
<a name="l00955"></a>00955 <span class="comment"> * Append a non-negative integer as a UDATA.</span>
<a name="l00956"></a>00956 <span class="comment"> */</span>
<a name="l00957"></a>00957 <span class="keywordtype">int</span> <a class="code" href="ccn_8h.html#af18933c1d395fb231d2a41c611314717" title="Append a non-negative integer as a UDATA.">ccnb_append_number</a>(<span class="keyword">struct</span> <a class="code" href="structccn__charbuf.html">ccn_charbuf</a> *c, <span class="keywordtype">int</span> nni);
<a name="l00958"></a>00958 
<a name="l00959"></a>00959 <span class="comment">/*</span>
<a name="l00960"></a>00960 <span class="comment"> * Append a binary timestamp</span>
<a name="l00961"></a>00961 <span class="comment"> * as a BLOB using the ccn binary Timestamp representation (12-bit fraction).</span>
<a name="l00962"></a>00962 <span class="comment"> */</span>
<a name="l00963"></a>00963 <span class="keywordtype">int</span> <a class="code" href="ccn_8h.html#a38408ebe6a8a8e8c52998d1a1c68b1ff" title="Append a binary timestamp as a BLOB using the ccn binary Timestamp representation...">ccnb_append_timestamp_blob</a>(<span class="keyword">struct</span> <a class="code" href="structccn__charbuf.html">ccn_charbuf</a> *c,
<a name="l00964"></a>00964                                <span class="keyword">enum</span> <a class="code" href="ccn_8h.html#afec910e39c89dcf24a44f93e97032399">ccn_marker</a> marker,
<a name="l00965"></a>00965                                intmax_t secs, <span class="keywordtype">int</span> nsecs);
<a name="l00966"></a>00966 
<a name="l00967"></a>00967 <span class="comment">/*</span>
<a name="l00968"></a>00968 <span class="comment"> * Append a binary timestamp, using the current time.</span>
<a name="l00969"></a>00969 <span class="comment"> */</span>
<a name="l00970"></a>00970 <span class="keywordtype">int</span> <a class="code" href="ccn_8h.html#af331c0f9e57c2697e108cbd1f70e51c4" title="Append a binary timestamp, using the current time.">ccnb_append_now_blob</a>(<span class="keyword">struct</span> <a class="code" href="structccn__charbuf.html">ccn_charbuf</a> *c, <span class="keyword">enum</span> <a class="code" href="ccn_8h.html#afec910e39c89dcf24a44f93e97032399">ccn_marker</a> marker);
<a name="l00971"></a>00971 
<a name="l00972"></a>00972 <span class="comment">/*</span>
<a name="l00973"></a>00973 <span class="comment"> * Append a start-of-element marker.</span>
<a name="l00974"></a>00974 <span class="comment"> */</span>
<a name="l00975"></a>00975 <span class="keywordtype">int</span> <a class="code" href="ccn_8h.html#afc2eb536e63f315968abe901e52b506a" title="Append a start-of-element marker.">ccnb_element_begin</a>(<span class="keyword">struct</span> <a class="code" href="structccn__charbuf.html">ccn_charbuf</a> *c, <span class="keyword">enum</span> <a class="code" href="coding_8h.html#a720ee1182276ef229dcf775366d84f33" title="DTAG identifies ccnb-encoded elements.">ccn_dtag</a> dtag);
<a name="l00976"></a>00976 
<a name="l00977"></a>00977 <span class="comment">/*</span>
<a name="l00978"></a>00978 <span class="comment"> * Append an end-of-element marker.</span>
<a name="l00979"></a>00979 <span class="comment"> * This is the same as ccn_charbuf_append_closer()</span>
<a name="l00980"></a>00980 <span class="comment"> */</span>
<a name="l00981"></a>00981 <span class="keywordtype">int</span> <a class="code" href="ccn_8h.html#aa46b72f2e6b3b7f7753ff3baaa4efdf8" title="Append an end-of-element marker.">ccnb_element_end</a>(<span class="keyword">struct</span> <a class="code" href="structccn__charbuf.html">ccn_charbuf</a> *c);
<a name="l00982"></a>00982 
<a name="l00983"></a>00983 <span class="comment">/*</span>
<a name="l00984"></a>00984 <span class="comment"> * Append a tagged BLOB</span>
<a name="l00985"></a>00985 <span class="comment"> */</span>
<a name="l00986"></a>00986 <span class="keywordtype">int</span> <a class="code" href="ccn_8h.html#a7cdcd23fbb1b7cc273eb1a680341405f" title="Append a tagged BLOB.">ccnb_append_tagged_blob</a>(<span class="keyword">struct</span> <a class="code" href="structccn__charbuf.html">ccn_charbuf</a> *c, <span class="keyword">enum</span> <a class="code" href="coding_8h.html#a720ee1182276ef229dcf775366d84f33" title="DTAG identifies ccnb-encoded elements.">ccn_dtag</a> dtag,
<a name="l00987"></a>00987                             <span class="keyword">const</span> <span class="keywordtype">void</span> *data, <span class="keywordtype">size_t</span> size);
<a name="l00988"></a>00988 
<a name="l00989"></a>00989 <span class="comment">/*</span>
<a name="l00990"></a>00990 <span class="comment"> * Append a tagged binary number</span>
<a name="l00991"></a>00991 <span class="comment"> */</span>
<a name="l00992"></a>00992 <span class="keywordtype">int</span> <a class="code" href="ccn_8h.html#afca4cda3caa3c39357dd49dd17c43036" title="Append a tagged binary number as a blob containing the integer value.">ccnb_append_tagged_binary_number</a>(<span class="keyword">struct</span> <a class="code" href="structccn__charbuf.html">ccn_charbuf</a> *cb, <span class="keyword">enum</span> <a class="code" href="coding_8h.html#a720ee1182276ef229dcf775366d84f33" title="DTAG identifies ccnb-encoded elements.">ccn_dtag</a> dtag,
<a name="l00993"></a>00993                                       uintmax_t val);
<a name="l00994"></a>00994 
<a name="l00995"></a>00995 <span class="comment">/*</span>
<a name="l00996"></a>00996 <span class="comment"> * Append a tagged UDATA string, with printf-style formatting</span>
<a name="l00997"></a>00997 <span class="comment"> */</span>
<a name="l00998"></a>00998 <span class="keywordtype">int</span> <a class="code" href="ccn_8h.html#a10b8c6dc48e4640be33c90d983d3cb81" title="Append a tagged UDATA string, with printf-style formatting.">ccnb_tagged_putf</a>(<span class="keyword">struct</span> <a class="code" href="structccn__charbuf.html">ccn_charbuf</a> *c, <span class="keyword">enum</span> <a class="code" href="coding_8h.html#a720ee1182276ef229dcf775366d84f33" title="DTAG identifies ccnb-encoded elements.">ccn_dtag</a> dtag,
<a name="l00999"></a>00999                      <span class="keyword">const</span> <span class="keywordtype">char</span> *fmt, ...);
<a name="l01000"></a>01000 <span class="comment"></span>
<a name="l01001"></a>01001 <span class="comment">/**</span>
<a name="l01002"></a>01002 <span class="comment"> * Versioning</span>
<a name="l01003"></a>01003 <span class="comment"> */</span>
<a name="l01004"></a>01004 
<a name="l01005"></a>01005 <span class="comment">/* Not all of these flags make sense with all of the operations */</span>
<a name="l01006"></a><a class="code" href="ccn_8h.html#a2150b60bb3f715cc08e2db06cb7ec6ec">01006</a> <span class="preprocessor">#define CCN_V_REPLACE  1 </span><span class="comment">/**&lt; if last component is version, replace it */</span>
<a name="l01007"></a><a class="code" href="ccn_8h.html#a15a55d62484c66fd622b3f185bbae8f1">01007</a> <span class="preprocessor">#define CCN_V_LOW      2 </span><span class="comment">/**&lt; look for early version */</span>
<a name="l01008"></a><a class="code" href="ccn_8h.html#a2c0518259a694eafb175f0bc00206d58">01008</a> <span class="preprocessor">#define CCN_V_HIGH     4 </span><span class="comment">/**&lt; look for newer version */</span>
<a name="l01009"></a><a class="code" href="ccn_8h.html#ae2e125e75466f7e0acb1d89f6348fbd9">01009</a> <span class="preprocessor">#define CCN_V_EST      8 </span><span class="comment">/**&lt; look for extreme */</span>
<a name="l01010"></a><a class="code" href="ccn_8h.html#a20cef5245b26fb42884cacb3bb35a984">01010</a> <span class="preprocessor">#define CCN_V_LOWEST   (2|8)</span>
<a name="l01011"></a><a class="code" href="ccn_8h.html#a0efb877cdb3472bf6b892ea4a86fe065">01011</a> <span class="preprocessor"></span><span class="preprocessor">#define CCN_V_HIGHEST  (4|8)</span>
<a name="l01012"></a><a class="code" href="ccn_8h.html#ad915063e68268a743455dda0484a934b">01012</a> <span class="preprocessor"></span><span class="preprocessor">#define CCN_V_NEXT     (4|1)</span>
<a name="l01013"></a><a class="code" href="ccn_8h.html#a9aeea59d8600532f057a7f0c0ef67faa">01013</a> <span class="preprocessor"></span><span class="preprocessor">#define CCN_V_PREV     (2|1)</span>
<a name="l01014"></a><a class="code" href="ccn_8h.html#ac0d9b4a6ddee8ae94d87d8c2340ac907">01014</a> <span class="preprocessor"></span><span class="preprocessor">#define CCN_V_NOW      16 </span><span class="comment">/**&lt; use current time */</span>
<a name="l01015"></a><a class="code" href="ccn_8h.html#a2e7bbedf79458f1d2a94603c906e4cb6">01015</a> <span class="preprocessor">#define CCN_V_NESTOK   32 </span><span class="comment">/**&lt; version within version is ok */</span>
<a name="l01016"></a><a class="code" href="ccn_8h.html#a4ae078e87b88a173ff8487c8d3583f07">01016</a> <span class="preprocessor">#define CCN_V_SCOPE0   64 </span><span class="comment">/**&lt; use scope 0 */</span>
<a name="l01017"></a><a class="code" href="ccn_8h.html#a00ea890436cfa43dc526acd72531c5b8">01017</a> <span class="preprocessor">#define CCN_V_SCOPE1   128 </span><span class="comment">/**&lt; use scope 1 */</span>
<a name="l01018"></a><a class="code" href="ccn_8h.html#adc5e914e1eb21707ab3e3c538f253f1b">01018</a> <span class="preprocessor">#define CCN_V_SCOPE2   256 </span><span class="comment">/**&lt; use scope 2 */</span>
<a name="l01019"></a>01019 
<a name="l01020"></a>01020 <span class="keywordtype">int</span> <a class="code" href="ccn_8h.html#ac6285f1a77360610cb68ddfe9769f495" title="Resolve the version, based on existing ccn content.">ccn_resolve_version</a>(<span class="keyword">struct</span> ccn *h,
<a name="l01021"></a>01021                         <span class="keyword">struct</span> <a class="code" href="structccn__charbuf.html">ccn_charbuf</a> *name, <span class="comment">/* ccnb encoded */</span>
<a name="l01022"></a>01022                         <span class="keywordtype">int</span> versioning_flags,
<a name="l01023"></a>01023                         <span class="keywordtype">int</span> timeout_ms);
<a name="l01024"></a>01024 
<a name="l01025"></a>01025 <span class="keywordtype">int</span> <a class="code" href="ccn_8h.html#af222a5e0ff25d4f2ff60eed72b3defb2" title="Extend a Name with a new version stamp.">ccn_create_version</a>(<span class="keyword">struct</span> ccn *h,
<a name="l01026"></a>01026                        <span class="keyword">struct</span> <a class="code" href="structccn__charbuf.html">ccn_charbuf</a> *name,
<a name="l01027"></a>01027                        <span class="keywordtype">int</span> versioning_flags,
<a name="l01028"></a>01028                        intmax_t secs, <span class="keywordtype">int</span> nsecs);
<a name="l01029"></a>01029 
<a name="l01030"></a>01030 <span class="keywordtype">int</span> <a class="code" href="ccn_8h.html#aac1c1cd8aa831f6c0f8e409d07475907" title="Ask upstream for a guest prefix that will be routed to us.">ccn_guest_prefix</a>(<span class="keyword">struct</span> ccn *h, <span class="keyword">struct</span> <a class="code" href="structccn__charbuf.html">ccn_charbuf</a> *result, <span class="keywordtype">int</span> ms);
<a name="l01031"></a>01031 
<a name="l01032"></a>01032 <span class="preprocessor">#endif</span>
</pre></div></div>
<hr class="footer"/><address style="text-align: right;"><small>Generated on Mon Feb 4 11:56:46 2013 for Content-Centric Networking in C by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
